Algorithmic Approach for Prediction and Early Detection of Diseases Using
Retinal Images
Raghu Raj P
Department of Information
Science and Engineering,
PES Institute of
Technology, Bangalore,
India
raghuraj19@gmail.com

Gurudatha Pai K
Department of Electronics
and Communication
Engineering, PES Institute
of Technology, Bangalore,
India
gurudatha@gmail.com

Abstract
The Fundus images of retina of human eye can
provide valuable information about human health and
open up a window of unforeseeable opportunities. In
this respect, one can systematically assesses digital
retinal photographs, to predict chronic diseases. This
eliminates the need for manual assessment of
ophthalmic images in diagnostic practices. It is also
possible to detect certain type of cancers and cataract
in their early stages in addition to diseases like
hypertension, stroke and serious organ malfunctioning
in diabetic patients. The facility to maintain a database
of the retinal photographs and associated data of any
patient, taken on a regular basis, scrutinized for the
prediction of the diseases may easily be incorporated.
Keywords: Object detection, Image segmentation,
bottom hat transformation, Photography

1. Introduction
The most notorious killers of today’s world –
cancer, heart disease, hypertension, stroke and diabetes
have limited prediction possibilities using current
diagnostic methods. It is a known fact that the retinal
vascular signs may predict the development of these
diseases. It is applicable even to population
traditionally considered to be at low risks of vascular
diseases [7]. This revolutionizing concept, which is
rather new, has the potential to simplify, whilst
efficiently and quantitatively predict and detect various
chronic diseases.
Digital photography is an easy, inexpensive
and rapid way to capture clinical images. The image
allows peripheral views of the retina. Such wide field
photography may catch peripheral tears in addition to
diseases affecting the disc and macula. These systems
has the sensitivity and accuracy to allow detection of

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

Prof. S. S. Shylaja
Department of Information
Science and Engineering,
PES Institute of
Technology, Bangalore,
India
head_is_pesit@yahoo.co.in

early stages of, and small changes in, diabetic
retinopathy and host of other diseases providing tools
for comparison, model building, and statistical and
recursive analysis. [1] [2]. The ambient room
illumination is generally good enough to allow the
subject to be viewed clearly.
The specifications of a camera for diagnosis
are: Angle of coverage (Mydriatic, Non-Mydriatic),
Working distance/angle, Patient’s Diopter correction
range, Pupil’s range, Filters used, Optical head swing,
Optical head tilt, Light source, Flash intensity, Image
format supported, computer interface.
These cameras provide us with the image in
machine-oriented format. The best one of 4 - 5 images
is selected for analysis. Once the data is transferred to
the computer, the images can be catalogued. The
camera may be attached to eyepiece of a microscope.
1.1 Motivation. The ideas and algorithms proposed in
this paper have been motivated by the fact that not all
people of India get good medical care. These ideas
when implemented with reasonable accuracy can aid in
early prediction of diseases and automated disease
diagnosis at affordable cost.

2. Technical Challenges
The diagnostic methodology proposed is an
automated system that attempts to match medical
experts’ perception of images. This necessitates an
accurate algorithm that can compute features like
Cotton Wool Spots, variation in thickness of veins and
arteries, change in color of the retina, etc. Another
challenge that lies is to set up a cost effective system.

3. Implementation

This paper presents few novel ideas and
algorithms to systematically process the retinal images
and infer on the nature and extent of disease. These
include color-based segmentation, edge detection using
‘Prewitt’ and ‘Sobel’ operators among others. Hence
eliminating the manual factor in assessment of these
diseases and also automating the diagnostic processes.
The Fig 1 depicts the block diagram of the system.

The basic idea is either to display only colors
of interest or to use the region defined by colors for
further processing. However since color pixel is a 3dimensional quantity, the color transformation
becomes complicated. The simplest method is to map
the colors outside some range of interest to a nonprominent color, say black. If the colors of interest are
enclosed by a cube of width W and centered at a
prototypical, say average, color with components (a1,
a2, a3) then the transformation may be given as

 0 if

Si = 
 ri


[

r j - a j > W / 2 ]

j = 1, 2 , 3 

otherwise

i = 1, 2 ,3

The images obtained by Fundus camera are
generally in DICOM or jpeg formats. Here, we have
assumed the images to be available in bitmap format.
The methodologies discussed are equally applicable to
the mentioned and other image formats if they were
converted to bitmap format. We have used RGB vector
spaces for color representation.
Any image is a function of two parameters
horizontal distance x and a vertical distance y. In
computer representation x increases from left to right
and y increases down a line. So, a two dimensional
array is what is used for representing an image.
However, in the RGB vector spaces each image is a
three dimensional matrix, owing to the requirement of
representing three-color components.

3.1 Cotton Wool Spots (CWS)
These indicate possibility of serious organ
failure from diabetes. The study of their intensity and
size indicate different levels of severity involved in
organ malfunctioning that can occur in near future.
CWS is a dull white patch in the retina of few
thousands or more pixels and is shown in Fig 2 [3].
The straightforward method to implement this is called
the “Color Slicing”.

3.2 Color Slicing

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

Fig 2. Cotton Wool Spots and

Hemorrhages
The transformation highlights the colors
around the prototype resetting all other colors to black
[4].
Another approach is to use a model of sphere
rather than a cube. The transformation in that case
would be,


0 if
Si = 
 ri

 3 ( rj - aj ) ^2 > Ro ^2  
 
 ∑
j =1

otherwise
i = 1,2,3

3.3 Hemorrhages
Severe bleeding/escape of blood to extra
vascular space is seen as Hemorrhages. The different
forms of hemorrhages in the retina help the physician
to further study the state of hypertension and stroke.
Any kind of Hemorrhages is as a red patch but does
differ a bit from true red blood color depending on

whether it is a vein or artery that is bleeding as shown
in Fig 2. Again this can also be inferred from the Color
Slicing technique.

3.4 Focal Vessel Narrowing
Focal Arteriolar Narrowing, Arterio-Venious
Nicking, Microaneurysms are few of the early
pathological changes in a patient of Diabetes Mellitus
as shown in Fig 3 and Fig 4. They are generally
associated with arteries and veins in the eye and their
pattern. So, the tasks in hand are to extract these and
then co-relate the resulting information with a
knowledge base. The methods we propose for this is
edge detection using Morphological Image Processing
followed by a gradient operation using Sobel or Prewitt
operators.
Fig 3. Focal Vessel Narrowing

Fig 4. Arterio-Veinous Nicking

3.4.1. Extraction of Veins Using Bottom Hat
Transformation. The extraction of veins is nothing but
edge detection [6] [5]. But just a gradient operation
does not yield good results. So, the image is opened by
the morphological operation, which smoothes the
contour of an object. Then Bottom Hat Transformation
using a structural element transforms the image to the
required boundary-only image.
A line is chosen as the structural element to
retain the shape and size of the veins and arteries.

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

3.4.2. Extraction of Veins Using Eroding. The
boundary β (A) an image A can also be determined by
first eroding A by a structuring element B and then
performing the set difference between A and its
erosion, i.e.

β ( Α ) = A − ( AΘB)

Then a color slicing is to be made in a
predetermined range of values based on the
illumination, camera type and filters used while taking
the photograph.

3.5 Prediction/Detection Algorithm
1. The image is processed and obtained in the required
format.
2. The CWS are detected and quantized (if present)
using the color splicing technique.
3. The Hemorrhages are detected and quantized (if
present) using color segmentation.
4. Veins are extracted using the bottom hat
transformation.
5. Compare CWS count, hemorrhage count against that
in the patient’s database previously recorded and infer
on nature and extent of disease.
6. Compare Vein structure extracted with ideal vein
structure and patient’s record in the database, infer on
Arterio-Veinous Nicking and Focal Vessel Narrowing
The proposed methods were experimented on
a Microsoft WindowsXp based PC with C language
programming and MATLAB. Around twenty different
samples were tried. The images before processing
appear in Fig 5a, Fig 6a, and Fig 7a and after
processing appear Fig 5b, Fig 6b, Fig 7b and Fig 7c.

Fig 5. a

Fig 5. b

Fig 7. b

Fig 6. a

Fig 7. c

4. Conclusion
Today’s fast changing world demands for
automated and fairly accurate diagnosis processes.
Systematic Image Processing techniques can aid early
identification of diseases. Hence prompt incorporation
of these in the health care system; adequate education
of the patient, regular lifelong evaluation, appropriate
referral and timely treatment, the vast majority of
severe damages to health can be prevented.
Fig 6. b

Fig 7. a

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

Further research on segmentation and other related
algorithms can help to
• Detect cardiac diseases and cataracts at an early
stage.
• Provide quantitative results suitable for clinical
diagnostic practices.
 Stratify risks in given patient or appropriate
population through analysis of its database.
 Aid the medical experts in targeting the problem
zones to provide appropriate treatment. E.g.: Narrowed
retinal arteries are associated with long-term risks of
hypertension.
 Provide multi-database networking and telemedicine
provision.

5. Acknowledgements
Dr. Bhujanga Shetty and Staff,
Narayana Nethralaya, Eye Hospital, Research Centre,
Bangalore, India.
Dr. K. N B. S Murthy
Principal,
and
Prof. S Natarajan,
Information Science and Engineering,
PES Institute of Technology,
Bangalore, India.

6. References
[1] Digital Clinical Photography: Choosing a Digital
Camera for Clinical Work
http://www.pulsemagazine.com.au/index.php?option=c
om_content&task=view&id=67
[2] Fogla R, Rao Srinivas K,
Ophthalmic Photography using a Digital Camera,
Sankara Nethralaya, Medical and Vision Research
Foundation, Chennai, Tamilnadu, India
http://www.ijo.in/article.asp?issn=03014738;year=2003;volume=51;issue=3;spage=269;epag
e=272;aulast=Fogla
[3] Francisco Gómez-Ulla, Maria I. Fernandez,
Francisco Gonzalez, Pablo Rey, Marta Rodriguez,
Maria J. Rodriguez-Cid, Felipe F. Casanueva, Maria A.
Tome, Javier Garcia-Tobio, and Francisco Gude,
Digital Retinal Images and Tele-Ophthalmology for
Detecting and Grading Diabetic Retinopathy
http://care.diabetesjournals.org/
[4] Gonzalez and Woods
Digital Image Processing, Pearson Education, 2002
[5] Michal Softa and Charles V. Stewart,
Retinal Vessel Centerline Extraction Using Multiscale
Matched Filters, Confidence and Edge Measures,
IEEE transactions On Medical Imaging Vol. 25, No.
12, December 2006,
10.1109/TMI.2006.884190
[6] Tien Yin Wong, Knudtson Michael D, Klein
Ronald, Klein Barbara E. K, Meuer Stacy M and
Hubbard Larry D.
Computer-Assisted Measurement of Retinal Vessel
Diameters in the Beaver Dam Eye Study:

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

Methodology, correlation between eyes and effect of
refractive errors,
www.cat.inist.fr
[7] Thomas Hugh, Robin Martin, Nicole Bordes,
Bernard Pailthorpe
Semi-Automatic Feature Delineation In Medical
Images.
The University of Queensland, Australia.

