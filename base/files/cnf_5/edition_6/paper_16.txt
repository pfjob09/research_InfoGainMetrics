Automatic Foot-plant Constraints Detection Shoes

Yan Gao, Lizhuang Ma, Xiaomao Wu, Zhihua Chen
Department of Computer Science and Engineering
Shanghai Jiao Tong University, Shanghai 200030, China
{gaoyan,wuxiaomao,zhihua}@sjtu.edu.cn ma-lz@cs.sjtu.edu.cn

Abstract

actor with an optical or magnetic motion capture

Motion editing methods have been widely used to

system. However, we can only capture a specific

create realistic human animation, which is vital to

motion

maintain footplant constrains during motion editing

environment. If the situation changes, the whole data

process. In this paper, we present a simple but

require to be recaptured.

efficient way for footplant constraints detection.

of

a

specific

person

in

a

specific

So the ability to edit captured motion is vitally

Existing methods for automatic footplant detection

important.

are all software-based which are sensitive to motion

techniques are designed to change existing motion

data noises. We improve this work by hardware

sequences while retaining as many of their important

instead. We equip the actor with a simple pressure

characteristics as possible. These characteristics are

trigger circuit under his shoes. Whenever the toes or

often made explicit using geometric constraints [1].

heels of the actor touch the ground, the circuit will

Unlike the previous approaches, we do not concern

be switched on and this information will be captured

about how to detect geometric constraints through

by motion capture system. Combining this additional

captured motion data but obtain the information of

information with the ordinary captured motion data,

footplant constraints directly by hardware.

Constraint-based

motion

editing

we can identify footplant constraints effectively. Such

Real human motion usually contains footplants,

additional information will then be saved into the

which are periods of time when a foot or part thereof

output motion capture file and can be used

remains in a fixed position on the ground [2]. Since

conveniently by the user. The new framework we

footplants are often the primary connection between

developed can provide more precise detection results

a character and the surrounding environment, even

than previous software-based methods. Moreover, by

small amounts of footskate can destroy the realism of

pre-computing the footplant constraints, the time for

a motion.

footplant

constraints

detection

in

previous

software-based methods can be saved.

Therefore

footplant

constraints

must

be

maintained during motion editing process. To do so,
one must detect the exact positions of footplants first.

1. Introduction

Footplant constraints may be automatically identified

Generating realistic character animation remains

by judging if the feet positions keep fixed for some

one of the great challenging in computer graphics.

period of time. However, as Kovar[2] mentioned,

Recently, Motion capture has become the most

such methods can be unreliable if the original data

promising technique. Realistic motion data can be

are noisy or the motion does not have clear

captured through recording the movement of a real

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

footplants, such as a runner skidding to a halt or a

2.1 Constraints Detection Methods
Many editing techniques have been proposed such

dancer shuffling.
Though almost all the existing software-based

as motion warping [3], motion retargeting [4],

footplant detection methods suppose the original data

motion path editing [5]. To make the result animation

are noise-free, motion data obtained from motion

realistic, there is a general need to maintain

capture systems often include noises, which are

character’s footplant constraints during motion

imported by various reasons. For optical motion

editing process. Therefore, Kovar et al [2] specially

capture systems, they suffer from the occlusions and

proposed an algorithm to enforce footskate cleanup.

marker disappearance problems as well as the

His method is often used as a postprocess.

resolution of the cameras and the sophistication of

However, there is little research in the literature

their tracking software. For magnetic motion capture

about footplant constraints detection. Bindiganavale

systems, the measure precision is limited for lack of

and Badler[6,7] used the proximity of predefined

sufficient receivers. In addition, magnetic motion

sites of interest to deduce interaction constraints.

capture

the

However, their method can be unreliable if the

electronic-magnetic disturbances. Motion errors may

original data are noisy or the input motion does not

be further imported during the skeleton construction

have clear footplants. Lee et al [14] determined

using inverse kinematics based approaches.

footplant constraints by the foot’s relative velocity

systems

are

sensitive

to

In this paper, we propose a new framework for

and proximity to the ground. Their method also

footplant constraints detection by assistant hardware

suffers from the motion data noises and the proximity

device. We call our device Footplant Detection

to the ground is unreliable if actor walks on an

Shoes. Our Footplant Detection Shoes are equipped

uneven terrain. Liu and Popoviü[8] also presented an

with switch circuits. During motion capture process,

algorithm that automatically detects positional and

once the actor’s heels or toes touch the ground, the

sliding constraints. Though their method can identify

circuits will be turned on and this information can be

single

recorded by motion capture system. Because our

constraints and plane positional constraints, this

device directly detects the contact relationship

method does not consider the interaction with the

between the feet and the ground, and the arrangement

objects of the scene. Marc et al [1] extended their

of LEDs in our device can avoid occlusion, our

algorithm for general geometric constraints detection.

detection result is totally noise-free. We integrate the

However, such extended method cannot detect

additional footplant information into motion capture

instantaneous constraints. Moreover, it is hard to use

files which can then be used by animators efficiently.

for

From the point of our view, the main contribution

positional

animators

who

constraints,

line

generally need

positional

high-level

constraints such as footprints or objects to reach.

of this paper is not to design the device for automatic

Savenko and Clapworthy[9] described the criteria

footplant detection but present a new framework that

that were used to identify the instants when

performs the footplant detection work during motion

extremities contact and leave the ground. Their

capture process. Moreover, our method is noise-free

criteria included velocity and bounding box criteria,

and the time of footplant constraints detection in

ground clearance criterion, feature-based criteria

previous software-based methods can be saved.

and statistical criterion. In these criteria, the Velocity
and bounding box criteria are the most effective way

2. Related Works

to check if the foot does not change its position for
some period of time. The problem is how to
adaptively choose a threshold for minimum duration
of the contact and the velocity threshold (bounding

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

box size). The Ground clearance criterion identifies

introduction to motion capture systems; then we

foot-ground contact through looking at the distance

explain our footwear system and its electronic device

between the foot and the ground. However, this

in detail; finally, we give an introduction to our

criterion is not reliable because foot can be very close

extended motion file format.

to

the

ground

during

human

motion.

The

feature-based criteria and statistical criterion are

3.1 Motion Capture Systems

difficult to use and are not suited for footplant
Motion capture is a widely used technique for

detection.

generating realistic human motion in computer
games. Motion data for an approximate skeletal

2.2 Shoe-Based System

hierarchy of the subject is recorded by motion
Some researchers used foot-ground contacts
information
synthesis.

for

motion

Addlesee

and

analysis
his

and

motion

colleagues

capture

system

and

then

used

to

drive

a

reconstruction on the computer. According to the

[10]

type of motion being captured, Motion capture

developed a sensor system called the Active Floor

systems can be divided into two main types:

which is a weight sensitive floor and can be used as a

magnetic and optical [13]. Because optical systems

means of sensing the distribution and time variation

can offer higher accuracy at higher sampling speeds

of loads. Orr and Abowd’s Smart Floor System [11]

than magnetic systems and give greater freedom to

identified people based on their footstep force

the

profiles. The ground reaction forces are obtained

nowadays. In this paper, we focus on optical capture

through the load cells and measuring sensors. The

systems.

performers,

they

become

more

popular

outputs of the above systems include both the ground

There are two types of optical capture systems

reaction forces and feet positions information.

available commercially today: Active Optical and

Paradiso et al [12] built all electronics directly onto

Passive Optical systems. Active Optical systems use

the shoes. The sensors and electronics of their device

Pulsed-LEDs as their markers while the Passive ones

are more complicated than the other systems. All of

use reflective markers. Optical motion capture

these systems are used solely and do not cooperate

systems utilize video cameras to track the motion of

with motion capture systems.

reflective markers (or Pulsed-LED's) attached to

The pressure sensor pad systems are expensive

joints of the actor's body. After the post-process, the

and inconvenient to use while the electronics of the

resulting data stream therefore consists of 3D

previous Shoe-borne instrumentations that record too

position data for each marker. We will show how to

much information are complicated. Because motion

combine our instruments with motion capture

capture systems can provide the feet’s positions

systems in next section.

information, our device records only foot-ground
contacts information which makes the electronic

3.2 Footwear

device simpler than the previous ones.
To make the footplant information available to the

3. Footplant Detection System

user, we intend to obtain such information during the
motion capture process and save it into the output

Our system automatically identifies footplant

motion file. We invent a simple shoe-like instrument

constraints by combining pressure sensitive footwear

that can be worn by the actor. The actor’s

with motion capture system. This section is

foot-ground interaction information can be provided

organized as follows: at first

by our device. Combining such information with feet

we

make an

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

position information obtained by a motion capture

LEDs

system, we can get the footplant information. Our
device is shown in Figure 1.
Battery
Pressure Switch
Triggers

Battery 1
2

LED
Wire 3
Trigger

4

LED 2
Wire 34
Trigger

Figure 1.Our Footwear device
For optical motion capture systems, our footwear

Figure 2.The electronics
For magnetic motion capture systems, we use
resistances instead of LEDs in figure 2. Both of them
work in the same way.

includes a battery (identified by 1 in figure 1), two
LEDs (identified by 2 in figure 1), electrical wires

3.4 Our Motion Capture File Format

(identified by 3 in figure 1)and two pressure trigger
switches(identified by 4 in figure 1). Note that the

There are many motion capture file formats such as

light colors of the LEDs in our device are different

BVH, AMC, C3d, etc. We append our footplant

from those in the motion capture system. Whenever

information to the end of the original motion capture

actor’s toes or heels touch the ground, the

file. We call such file formats EBVH (extended

corresponding pressure trigger switch turns on the

BVH), EAMC and EC3d according to BVH, AMC,

circuit. Then the light of the LEDs can be recorded

C3d, respectively. As a comparison, we show the

by the motion capture system (no matter passive or

BVH file format in figure 3 and our EBVH format in

active one). The motion capture system saves the

figure 4.

contacts information into the output files. Thus we
can utilize the footplant information later.
For magnetic motion capture systems, we use
wires instead of LEDs directly connected with the
motion capture system. Whenever actor’s toes or
heels touch the ground, one electric signal is sent to
the motion capture system. Thus we can acquire the

HIERARCHY
ROOT rootname
{
OFFSET ...(offset value)
CHANNELS ...(channel information)
JOINT jointname
{
...(Hierarchical joint information)
}
}

footplant information also.

3.3 Electronics System
The electronics system of our footwear device is
relatively simple. The whole electronic system
contains two parts: the toe-trigger part and the
heel-trigger part. The toe-trigger part reflects toes’
contacts information while the heel-trigger part
reflects the heels’. These two parts are connected in
parallel way while the LEDs and the pressure trigger
switch are connected in series way. The whole
electronics are shown in Figure 2.

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

MOTION
Frames: ...
Frame Time: ...
......(joint Frame data)

Figure 3.The BVH file Format

not applicable to ballet dancing movements for the

HIERARCHY
ROOT rootname
{
OFFSET ...(offset value)
CHANNELS ...(channel information)
JOINT jointname
{
...(Hierarchical joint information)
}
}

contact of the very tips of the toes. It is obvious
because we only equip the pressure triggers at heels
and toes.
File

format

compatibility:

To

test

the

compatibility of our file format with the existing
motion files, we play our motion files in some
animation platforms including Dagger, Moviewer
and Life Forms etc. We use EBVH (extended BVH)

MOTION
Frames: ...
Frame Time: ...
......(joint Frame data)

as our test file format because BVH format is most
popularly used in character animation field. As we
expected, the contents appended in the files have no
influence on these animation platforms. They can

FOOTPLANT
JOINTNAME joint1
FRAME ...(frame number of footplant)
JOINTNAME joint2
FRAME ...(frame number of footplant)
......

play our motion files correctly.

5. Discussion And Future Work
In this paper we have present a framework to

Figure 4.Our EBVH file Format
Our file format is compatible with the original one
because almost all existing applications parse files
only according to keywords. So the final parts of the
files will be discarded by the existing applications

automatically detect footplant constraints. In contrast
to previous software-based approaches, our method
combines the footwear hardware with motion capture
systems. Our hardware-based method is more robust
than the previous ones because we obtain additional

because they didn’t deal with them.

information during the motion capture process.
Moreover, our method can be used to detect durative

4. Results

constraints as well as instantaneous constraints. In

Because motion capture systems work as a black
box, we can not add any information to them now. So
in this paper we only show how our device’s
Footplant constraints: We equipped an actor
with our shoes and recorded light information of the
LEDs in our shoes by a video camera. The actor
played various motions such as walking, running,
going

previous software-based algorithms can be saved.
However, there are also some limitations in our
method. First, our method must work under the

electronics work.

jumping,

addition, the footplant detection time needed for the

upstairs,

and

ballet

dancing

movements in order to test which types of
movements can be conducted by our system. We also
test the ability of our device for detection of

support of the existing business motion capture
systems. Because the footplant information is widely
used in motion editing, we believe that it deserves the
business systems to detect footplant information
additionally. Second, our method can detect only
footplant constraints now. We wish to expand it
further for all kinematics end-effectors constraints in
the near future.

instantaneous contact information. The results show
that our device can detect instantaneous footplant and

6. References

a variety of motions as well. Our device also works
well for the uneven terrain. However, our method is

[1] S. Marc, B. L. Callennec and R. Boulic, “A Generic
Method

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

for

Geometric

Contraints

Detection”,

In

Proceedings of Eurographics, Short presentation session

[9] A. Savenko and Dr. G. Clapworthy, “Using Motion

2004, August 2004

Analysis

[2] L. Kovar, J. Schreiner and M. Gleicher, “Footskate

Proceedings

of

Visualisation,

Techniques
Sixth

for

Motion

International

Retargetting”,

In

Conference

on

cleanup for motion capture editing”, In Proceedings of the

Information

2002 ACM SIGGRAPH/Eurographics symposium on

pp.110-115, July 2002

Computer animation, ACM Press, pp.97-104, July 2002

[10] M. D. Addlesee, A. Jones, F. Livesey and F. Samaria,

[3] A. Witkin and Z. Popoviü, “Motion warping”, In

“The

Proceedings of ACM SIGGRAPH 95, Annual Conference

Communications, IEEE, Piscataway, NJ, USA , Vol.4,

Series, ACM SIGGRAPH, pp.105–108, 1995

No.5, 7, pp.35-41, Oct 1997

[4] M. Gleicher, “Retargeting motion to new characters”,
In

Proceedings

0f

ACM

SIGGRAPH

98,

Annual

ORL

Active

IEEE,

Floor”,

London,

IEEE

England,

Personal

[11] R. J. Orr and G. Abowd, “The smart floor: A
mechanism for natural user identification and tracking”, In

Conference Series, ACM SIGGRAPH, pp.33–42, 1998

Conference on Human Factors in Computing Systems, The

[5] M. Gleicher, “Motion path editing”, In J. Hughes and

Hague, Netherlands, ACM Press, April 2000

C. Sequin, editors, Proceedings 2001 ACM Symposium on

[12] Paradiso, Joseph, and E. Hu, “Expressive Footwear for

Interactive 3D Graphics, ACM, pp.195-202, March 2001

Computer-Augmented

[6] R. Bindiganavale and N. Badler, “Motion abstraction

Proceedings of the 1997 International Symposium on

and mapping with spatial constraints”, In Modelling and

Wearable Computers, Cambridge,MA, IEEE Computer

Motion Capture Techniques for Virtual Environments,

Society Press, pp.165-166, Oct 1997

International Workshop, CAPTECH’98, Springer-Verlag,

[13] B. Bodenheimer, C. Rose, S. Rosenthal and J. Pella,

Geneva, Switzerland, pp.70–82, Nov 1998

“The Process of Motion Capture: Dealing with data”, 8th

[7] R. Bindiganavale, “Building parameterized action

EUROGRAPHICS Int. Workshop on Computer Animation

Dance

Performance”,

In

representations from observation”, PhD thesis, Department

and Simulation'96, ISBN 3-211-83048-0, Springer-Verlag,

of Computer and Information Sciences, University of

pp.3-18, 1996

Pennsylvania, 2000.

[14] J. Lee, J. Chai, P. Reitsma, J. Hodgins, and N. Pollard,

[8] C. K. Liu and Z. Popoviü, “Synthesis of complex

Interactive Control of Avatars Animated with Human

dynamic character motion from simple animations”, In

Motion Data, ACM Transactions on Graphics (SIGGRAPH

ACM Trans on Graphics, Proceedings of the 29th annual

2002), volume 21, number 3, pp491-500, July 2002

conference

on

Computer

graphics

and

interactive

techniques, 21(3), (SIGGRAPH 2002) 21, 3, pp.408–416,
2002

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

