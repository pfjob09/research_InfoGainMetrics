2009 Sixth International Conference on Computer Graphics, Imaging and Visualization

Style-sheets Extraction from Existing Digital Contents by Image Processing for
Web-based BML Contents Management System

Hidekazu Morimoto, Fanfan Meing, Shigeru Takano and Yoshihiro Okada
Graduate School of Information Science and Electrical Engineering, Kyushu University
Motooka 744, Nishi-ku, Fukuoka, 819-0395 JAPAN
{hidekazu.morimoto, hanhan.mou, takano, okada}@i.kyushu-u.ac.jp
the Web-browser. Although there are a couple of dedicated
software packages for BML contents creation, they are very
expensive and difficult to use. So, BML contents creation is
not easy for the end-user. To make it easier to create BML
contents, we have been developing a web-based BML
contents management system. In this paper, we introduce
fundamental functionalities provided by our proposed BML
contents management system.
Along with the growing rate of internet access around the
world, a huge number of digital contents have been created
and accumulated on the Web. On the other hand, a large
amount of intellectual contents printed on the paper (etc.
publicity handout) have still been produced. We can easily
obtain their images by the image capturing. So, this paper
also proposes style-sheets extraction method for BML
contents from such already existing digital contents by image
processing techniques.

Abstract—This paper proposes a web-based BML contents
management system. BML is the short form of Broadcast
Markup Language which is a script language for data
broadcasting contents included in digital TV broadcasting
services of Japan. The scripting style of BML is very similar to
that of HTML and it also supports style-sheets and JavaScript.
However, in BML, there are many restrictions about the
display area size, font sizes, color types and so on because the
BML-browser of TV is not flexible as compared with the Webbrowser. Although there are a couple of dedicated software
packages for BML contents creation, they are very expensive
and difficult to use. So, BML contents creation is not easy for
the end-user. To make it easier to create BML contents, the
authors have been developing a webbased BML contents
management system. This paper explains fundamental
functionalities provided by the proposed BML contents
management system.
Already many digital contents were created and stored and
we can easily obtain their images by capturing the screen
snapshot. So, this paper also proposes style-sheets extraction
method for BML contents from such already existing digital
contents by image processing techniques.

The remainder of this paper is organized as follows: First
of all, Section II describes related work. Section III explains
specifications of data broadcasting contents. In Section VI,
we describe the style-sheets extraction method. Section V
introduces our proposed web-based BML contents
management system, and Section VI shows some
experimental results of style-sheet extractions. Finally, we
conclude the paper in Section VII.

Keywords-BML, Style sheets; Contentsmanagement system;
Image processing

I.

INTRODUCTION

In Japan, analog TV broadcasting services will be finished
by July, 24th, 2011 and only digital TV broadcasting
services will remain after that. The digital TV broadcasting
service includes a data broadcasting service has not been
supported by the analog TV broadcasting. In this situation,
we have to do researches on technologies of digital TV
broadcasting services including data broadcasting services to
propose their new services and standards. To do so, we
introduced digital TV broadcasting equipments into our
university and we received the license of experimental digital
TV broadcast from the government.
Data broadcasting contents are provided by using script
language called BML (Broadcast Markup Language). The
scripting style of BML is very similar to that of HTML and it
also supports style-sheets and JavaScript. However, in BML,
there are many restrictions about the display area size, font
sizes, color types and so on because the BML-browser works
on only a TV display and is not flexible as compared with
978-0-7695-3789-4/09 $25.00 © 2009 IEEE
DOI 10.1109/CGIV.2009.88

II.

RELATED WORK

The most part of this paper explains automatic style-sheets
extraction from images of existing digital contents. There is
the research [1] that automatically generates style-sheets
using the interactive evolution calculation. Moreover, the
researches [2][3][4][5][6] are about text string extraction
technology from images within which pictures and character
string are combined. However, there have not been any
techniques to generate style-sheets as layout information
about picture areas and text string areas from images of
existing digital contents so far.

138

III.

A.

Rectangular area extraction
Images of existing contents are used as inputs. First of
all, edges are extracted from the input image by Canny
method [9]. After that, the filament process is performed by
non-maximum suppression, and the connected one is
extracted as a profile line. Finally, these extracted profile
lines are simplified by Douglas-Peucker method [10], and
rectangular areas as an isolated contour line that have four
corners in the input image are obtained. These processes are
implemented using popular OpenCV library. In the
following two sections, we briefly introduce Canny edge
detection method and Douglas-Peucker line simplification
method with each example.

DATA BROADCASTING CONTENTS

The data broadcasting is a technology that displays a
variety of information on a TV display screen like the
homepage on a Web-browser. Data broadcasting contents are
described using a XML-based page description language
called BML (Broadcast Markup Language). Its specifications
are defined by ARIB STD-B24 [7]. The image of Figure 1 is
an example of BML content.

B.

Canny method
Canny edge detection method plays an important role in
our rectangular extraction. Figure 2 shows a result of the
method applied to the image of Figure 1. The Canny operator
works in a multi-stage process as follows:
1) Candidate edges are extracted from the input image
using the sobel filter.

Figure 1. BML content example.

2) The line thinning by the non-maximum value control
is performed to treat a variety of the brightness and the
inclination.

BML is very similar to HTML, but there are various
enhancements and limitations in BML because BML is
specialized for the use of "Broadcast". As for BML, it
consists of several elements such as texts, images like PNG,
JPEG and GIF, main stream media like MPEG (MPEG1 and
MPEG2) and MPEG Audio, XHTML of an original
specification, and ECMAScript like JavaScript. So the user
can make not only static contents but also dynamic contents
using ECMAScript programming.

IV.

3) The tracking process exhibits hysteresis controlled
by two thresholds: T1 and T2, with T1 > T2. Tracking can
only begin at a point on a ridge higher than T1. Tracking
then continues in both directions out from that point until
the height of the ridge falls below T2. This hysteresis helps
to ensure that noisy edges are not broken up into multiple
edge fragments.

STYLE-SHEETS EXTRACTION FOR BML CONTENTS

In this section, we describe processes performed for stylesheets extraction from images of already existing digital
contents which is the main part of this paper.
To make BML content, it is necessary to specify positions
of all instances appear on the TV screen by Cascading Style
Sheets (CSS) [8]. To make BML contents from images of
existing digital contents automatically, it is necessary to
divide components included in images of existing contents
into text areas and picture areas appropriately. Here, CSS
uses the concept of BOX model, which presents a
rectangular area. We consider that if rectangular areas are
extracted and are classified into picture areas and text areas,
the corresponding CSS can be generated automatically from
images of existing digital contents. As a result, costs of
BML contents creation are reduced by using such
automatically generated CSS as templates of the user
required BML contents.

Figure 2. BML content example.

C.

Douglas-Peucker Method
The Douglas-Peucker line simplification method also
plays an important role in our rectangular area extraction.
Figure 3 shows a result of the method applied to the image of
Figure 2. That method consists of the following four steps as
shown in Figure 4.

139

1) Draw single line pq between the start point p and the
end point q of a poly-line.
2) Find the point a having the largest distance from the
line pq.

Figure 5.

Text area image used as input

3) If the distance is greater than a threshold value,
include that point a and split the original line pq into two
new lines pa and aq.
4) The above three steps are applied to two new lines pa
and aq recursively.

Figure 6.

Histogram of Figre5

Figure 3. Result of Douglas-Peucker method applied to the image of
figure 2

Figure 7.

Figure 4.

Picture area image used as input

Douglas-Peucker method

Figure 8.

D.

Rectangular area evaluation
To create style-sheets (CSS) for BML contents, the
component of each extracted rectangular area needs to be
assumed that it is a picture area or a text area. This
assumption is carried out by taking the histogram of pixel
intensity. Figure 5 and 6 show the input text area image and
its histogram respectively. Figure 7 and 8 show the input
picture area image and its histogram respectively. It is
possible to classify each component into a picture area or a
text area by a threshold value applied to its histogram.

V.

Histogram of figure7

WEB-BASED BML CONTENTS MANAGEMENT SYSTEM

In this section, we introduce our proposed web-based
BML contents management system. There is annoying of
the update task or the installation task if software is provided
as a package. These tasks are difficult for novice users about
PC. Then, our system offers functionalities of BML contents
140

edit and management as web services. We have been
developing such a system using PHP and JavaScript
programming.
The system provides an intuitive interface for editing of
BML contents on the Web. There are functionalities to add
required text information and image files into BML contents
and to layout them interactively using a web browser.
Moreover, there are functionalities to download/upload BML
contents files from/to a server. As shown in Figure 9, it
becomes possible to do all tasks using a web browser on PC
from the creation of BML contents to their installation on
TV broadcasting server.

BML design file will be read by the mouse-click on its
thumbnail image listed in the file list and by choosing the
read menu item. From the information stored in that file, the
system generates the corresponding BML content on a
display screen, and then, the user will be allowed to re-edit it.
BML design file will be deleted by the mouse-click on its
thumbnail image and by choosing the delete menu item.
Whenever BML design file is read or deleted, the
corresponding BML file is also read or deleted.

Figure 9. Functionality overview of BML contents management system

Figure 10. Edit functionalities of the system

A. Edit functionalities for BML contents
The edit functionalities to make BML contents are kernel
of the system. The system overview is shown in Figure 10.
Actual screen image of the system is shown in Figure 11.
Here, we call a file, which includes design information of
BML content, a BML design file. The operations for the
management of BML design files, e.g., to read, to delete, etc.,
are also provided. Concrete editing functionalities are as
follows:
a) Edit of BML contents
User required text box object or picture object is added
through the menu selection by the user interactively on a
display screen. Besides the add operation, there are
operations to move, resize, delete and make a copy of an
object. Moreover, it is possible to change various attributes
of text box objects, e.g., foreground/background-color, fontsize, link to other BML file, etc. This interactive interface for
the edit of BML files are mainly implemented using
JavaScript.

Figure 11. Screen image of the system

B.

Management functionalities of BML files
Besides read and delete operations, there are other basic
operations to manage BML files as follows:
a) Basic file operations
There are operations to move BML file into other
directory, to make a copy of BML file, and to
download/upload BML file from/to a web-server.
b) Functionality to display the BML file list:
There are two ways to display a file on the list, i.e., the
one is as detailed information of files stored on a web-server

b) Save, read and delete BML files
After editing BML content, its BML design file will be
saved. After the name of the BML design file is entered by
the user, the system collects attribute information of each
object included in the current BML content appears on the
display screen and stores them into the corresponding file.
The saved BML design files are displayed in the file list as a
thumbnail image as shown in the lower part of Figure 11.
141

and the other is as their thumbnail images. The detailed
information of a file or a directory includes its folder name,
file size, created/updated dates, the number of files included
in it, and file access property, etc.
c) Functionality to search files:
It is possible to search the user required BML files
existing in a server with any query key as one of various
attributes of a file, e.g., a file name, created/updated dates, a
folder name etc.

Figure 12. BML content image used as the input

C. Usage of the system
The typical usage of our system is the followings:
a) First of all, to make some templates of BML files as
their style-sheets, the user input a reference image to the
system. Such an image can be created by screen capturing
of already existing digital content or by scanning of a
printed document. And then, the system generates a stylesheet as a CSS file by the procedures explained in Sec. 4.
b) Edit BML content created from the above generated
template using the system on your web-browser by adding
new text box objects and picture objects, modifying their
attributes and adding links to other BML contents.
c) Save the edited BML content as BML design file
and BML file to the server on which the system runs. The
generated BML file will also be transferred to the BML
server of our digital TV broadcasting system.

VI.

Figure 13. Result images of the rectangular area extraction

EXPERIMENTS

In this Section, we show some results of the style-sheet
extraction.
A. Style-sheet extraction from image of data broadcasting
content
Figure 12 shows the screen snapshot of a sample of data
broadcasting contents displayed using BML browser
software. Figure 13 is result images of the rectangular area
extraction. As easily understood from Figure 12, our method
can extract rectangular areas precisely.
Figure 14 and 15 indicate results of the rectangular area
evaluation. Figure 14 shows result images recognized as
picture areas and Figure 15 shows result images recognized
as text areas. These figures clarify that our rectangular area
evaluation is useful.

Figure 14. Result images recognized as picture areas

142

extraction method. However, most rectangular areas can be
extracted correctly.

Figure 15. Result images recognized as text areas

B.

Style-sheet extraction from handbill image
VII.

CONCLUDING REMARKS

In this paper, we introduced our web-based BML contents
management system and also proposed style-sheet extraction
method from images of digital contents. Our system provides
end-users with BML contents creation environment in which
the user generate BML contents interactively on a computer
screen using a web-browser without any installation task or
update task for a software package. Furthermore, by the
proposed style-sheet extraction method, it becomes easier to
create BML contents using extracted style sheets (CSS files)
as templates of the BML contents. From the experimental
results, it is clarified that the proposed style-sheet extraction
method is useful.
As future works, to improve the system, we have to
evaluate its usefulness by consulting actual users who use it.
REFERENCES
[1]
Figure 16. Handbill image used as the input
[2]
[3]

[4]

[5]

[6]
[7]
[8]
[9]
[10]
Figure 17. Result images of the rectangular area extraction

Figure 16 shows the image of a handbill obtained from
the Web and Figure 17 shows result images obtained by
applying our method to the handbill image. All elements are
evaluated as image areas without the exception although
there are elements consisting of only characters. Elements
including overlapping area of multiple rectangles cannot be
recognized as a rectangular area by our rectangular

143

Monmarche, N., Nocent, G., Slimane, M., Venturini, G., Santini, P.,
Imagine: a tool for generating HTML style sheets with an
interactive genetic algorithm based on genes frequencies, SMC'99,
vol.3, pp.640-645, 1999.
Nobuo Ezaki, Text Detection from Natural Scene Images: Towards
a System for Visually Impaired Persons, International conference on
pattern recognition 2004.
Kimiyasu Kiyota, Manabu Shimakawa, Yukiko Honda, Nobuo
Ezaki, Yuki Susaki, Text reading system based on extraction of a
character in camera image for visually impaired person,
Correspondencds on Human Interface Vol.8. No.1, pp. 7-11, 2006
Jae-Chang Shim, Dorai, C., Bolle, R., Automatic text extraction
from video for content-based annotation and retrieval, Pattern
Recognition, 1998. Proceedings. Fourteenth International
Conference on Volume 1, Issue , 16-20 Aug 1998 Page(s):618 - 620
vol.1, Digital Object Identifier 10.1109/ICPR.1998.711219
Q. Huang, Z. Liu, A. Rosenberg, D. Gibbon, and B. Shahraray,
“Automated generation of news content hierarchy by integrating
audio, video, and text information,” in Proc. IEEE Int. Conf.
Acoust., Speech, Signal Process., vol. 6, 1999, pp. 3025-3028.
Thomas M. Breuel, The OCRopus Open Source OCR System,
Proceedings IS&T/SPIE 20th Annual Symposium 2008.
ARIB STD-B24 Data broadcasting encoding method and
transmission
scheme
in
digital
broadcasting
http://www.arib.or.jp/english/html/overview/sb_ej.html
W3C - CSS http://www.w3.org/Style/CSS/
Canny, J.F., A computational approach to edge detection, IEEE
Transactions on Pattern Analysis and Machine Intelligence, 8 (6):
679-698, Nov., 1986.
Douglas, D.H., Peuker, T.K., Algorithms for the reduction of the
number of points required to represent a line or its caricature, The
Canadian Cartographer, 10(2):112122, 1973.

