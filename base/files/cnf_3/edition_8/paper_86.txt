Automatic Selection of Attributes by Importance in Relevance Feedback Visualisation
Chee Un Ng, Graham R. Martin
University of Warwick, Coventry CV4 7AL, UK
{C.U.Ng@warwick.ac.uk, G.R.Martin@warwick.ac.uk}
Abstract
Relevance feedback visualisation (RFV) is a technique
developed to visualise the feature values of returned results
in a content-based image retrieval system that incorporates
relevance feedback. RFV is used also to re-sort retrieved
results according to user requirements, enable the
interactive investigation of pertinent features and permit
the discovery of otherwise unidentifiable trends in the
dataset. When large numbers of features are involved,
manually determining which feature attribute graphs are
the most important can be a burdensome task. In this
paper, a method for automatically sorting attribute graphs
according to their significance in the search operation is
introduced. The result is that features worthy of further
investigation are immediately identified, the user interface
is improved, and the CBIR system is made more effective.
Keywords--- Relevance feedback, interactive
visualisation, human computer interaction, CBIR.

1. Introduction
An advantage of content-based image retrieval (CBIR)
over conventional textual methods is that the visual
semantics of an image can be incorporated in the search
criteria. Many existing CBIR systems employ relevance
feedback (RF) to improve the search capabilities [1-4].
With RF the user trains the system by the indirect
transferral of expert knowledge. However, as most RF
systems cannot inform the user of the search criteria
assumed, the naive user can soon be in a position of not
knowing why a particular set of result images have been
retrieved.
In our previous work [5], we proposed adding a
visualisation facility to complement the RF system. The
proposed Relevance Feedback Visualisation (RFV)
provides a tool to assist the user to interact with the system
and therefore help the system to better satisfy the user's
requirement. In RFV, by interactive exploration of the
attributes from the search results, one can obtain an insight

of the search criteria, as the weights being placed on
individual features can easily be recognised. A more
thorough understanding of the retrieval process can also be
obtained by exploring the relationship between the positive
and negative training sets, the query image, the search
results and the various features utilised by the search
algorithm. In addition, information which is not part of the
search algorithm can also be incorporated in RFV for
viewing and analysis (For example, a vehicle image
retrieval system may utilise only low-level features for the
search operation, but in the related RFV, information such
as brand or engine capacity could be displayed). The
visualisation assists the user by providing meaningful
information, rather than raw data, and hence enables the
user to make more informed decisions.
Systems often have a limited display area and the
amount of visual information that a user can assimilate is
also bounded. CBIR systems must be capable of handling
many images, and often a large number of features
(attributes). With the combined use of RF and RFV, the
limitations are partly overcome. RF sorts the data so that
“relevant” samples are selected for display, and better
visualisation of the results is achieved as insignificant
information is filtered out. Similarly, features that are
worth investigating are given a higher priority when
displayed. When the number of features to be displayed is
more than a user can visually comprehend, it is desirable to
have an automatic process that can determine the
significance of the features in the retrieval process. We
propose a novel method by which important features can
be automatically selected and displayed with a higher
priority, i.e. positioned before other less important features.
The technique is evaluated using an evidence-based
medicine image database application, as may be used to
assist clinical diagnosis or for training purposes. Minor
variations in image feature characteristics can be of major
clinical significance, and conventional CBIR techniques
alone often fail to provide meaningful results. It is
therefore important that relevance feedback (RF) is
included so that the search requirements can be accurately
described and modified accordingly. The semantics of

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

specific image artefacts can actually be of more importance
than the low-level image features, and patient or hospital
related metadata may be of equal significance. In these
cases the user is required to assimilate a large amount of
information and the Relevance Feedback Visualisation
(RFV) system provides considerable benefits to human
computer interaction. Similarly, important attributes often
go unnoticed unless some automatic selection technique is
employed.
RFV is briefly described in section 2, the method of
automatically selecting important features is given in
section 3, and section 4 contains evaluative examples.

2. Relevance Feedback Visualisation
The Relevance Feedback Visualisation (RFV)
mechanism, adapted from the concept of Attribute
Explorer [6], is an active exploration and visualisation tool
applied following a RF search operation. It facilitates the
creation of a mental framework of the entire result set with
respect to the search criteria and the positive and negative
training sets, thus enhancing the performance of RF in
CBIR and the system usability.
While RF enables the selection of positive and negative
samples, RFV has the ability to locate these image samples in
the visualisation of the feature values. RFV also highlights
the relationship between various features, the training sets
(positive/negative examples) and the query image itself,
which frequently offers important clues to the search
process. This enables the user to identify the important
features, and an insight of the data is gained in a subconscious
manner. Thus, a better idea of the RF process is obtained,
although the exact search formula is not given explicitly. A
better problem formulation can be produced, especially when
the results of RF are unsatisfactory. In cases where the
expectation is vague or unknown, a good search might depend
on having a global view of the different features described
and their relative significance across the set of images in the
database. In such cases, RFV is appropriate. RFV can also be
used as a sorting algorithm, permitting the user to re-sort the
results according to the measured significance of the
features.

2.1. Associated Colour Range
In RFV, three special image sets - positive images,
negative images, and images with failed criteria, are
defined. Each of them has its own Associated Colour
Range (ACR). Attribute values are displayed in the colour
associated with the respective set: attributes of positives
images are displayed in green, negative images in red, and
images that failed any criteria in grey. A range of tones,
from light to dark, is also used to provide additional
information. For positive and negative images, the tone of
the colour represents the chronological order of their
selection. A lighter tone indicates the image was recently

selected, whereas a darker tone means it was selected at an
early stage in the search process. For images with failed
criteria, the shade of grey darkens as the number of failed
criteria increases. Colour can also be used to indicate a
special feature worth investigating, for example, yellow
could indicate that the images have a high similarity score
with regards to a specific descriptor (feature).

2.2. Overall Score Visualisation
After each search operation, the ranking and match
score for each image is displayed on the Overall Score
Visualisation (OSV) bar chart. An example is shown in the
top-right of fig. 1. Colour is used, as described earlier.
Results are displayed in descending order, the best match
being shown on the left. The returned images, five of
which are shown in the lower half of the display, are
presented in the same order. In the example, the entries in
the right-hand half of the OSV bar chart have a
comparatively low score, which means that they are of
little relevance to the user query. In the left-hand half of
the bar chart the scores descend in a fairly linear manner,
indicating a ‘standard’ search outcome. Interesting results
often result in a characteristic graph, such as one with a
steep curve
OSV acts as the first step in the visualisation and
enables the user to understand the performance of the
search operation. Following a conventional RF search
operation the positive samples are usually clustered on the
left of the OSV chart, whereas negative samples are
randomly distributed. It is possible to confuse the RF
algorithm by simply identifying the query image as a
negative sample, and this causes the green (positive) bars
to be separated.

2.3. Individual Features Visualisation
If the user requires more detailed information about
the search results, a secondary frame known as Individual
Features Visualisation (IFV), containing the visualisation
of all attribute values, can be presented. IFV consists of
several panels that represent different features. All IFV
panels are inter-linked, so that highlighting a particular
image's representation in one panel will reveal its position
in all other panels. IFV panels have two display modes:
sequence mode and bin mode, as shown in fig. 2.
The sequence mode shows feature values as a bar
chart, and entries are presented in the same order as the
images retrieved. For example, if the search returned five
images, 1,4,5,2,3 (1 being the closest match; 3 being the
poorest match), the sequence mode bar graph will also be
sorted in the same manner. Bars represent the feature
values for images 1,4,5,2,3 from left to right. The effect of
this is that if the graph has an appearance of order then the
feature represented is likely to have been an important
component of the search criteria.

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

Fig 1: The main interface, showing the five most relevant retrieved images in the lower panel. The
Overall Score chart is shown top right. Samples headed with a horizontal line have been selected by
RF as being positive, those with a vertical line as negative. The upper left panel shows the important
(or user defined) features for the current query image. The upper middle panel initially shows the
query image, but can also be used to display any other returned image for viewing in larger size.
In bin mode, each image is represented as a single
block in a column. The horizontal axis represents the bin
values, and the vertical axis the number of samples in each
bin. The position of each block in the column is not
important. Clearly, bins that contain many positive
examples could warrant further investigation.
If the user decides that some selection criteria should
relate to individual features, this can be performed by
simply selecting or deselecting some or all of the value
range in the bin mode. This ``Interactive Bin Mode
Selection`` (IBMS) causes the blocks and lines (that
represent the samples in all IFV panels) which failed the
criteria to be greyed out. The grey level becomes darker as
the blocks or lines fail more criteria (note that an ACR is
applied in both Sequence Mode and Bin Mode). For
example, if a clinician determines that he/she is interested
in patients only above 50 years of age and whose images
exhibit coarse texture, the user can deselect the range 0-50
from the age panel. When a particular range is deselected,
all the bars that represent the deselected images for all
features will be greyed out. For the texture panel, the grey

out reaction occurs similarly. Those that are greyed out
(deselected) twice will have a darker shade of grey to
differentiate them from those that failed only a single
criterion. As the grey out happens in all panel regardless of
the panel being manipulated, one can envisage the overall
situation when certain criteria change, and create a ``what
if'' scenario.
The detailed operation, implementation and
application examples of RFV and IFV can be found in our
previous work [5].

3. Automatic Selection of Features by
Importance
As all visualisation systems have limited display
capability, and the amount of information that a user can
assimilate is also bounded, to visualise more than one
screen of attribute panels and determine their importance to
the search is both time consuming and prone to error. The
proposed method is to automatically rate the importance of
different attributes, rather than relying on the user having

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

Fig 2: IFV charts for patient age, in sequence and bin mode. The darkened lines/ blocks headed by a
horizontal line are positive samples, those without belong to the negative class. Interestingly, the bin
mode shows that all positive samples range from age 20 to 39.
to manually navigate amongst the various feature panels
and attempt to identify useful features. The concept is
based on the natural visual perception of a graph. For
example, in the right-hand graph of fig. 2, the bin mode
IFV of ‘patient age’, the user will normally consider that
having many positive samples concentrated in a particular
bin is more significant than if the positive samples had
been distributed across all bins.
As IFV contains two types of representation, bin mode
and sequence mode, it is necessary to develop two different
approaches to the solution.

3.1 Automatic Scoring for Bin Mode
Every bin (column) is assigned a value according to
the number of positive and negative samples within it. An
uncertainty (entropy) measure is then employed to assess
the distribution uniformity of bin values for the entire
attribute.
Bin value v is obtained as:

v=

p2
n + 0.5

(1)

where p denotes the number of positive samples in the bin,
and n the number of negative samples in the bin.
A value of 0.5 is added to the denominator to avoid
dividing by zero when n is zero. Using the square of p
emphasises the importance of the positive samples, the
reasoning being that with two positive samples in a single
bin, we are probably more than twice as confident that the
bin is worth further investigation. A large v indicates there
is a high ratio of positive to negative samples in a bin.

v is calculated for each of the n bins in the attribute
panel, to gain a set of values {vi , i= 1,…,n}. Normalising
vi, we obtain the set {Vi , i =1,…, n}.
The Uncertainty measure for the attribute, U, is then
calculated as:
n

U = −∑ Vi log Vi

(2)

i =1

A large value of U implies little change of Vi across
the range of bins. For example, with sets of bin values from
two different features, V1= {10, 12, 10, 11, 10} and V2 =
{10, 40, 10, 11, 10}, it can be easily calculated that V2 has
a much lower U than V1. The value 40 in V2 has disrupted
the “uniformity” over the range.
The following bin mode graphs are considered not
interesting: 1. Positive samples are approximately evenly
distributed, regardless of the distribution of the negative
samples. 2. A relatively small number of both positive and
negative samples are roughly evenly distributed.
When a moderately large number of positive and
negative samples are evenly distributed in a particular bin,
U will be lower, as it will still be interesting to see why so
many have concentrated together. For example, assume a
feature with 3 bins. In case 1, the number of positive
samples in each individual bins is 1, 1 and 1, and the
numbers of negative samples is also 1, 1 and 1. In case 2,
the number of positive samples is 1, 2 and 1 respectively,
and the distribution of negative samples is also 1, 2 and 1.
Although the ratio of samples in individual bins in cases 1
and 2 are the same, U is 1.0041 in case 2 but 1.0986 in case

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

Fig 3: IFV charts for diagnosis, in sequence and bin mode. Positive samples are indicated by a
horizontal line or by a “+” in the block. The darkened lines/ blocks represent negative samples.
1. This indicates that case 2 is slightly more interesting
than case 1.
The most interesting graphs are those where the
positive samples are concentrated near to or in a particular
bin, and there are no or very few negative samples in the
same bin(s). The U value for these cases will be
comparatively low. The corresponding graph for v will
contain one or more significant peaks rather than being
uniform in nature.

3.2. Automatic Scoring for Sequence Mode
In sequence mode, most of the features of interest will
result in orderly graphs. Features that result in random distributions, for example in the left-hand graph of fig. 3, are
not worth investigation in most cases. Positions of positive
or negative samples in sequence mode are unimportant, as
the negative samples can be distributed in any manner
while the positive samples are always concentrated on the
left-hand side, at least when the search process is operating
satisfactorily. In the occasional event of some positive
samples being randomly distributed, then the relative
distribution of the positive samples is indicative of the
confidence level attributed to the search algorithm.
The automatic scoring problem can be redefined as
needing to find those graphs that display some form of
inherent relationship between the x and y variables. The
problem can be easily solved by the use of regression
analysis.
Depending on the nature of the features, various regression functions can be employed. For most cases, a simple

polynomial function is sufficient. A four-degree polynomial function is given as

y = ao + a1t + a 2 t 2 + a 3t 3 + a 4 t 4

(3)
where a0, a1, a2, a3, a4 are the unknown regression coefficients, t is the index of the sample and y is the value of the
sample. The coefficients can be estimated by performing a
least squares fit operation. Graphs worth further investigation will be those with the smaller sum squared error
(SSE). Hence, it is concluded that the smaller the value of SSE,
the more important the feature should be.
Polynomials of other degrees and more computationally
intensive non-linear functions have also being tested. We
found that in our application, polynomials of degree four or
five, performed better than the other functions. Specialised
functions that can fit to unusual conditions are not desirable,
whereas a two-degree polynomial is often insufficient.
Finally, a value used for sorting, denoted by M, has to
be calculated. Note that for features with only bin mode or
sequence mode representation, we directly assign U or SSE
to M. For features that are represented by both bin mode
and sequence mode graphs, the final value M is calculated
as:

M =

1.5W + E
2.5

(4)

where W and E are U and SSE, respectively, normalised to
the range [0,1] across all features. The weighting of 1.5 was
determined empirically. A user is more likely to assign greater
significance to the bin mode than the sequence mode when
looking for important features. This is because the bin
mode exhibits a stronger trend than the sequence mode when
the feature is important.

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

Fig 4: Bin values v for age and diagnosis ID.

Fig 5: Normalised attribute values plotted against order of returned result. Each circle represents an
image sample. The line shown is the estimated regression line.
Table 1: Importance score of individual features

4. Application Examples
The technique was evaluated using a database containing 858 medical images, mainly dermoscopic, respiratory
and micrograph images.
To assist understanding, three of the (IFV)
visualisation panels, patient age, skin complexion and
diagnosis ID will be discussed here. These three features are
selected from the application set listed in the top-left section of
fig. 1. Table 1 summarises the relevance scores for each
attribute, after obtaining the search operation results presented
in fig. 1.

Age
Freckle density
Gender
Sun sensitivity
UV exposure
No. of moles
Complexion
Diagnosis ID

U
SSE
W
E
M
0.268
1.166 0.161 0.000 0.097
0.043
4.484 0.026 0.332 0.148
-0.000 5.786 -0.000 0.462 0.185
0.360
6.745 0.217 0.558 0.353
0.559
6.881 0.337 0.571 0.431
1.111
4.927 0.670 0.376 0.553
0.552 11.171 0.333 1.000 0.600
1.658
5.614 1.000 0.445 0.778

From table 1, it is noted that for this search operation the
system determined that age is the most interesting feature, and
diagnosis ID is the most irrelevant. Note that U in gender is
actually -1.0000e-008, and there are 9 positive and 6 negative

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

Fig 6: IFV charts for complexion, in sequence and bin mode. Positive samples are indicated with either a
horizontal line above them (left diagram), or a vertical line next to them (right diagram); other darkened
lines represent negative samples.

Fig 7: The L-H graph shows bin values v for complexion. The R-H graph shows the normalised value of
v. Each circle represents an image sample, and the line is the estimated regression line.
samples in the bin 2 (male) and 11 negative samples in bin 1
(female).
In the display of IFV panels, those with the highest M
score will be presented first (highest priority), i.e. the first panel
will represent “age”, followed by “freckle density”, then
“gender”, and so on.
The IFV display for age is shown in fig. 2. The graph on
the left is in sequence mode, while the other is in bin mode.
In the bin mode graph, it is noticed that most of the
positive samples are concentrated in bins 20 (age 20-29)
and 30 (age 30-39). Not a single negative sample is
included. Logically, it can be concluded that this graph,
which represents age, must be of significant importance, as
this probably means the user is interested in patients who
are of a younger age.

By applying the method described in section 3, the system
automatically detects this feature (age) as an important
feature. The left-hand graph of fig. 4 shows the bin value
for each individual bin of the age graph. It can be seen that
there is a high value for the second and third bins, which
correspond to ages 20-29 and 30-39 respectively. The Uncertainty value U is 0.26757.
In the sequence mode graph, it is not clear that a trend
is detectable. By utilising automatic detection for sequence
mode, the left-hand diagram of fig. 5 shows that the
samples roughly follow a particular trend, ascending from
left (closest match) to right (poorest match).
The IFV displays for diagnosis ID are shown in fig. 3.
From both the sequence mode graph and the bin mode
graph there is no clue that the diagnosis ID attribute is of
any importance. When automatic detection methods are

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

used (see the right-hand diagrams of fig. 4 and 5), it can be
seen that SSE and U are both significantly larger than those
for age.
Fig. 6 shows the IFV panels for complexion. As complexion only holds three values, pale, average and dark,
accurately estimating the importance of this feature is more
difficult. Usually in such cases, the middle value will have
the highest rate of misclassification. For this feature, a
slightly dark complexion and a slightly pale complexion can
both be considered average. In general, the fewer the choices
(i.e. the fewer bins), the more difficult it is to correctly
determine its importance. Fig. 7 shows the results of
automatic detection of complexion. For bin mode, the value
of U indicates complexion is more important than diagnosis,
yet less than age. The left-hand figure for SSE shows another
weakness when the choice of values is minimal. It can be seen
that the estimated regression line cannot fit the data
properly, which results in a high SSE value. This
corresponds to the problem of human perception, as the
importance of this feature is indeed more difficult to
determine.
Considering the original bin mode and sequence mode
graphs of age and diagnosis ID, the user will find that age
is of more importance than diagnosis ID. It is shown that the
automatic detection process can effectively differentiate
between the meaningful and unimportant charts. With some
attribute graphs, the user cannot determine which one is
more important. The automatic selection method is also
likely to return similar scores, indicating a lack of
confidence and effectively emulating the thought process of
a human operator.
In rare cases, the user might perceive a different order
of importance for the attribute representations. The user
might be looking for something else which the automatic
selection system has failed to notice. Consequently the
automatic selection tool should be considered as complementing and assisting a human operator rather than as a
substitute.

5. Conclusion
The use of relevance feedback in CBIR systems
enables the search operation to more accurately match the
user's requirement. An attribute visualisation system is
effective in informing the user of the distribution of the
image feature values. When a large number of features are
included as search criteria, visualisation of the results and
attempting to manually order information by importance
can be a daunting task. While attribute visualisation is used
as a tool for refining search accuracy, a further benefit is to
study the relative importance of different features in the
retrieval process. In this paper, a method for the automatic
selection of pertinent features is presented. The system also
automatically sorts the charts (features) by importance, which
significantly improves the usability of the system.

The automatic selection technique is evaluated using a
medical imaging application and the results confirm its
effectiveness. The example described relates to evidencebased medicine, where a clinician may wish to determine
whether similar conditions have occurred in past patients
and, if so, to determine pertinent trends in the data. The
system output is not intended as a substitute for
professional judgement but to assist the clinician in making
a diagnosis, and to highlight considerations that may
otherwise go unnoticed.
Ongoing research is considering extensions to RFV,
particularly with respect to the representation of multivalued descriptors such as colour histogram. With these
features, two-dimensional (e.g. bar chart) representations
are insufficient, and the automatic assessment of
importance is, as yet, problematic.

Acknowledgement
The authors wish to thank Alfred W. Kopf, M.D.,
Head of the Oncology Section, Skin and Cancer Unit, New
York University, for providing the dermoscopic images.

References
[1]

Gaurav Aggarwal, T.V. Ashwin, and Sugata Ghosal. An
image retrieval system with automatic query modification.
IEEE Transactions on Multimedia, 4(2):201– 214, June
2002.

[2]

Y. Chen, X. S. ZHou, and T. S. Huang. One-class svm for
learning in image retrieval. Proceedings of Inter-national
Conference on Image Processing, volume 1, pages 34–37,
Thessaloniki, Greece, October 2001.

[3]

I.J. Cox, T.P. Minka, T.V. Papathomas, and P.N. Yianilos. The
bayesian image retrieval system, pichunter: Theory,
implementation, and psychophysical experiments. IEEE
Transactions on Image Processing, 9(1):20–37, January
2000.

[4]

J. Laaksonen, M. Koskela, and E. Oja. Picsom: Selforganizing maps for content-based image retrieval.
Proceedings of International Joint Conference on Neural
Network IJCNN '99, volume 4, pages 2470–2473,
Washington, DC., July 1999.

[5]

Chee Un Ng and Graham R. Martin. Attribute visualization
and relevance feedback in the content-based image retrieval
of medical images. Storage and Retrieval Methods and
Applications for Multimedia 2004, Proceedings of SPIEIS&T Electronic Imaging, volume 5307, pages 481–491,
San Jose, CA, USA, January 2004.

[6]

L. Tweedie, R. Spence, D. Williams, and R. Bhogal. The
attribute explorer. Video Proceedings of CHI'94 and
Conference Companion Proceedings, pages 435– 436,
Boston, USA, 1994.

Proceedings of the Eighth International Conference on Information Visualisation (IV’04)
1093-9547/04 $ 20.00 IEEE

