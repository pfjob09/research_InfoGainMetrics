Quantitative Image Analysis of Optical Sensor Surfaces for Movement Monitoring
V Sauret, PJ Sharrock, CJ Moore
Department of North Western Medical Physics, Christie Hospital,
Manchester, UK
Email: chris.moore@physics.cr.man.ac.uk
target volumes accordingly to the treatment plan. The
lack of accuracy and difficulty of the re-positioning of the
patient have been highlighted in the literature and it has
been shown that the use of 3D optical sensing of the body
surface may well overcome this problem [I]. Another
application of the optical sensor system is in monitoring
body surface movement during treatment. This is
particularly relevant to a) gated radiotherapy, where
irradiation occurs only when the patient is in the best
anatomical orientation during, for example, the
respiratory cycle, and b) to verify, post-treatment, that the
radiation dose and target sites were reached according to
the treatment plan.
A prototype optical sensor system has been installed at
the Christie Hospital for the applications above. It has
recently been adjusted and tested. The aim of this paper is
to:
Study the variations in the resulting optical sensor
height-map, in particular noise level, depending on
component present on the surface imaged, such as
hairs, on the size of the field of view and image
processing;
Show the level of accuracy and details to which body
surface position and movement can be tracked in the
treatment room using the optical sensor, once at setUP.

Abstract
The use in clinical situations of a near real-time
prototype opto-electronic dynamic 3 0 sugace sensor has
been investigated. Variations within optical sensor system
height-maps show that noise amounts to 100 microns on
snapshots of smooth body surfaces. It is not increased by
image processing software removing triangulation spot
artefact. Presence of hairs on a body surface degrades
the image qualiry, but still within tolerance (800 microns,
typically the size of in-slice CTpixel). The accuracy of the
system is 150 microns, the repeatability 300 microns;
‘off-surface’ points should however be masked.
Feasibiliw of dynamic 3 0 imaging of a body sugace is
demonstrated. Visualisation and analysis of the entire
chest surface movement during breathing is achieved
using the optical sensor system. Such monitoring and
quantification of patient movement is directly relevant to
gated radiotherapy and post-treatment verifications.
Analysis of surface movement (height variations over
time) in terms of mean and standard deviation should
also be included in patient set-up procedures before
radiotherapy treatment.

1. Introduction

2. Methods

In radiotherapy the treatment planning of a tumour is
usually based on anatomical information from a single
CT study that freezes all body external and internal
movements. The tumour is to receive more than 95% of
the prescribed radiation dose while adjacent organs must
be spared. Such customisation of the radiation dosevolume to the exact shape of the tumour site does mean
that any patient movement becomes of critical
importance. Therefore two major problems must be
resolved within Conformal Radiotherapy: a precise and
repeatable positioning of the patient set-up must be
achieved as well as an accurate monitoring of patient
movement during treatment. Current practice is to
document the patient position on the CT bed using body
surface tattoos, etc.. . This position must then be repeated
later in the treatment room before irradiating the patient

2.1. Optical sensor system description
The core of the optical sensor system is an
interferometer based on a helium-neon laser that produces
a red beam that is split and then polarised before being
channelled into two adjacent optical fibres. The fibres are
used to project an interference pattern onto the patient
inside a treatment room. One of the two beam
components has its optical path length varied
electronically using a piezo-mounted mirror whereby the
interference fringe pattern can be altered under computer
control. The fringe projection is phase-modulated by the
body surface. A conventional CCD camera with zoom
lens and filter views the fringe pattern. The optical sensor

162

0-7695-1195-3\01$10.00 0 2001 IEEE

system can be set to record’a single frame or a series of
frames (sequence) captured at a rate of typically 25
frames per second. The whole optical sensor system is
radiation resistant.
By filtering the Fourier transform of the fringe image
data, the phase componmt can be extracted and
unwrapped to provide spatial information across the field
of view. This information emerges in the form of heightmap data where all points in the map are calibrated
against and referenced to the treatment machine isocentre,
via a ‘triangulation spot’. During this image processing, a
triangulation spot artefact appears [2], however software
has recently been developed further and allowed removal
of such artefact [3]. A narrow field of view allows
imaging of 20cmx20cm surfaces while a large field of
view covers 40cmx40cm. The display windows are either
5 12x5 12 pixels or 440x440 pixels.
Rigid, remote ceiling-mounting of the interferometer/
viewing camera and beam divergence ensure optical
stability and a clear wide-field coverage of the patient for
all patient and treatment machine orientations. It is
installed in a radiotherapy tieatment room at the Christie
Hospital; the surface height-maps are displayed on a
monitor located outside the treatment room.

Dynamic imaging of the fringed surface images of the
front torso of a test person breathing normally was also
performed and the surface movement during the breathing
cycle was quantified.

3. Results
Flattest areas on the back surface were seen on both
the cast and Volunteer 1 on the right and left sides of the
spine, about 5 cm away from it. On the chest of both
volunteers, the flattest areas were about 2 cm above the
sternum. They are shown in’ Figure 1. The maximum
height variation in a small patch located in the flattest
areas and the standard deviation from the mean height
within the patch are summarised in Table 1. 10x10-pixel
patches were used for images with the narrow field of
view; 5x5-pixel patches for images with the large field of
view. Height variations for the cast and the human back
are similar. Values for the chest of Volunteer 1 suggests
that the presence of body hairs increased these variations
(Tab. 1). Figure I C also shows that this chest surface
height-map contains ripples. Their height is in the order
of a millimetre. The contrast of clarity between Figures
Ib, I C and Id suggests that body hairs create these.
Measurements on the non-hairy back and chest surfaces
are similar (Tab. 1); noise level is in the order of a tenth
of a millimetre. The field of view used for Volunteer 2 is
larger than the whole width of the chest (Fig. Id and le).
Degradation of the quality of the image at the edge of the
chest and large scale ‘off-surface’ random noise are
visible. The software correction applied to the optical
sensor height-map of the chest of Volunteer 2 (Fig. le)
has effectively removed the triangulation spot artefact
that is present in Figures 2 to 4, without increasing
noticeably the level of noise (Tab. I). Figure 2 considers
both antero-posterior (AP) and lateral views of RANDO,
at the pelvic-abdominal level. These represent the two
extremes of human surface vanation. The top portions of
Figure 2 show the mean of three repeated 440x440-point
height-maps for AP and lateral views. The lower portions
show standard deviation of the mean. Standard deviations
to 0.25”.
for ‘on-surface’ points range from 0.05”
The mean standard deviation is approximately 0.13mm
and 0.04“
for the AP and lateral surfaces respectively.
Again, ‘off-surface’ random noise is *visible. Similar
analysis of 700 height-maps of RANDO from the frame
processing of a 20 second-sequence recording showed
that resolution and reproducibility over hundreds of
frames equals that for single shot imaging.
T o obtain information on surface movement, such as
mean and standard deviations, requires extraction of all
the frames contained in the AV1 sequence. Such process
takes 15 minutes for a one-minute long sequence. This is
using a current computer power of 90GB RAID-0 disk
array, P3-1GHz processor, 1GB RAM. Recording of the
patient’s body surface during a pelvic or lung

2.2. Optical sensor performance tests
The effect on the optical sensor height-map quality of
surface roughness was invesligated by studying the height
variation within small surface patches in a series of
measurements on the flattest areas of various surfaces.
Variations of height over such small patches are thus
representative of noise. The objects imaged were a white
plaster cast of human back, the back of Volunteer I , the
chest of Volunteer 1 and the chest of Volunteer 2.
Volunteers 1 and 2 were White Europeans. The chest of
Volunteer 1 was hairy, while: that of Volunteer 2 was not.
The plaster cast represented a perfect white surface. The
effect on the image quality of the size of the field of view
was also assessed by using both narrow and large fields
of view. Lastly, the effec!: of height-map ,processing
software correction ,was investigated for the chest of
Volunteer 2.
. .
Static imaging was ‘used,to determine. the -resolution
and reproducibility of the:, optical sensor, The test
consisted in repeatedly ‘imaging a truly static clinically
proportioned test object (RANDO) lying on the treatment
machine bed. The’mean and standard deviation of each
point of the RANDO surface height-map were then
calculated.
In the current project, dynamic 3D imaging is used for
monitoring the surface movement. Hence the sensor was
used to capture a sequene (AV1 format) of fringed
surface images of RANDO moved manually up and down
the treatment bed, in order to assess the stability and
correct implementation of iterated frame processing.

163

Figure 1.440~440pixels surface height-map of a) plaster cast of a human back, b) the back of Volunteer 1, c) the chest of Volunteer
d) the chest of Volunteer 2, e) the chest of Volunteer 2 after software correction. The black lines contour the flattest areas; the arrows
point at the triangulation spot artefact. The range of the ordinate is 250 mm.

1,

Object
Max height variation (mm)
SD from the mean height (mm)
Remarks

Fig. la
Cast back
0.46M.21
0.11M.05

Fig. l b
Back 1
0.34M.11
0.08M.02
No hair

Fig. I C
Chest 1
1.01M.41
0.26M. 1 1
Hairs

Fig. Id
Chest 2
0.3M.12
0.08M.04
No hair

Fig. le
Chest 2
0.3M.11
0.09M.03

Software correction

Figure 2. Static tests on RANDO.Upper: 440x440-pixel surface height-map. a) AP imaging, ordinate range: 100 mm, b) lateral
imaging, ordinate range: 120 mm. Lower: Standard deviation. c ) AP imaging, ordinate range: 25 mm. d) lateral imaging, ordinate
range: 12 mm. Note the high noise comes from ‘off-surface’ points.

164

better than what can be obtained using CT or MR
imaging systems to quantify the height variations over
large areas of body surface. To give an idea of the scale
of the sensor height-map deviations, it is worth
remembering that a single CT-image used for treatment
planning will have a single pixel that scales
approximately 0.8 mm.
The optical sensor system provides both dynamic
visualisation and quantitative information on the position
of thousands of points of the surface over time. Such
surface movement description is needed in radiotherapy.
In the work presented above, dynamic 3D imaging was
processed and analysed off-line. Improvement on the
speed of analysis for continuous movement monitoring is
function of the computer power. It is clear that reasonable
sampling of the images of the sequence would accelerate
the analysis presented above, e.g. extraction of only one
image every 5 frames (i.e. 5 frames per second). Near
real-time analysis would benefit gated radiotherapy.
Analysis of the body surface movement over a minute in
terms of mean and SD surfaces is suggested for patient
set-up. Re-positioning of the patient in the treatment room
as for during CT examination should be done on a surface
snapshot representative of today’s patient movement. The
mean and SD are likely to vary daily with the level of
stress and wellbeing of the patient which affect breathing
patterns and muscular tensions. This creates timedependant variations of the patient’s body surface. The
limits of acceptable movement (mean k n SD) will be the
object of an extensive investigation undertaken together
with experienced radiographers. A major shortcoming of
the previously proposed set-up procedures using the
optical sensor system as an alternative to set-up based on
as little as three co-planar surface tattoos or several
physical markers attached across the body surface, is that
they did not include the above statistical study [ I ] . The
amount of data storage can be a potential limitation to
movement recording of all patients but could be
significantly reduced by using 128x128 frames, that still
contain several thousands points. These data are
important for post-treatment verifications and introduce
knowledge on potential patient movement patterns into
treatment planning. Display of the height variations of
surfaces has applications in particular in chest topology
and breathing control studies. These are potentially
relevant to radiotherapy treatments of breast and lung
tumour which movement may be linked to the body
surface position. Display of both real-time moving
surfaces (via the optical sensor system) and the static CT
images used for treatment planning is interesting for
understanding the reality of the radiotherapy process. The
body surface movements could in particular be controlled
based upon deviations from a desired irradiation
geometry andor dose plan. In turn, related biological
effects should be studied. The measurements presented
above of body surface height variations during in vivo

radiotherapy treatment produces a sequence, about 15minute long, which occupies about 30 GB of disk space.
Visualisation of vertical disiplacements of RAND0 as a
series of height-map surfaces (MPEG format) showed
that the iterated frame processing is stable and error-free.
TKe narrow field of view used for the sequence showing
the in vivo movement of the front torso surface when
breathing covered the lower part of the chest. Analysis of
the frames shows that, as the chest surface height moves
in the breathing cycle, the inhalation maximum varies by
2-2.5cm whilst the exhalation minimum is consistently
reproduced.
In all figures, the very low angle of illumination used
for surface rendering may exiiggerate the surface marks
by shadowing.

4. Discussion
The optical sensor system investigated in this paper is
the first of its kind installed in a hospital radiotherapy
treatment room. Its use is intended for patient movement
monitoring in situations where modest motion occurs,
such as during breathing, and for patient set-up. It was
therefore important to quantify the errors on the resulting
height-maps and assess its limitations, when imaging
body surfaces.
Noise contained in body surface height-maps amounts
a tenth of a millimetre Ion a single sensor image
(snapshot) of smooth surfaces. The optical signal received
and transformed into height information by the optical
sensor system is impaired when hairs are present on the
body surface because they do not reflect structured light
as well as skin. It is therelbre difficult to remove the
ripples that they create on the surface height-maps.
Imaging of a hairy chest appears to contain near three
times the level of noise of non-hairy surfaces. This is
however still a small error: under 0.5 mm; a technical
solution is to shave the patient, which is an action
regularly done in medical practice. Imaging with a field
of view wider than the body :surface creates large errors at
the edge of the surface arid ‘off-surface’ points. The
phenomenon also occurs when imaging with a narrower
field of view but covering only edges of the body surface.
This is due to the lack of fringe information. This
limitation should be overcome using adequate filtering
and masking. The software correction developed in [3]
removed successfully triangiilation spot artefact without
increasing noise level. The standard deviation obtained in
the static tests agree well with the measurements made
independently in the optics laboratory at Liverpool John
Moore University, where the optical sensor was first
developed 121. Largest devialions are, as expected, linked
to high surface gradients. Working system accuracy is
estimated to 0.15 mm and repeatability to 0.30 mm, in
both the laboratory and the treatment room. The optical
sensor performances on image quality are thus generally

165

[l] C.J. Moore and P.A. Graham, “3D dynamic body surface
sensing and CT-body matching: a tool for patient set-up and
monitoring in radiotherapy”, Computer Aided Surgery 5, pp
234-245,2000
[2] F. Lilley, M.J. Lalor and D.R. Burton, “Robust fringe
analysis system for human body shape measurement”, Optical
Engineering 39(1), pp 187-195,2000
[3] C.J. Moore et al. “Dynamic background correction in 3Dt
body surface sensing & visualisation”, submitted to IEEE
IV2000 MedVis conference, London, July 2001.

breathing demonstrate that breathing can be compensated
for dynamically in radiotherapy by monitoring the entire
patient surface, with substantial applications for the
development of respiratory gated radiotherapy.

5. Conclusion
Static surface height-maps derived from the optical
sensor system investigated in this paper are more accurate
than surface information derived from CT imaging.
Dynamic imaging of body surface also provides
quantitative monitoring of surface movement. This should
be exploited for patient surface monitoring in breathing
studies and gated radiotherapy, and for patient set-up.

6. Acknowledgements
We thank Francis Lilley for allowing us to use his
dynamic sequence of RANDO.

6. References

166

