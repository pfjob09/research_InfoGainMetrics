Multi-Modal Verification of Patient Positioning in Radiotherapy.
P.A. Graham, B. Thompson, J. Stratford, R.I. MacKay, C.J. Moore and P.J. Sharrock
North Western Medical Physics, Christie Hospital, Manchester, UK
Abstract
Conformal radiotherapy uses multi-leaf collimation to
customise radiation dose fields to the three-dimensional
shape of the target tumour. Its effectiveness is governed
by the precision of dose delivery achieved using a few
coplanar tattoo markers. During a course of treatment,
the patient’s body surface profile fluctuates causing the
reference skin tattoo markers to move and hence, without
the ability to verify target position, the precision of pretreatment set-ups will degrade, often significantly.
Cross-modal patient set-up verification software has
been developed which allows the user to examine images
from various modalities. All imaging modalities available
can be used to collectively define anatomical landmarks,
outlined on a representative reference image in order to
verify radiation field placement using anterior and lateral
pre-treatment portal images. This software is presently
being used within a national clinical trial for recording
the field placement error observed daily at pre-treatment.

1. Introduction
Radiotherapy is an established clinical option for the
treatment of localised tumours[1]. As the dose prescribed
is fractionally delivered over many days, the effectiveness
of any treatment is governed by the daily precision of
patient set-up. Since the advent of conformal plans which
reduce beam margins, greater emphasis is placed on the
precision and coherence of target volume definitions[2].
Consequently, treatments are becoming more intricate and
require many verification checks in order to ensure that
the dose prescribed and that delivered to the tumour are
consistent[3].
Conventional pre-treatment set-ups attempt to re-create
a patient orientation on the treatment couch that is
identical to that planned from the computed tomography
(CT) scan. Immobilisation[4] and fiducial marking[5]
techniques have been used in conjunction with portal

imaging[6] in order to improve the precision of patient
set-up. Patient immobilisation using custom mouldings
fail to account for any daily shape changes in the patient’s
body surface. Surgically implanted fiducial markers are
invasive, costly and can migrate, causing problems when
portal imaging is used to confirm patient set-up. Tumour
target movement data compiled both from simulations[7]
and the clinical study of repeat CT scans[8] have been
incorporated into conformal treatment plans[9].
Within many treatment room environments, electronic
portal imaging is the only reliable source of verification
for target tumour position. Due to the inherent poor
contrast at treatment energies, the soft tissue definition
within these images is severely limited to the extent that
only bony landmarks or tissue/air boundaries can be used
reliably. Hence, verification of the tumour target position
can only be assumed by moving the patient on the
treatment couch until corresponding landmarks in the
portal image agree with those in a pre-treatment
image[10]. Every modal image has inherent limitations
associated with it that are unique to the imaging system
used and ultimately define the detail that is visible. It is
because of these limitations that any modal image
considered in isolation, can not be used as a panacea for
landmark comparisons.
Cross-modal patient set-up verification software has
been developed which offers a more flexible image
environment for performing anatomical landmark
comparisons. This design allows the user to examine
images from various modalities that include: Simulator
Films, Digitally Reconstructed Radiographs, Scan
Projection Radiographs, CT Slice and Mega-voltage
(treatment room) images. Inter-comparisons may be
performed on any available patient image set, by using the
mouse to move previously drawn landmark graphics on a
reference image, to their corresponding position in a
verification image. Comparisons of this nature, can only
be performed using this utility if the image scale and
treatment isocentre/patient tattoo reference marker

coordinates are known. Using this utility, decisions
regarding which landmark features are to be outlined, may
be formulated collectively by the inter-comparison of all
of the patient images that are available to the user. Pretreatment patient set-ups are performed by comparing
visible landmark features in the Mega-voltage portal
image with the corresponding features defined by the
landmark graphics on a representative reference image.
In addition to recording the field placement error, this
utility stores all information regarding the images used
and the landmark graphics drawn during patient set-up.
Essential image ‘pre-load’ data is permanently recorded
and includes the treatment isocentre/tattoo marker
coordinates, image pixel scales/magnification, and
windowing values. By accessing such information, this
utility can re-create precisely, the image platform on
which a patient pre-treatment set-up was performed so
that the field placement errors that were observed can
themselves be analysed.

2. Loading Patient Image
All images are held within a patient database which is
structured so that the directory-tree pathname catalogues
information specific to the identity of each image. This
format uniquely catalogues modal images under the dates
of capture and imaging source. The user can interactively
negotiate this database in order to access any patient
image and its associated treatment information. It should
be noted that images can only be compared if their view
perspective and patient code are identical. Comparisons
may only be performed on images in which the treatment
isocentre reference coordinates and pixel scale are known.
Using this utility, the user first selects an image and
treatment file from the patient database menu and then
identifies the isocentre/tattoo marker reference location.
When the reference marker has been identified, the image
is automatically re-positioned so that the treatment
isocentre lies at the centre of the display window. The
pixel scales are either computed by positioning a box
graphic over a visible scale grid of known dimensions or,
assigned directly from the treatment file data. Rotations
can also be performed in order to counter image twist that
has been introduced by any digitisation equipment. When
an image has been viewed, all of the data concerning the
compulsory pre-load procedure are stored in an associated
file. When available, this file can be accessed and the
image data automatically loaded from the display menu.

During the image load process, the modal comparison
software displays all previously stored landmark graphics
associated with the image in the same format. This type
of landmark recall facilitates the autonomous transfer of
all reference graphics to the opposite window image. The
functionality of cross-modal image comparison software is
concerned with the speedy verification of patient set-up
using images captured pre-treatment. Many of the design
features incorporated, specifically address the speed issue
of field placement verification which must not impede
patient throughput.
The visual appearance of patient images can be altered
in order to enhance those regions of anatomical detail that
can act as a source of landmarks. Windowing techniques
are commonly used whereby the user can interactively
alter the width/level values and hence the dynamic range
of information contained. Alternatively, magnification of
the patient image assists in revealing previously obscured
detail for those instances where the images are small and
contain large amounts of information. Introducing dark
borders allows the user to eliminate image glare and also
improve the results of windowing. By clipping the image
dimensions it is possible to eliminate unwanted detail and
reduce the screen space occupied when this software
utility is used with other packages.

2.1 Drawing Landmark Graphics
Within images, anatomical landmarks can be outlined
using the mouse either ‘free-hand’, in line segments, or
marked with a ‘cross’ icon. A number of menu options
are available within this utility which reverse any
outlining mistakes, close line segment structures and abort
the draw process. The process of landmark outlining is
initiated by a mouse button action that does not require
any menus and is terminated by a similar ‘double-click’
procedure. For the purpose of indicating the position of
landmark sites without recording their profile, the user can
place ‘cross-shaped’ icon markers. These ‘cross-shaped’
markers are used to indicate landmark position either for
verification speed or, to record the site location only,
when profile is unimportant. All landmark identifiers are
drawn in colour so that they are easily discernible from
the patient image background.
When the landmark profiles/markers have been drawn,
they can be individually re-classified into groups and/or
stored to file. The consequences of group classification
apply mainly to movement processes whereby performing

any ‘Click-n-drag’ translation or rotation operation on a
landmark profile/marker will also apply to all members of
the same group. Group status is assigned by first using
the mouse to individually select the appropriate landmark
graphics and then invoking the relevant menu option. By
default, all landmark profiles/markers may be universally
grouped without prior selection.
All of the landmark graphics drawn may be stored with
the request window background patient image. However,
patient set-ups automatically default all landmark storage
requests so that they are associated with the ‘reference’
image. All stored landmark graphics associated with a
patient image are immediately displayed when initially
loaded from the database, illustration 1. ‘Power icons’,
displayed with the patient information (at the top of the
image), allow the user to recall stored landmarks without
‘re-loading’ the patient image. When landmark graphics
are ‘recalled’, the group membership of identical graphics
already displayed are re-configured in order to agree with
those stored.

2.2 Treatment Isocentre Verification
The position of the treatment isocentre, defined when
loading the patient image, can be verified and altered
interactively if required. Verification of the treatment
isocentre position can be performed by superimposing the
multi-leaf collimator (MLC) prescription graphic over the
patient image. The treatment isocentre is symbolised by a
unique graphic which is a representation of that projected
by the optical set-up component of the treatment machine.
When the MLC prescription graphic is superimposed on
the patient image, the user can perform a ‘Click-n-Grab’
mouse operation on the treatment isocentre icon and
interactively re-position it. As the isocentre icon graphic
is moved, the MLC prescription moves also, in order to
maintain their relative positions. Finally, the isocentre
coordinates held within the data file associated with the
patient image are revised with the new values when the
‘shift’ operation is concluded.
Patient images in which skin tattoo markers provide the
only source of reference are verified immediately they are
loaded. During the load procedure, verification of the
previously identified tattoo marker position is facilitated
by superimposing orthogonal line graphics over the image
which intersect precisely at this location. If necessary, the
user is able to interactively re-position the intersection
point correctly on the tattoo marker. Upon confirmation,

the image is then automatically shifted so that the location
of the treatment isocentre is positioned at the center of the
display window.

	
 

	
 
	   
 	 	  	   
     	 

3. Placement Error Evaluation
Any individual landmark or landmark group can either
be translated and/or rotated interactively using the mouse.
The re-alignment speed of the landmark graphic over the
corresponding feature in the none-reference patient image
can be optimised by minimising the use of screen menus.
As such, for the most common of placement operations,
that of translation, the user simply performs a ‘Click-nGrab’ operation on the landmark of interest. Moving a
constituent landmark of a user defined group results in all
members being moved.
When any landmark graphic is moved, the component
distances are computed and displayed in the information
summary window. Distances moved are also displayed in
an abbreviated form at a location relative to the landmark
graphic position within the pantograph window. Both
forms of information presented are continually updated as
the graphic is moved.
Assistance is provided in the form of an additional
display window appearing above the landmark graphic
being moved (screen space permitting) enabling the user

to perform image feature/landmark graphic alignments
with greater speed. Within this utility window, which is
horizontally partitioned, the respective regions of interest
containing the corresponding patient image background
and landmark graphics are displayed, illustration 2.

	
 

 	

 
   

    
!    
 
 	   	   

The alignment window places both regions of interest
(containing the appropriate landmark pair - one from each
pantograph window) within the same field of view. As the
landmark is moved, the corresponding viewing port of the
alignment window is updated. The illusion of movement
is created by laterally shifting the patient image beneath
the landmark graphic which effectively remains stationary
within the view port window. This window appears above
the landmark graphic being moved only if there is enough
vertical screen space available (after a specified margin
has been introduced so that the window does not obscure
the user’s view of that graphic). If there is not enough
screen space available, then this type of alignment
window is not created.
There are two types of rotation that can be applied to
the patient image landmark feature/graphic combination.
One involves rotation of the patient image beneath the
graphic and the alternative involves rotating the landmark

profile in isolation. Re-orientating the patient image about
the isocentre is equivalent to rotating the treatment head
within which the MLC equipment is housed. Rotation of
the landmark graphic is, by default, performed about the
treatment isocentre. Although the user may re-position
the centre of rotation, no combinations of rotations about
different centres are permitted. This over-complicates the
field placement issue by introducing too many variables.
Rotations of the landmark graphic or patient image can
be interactively previewed. This utility allows the user to
observe the relative angular displacement between patient
image feature/landmark graphic combination by mouse
action alone, without formally invoking the request. This
prevents the unnecessary repeat-application of rotation
transforms from introducing perturbations as a result of
rounding errors. Rotations are invoked by positioning the
mouse cursor away from the landmark graphic, but still
within the pantograph window, and performing a ‘Click-nDrag’ operation. All rotation angles are rounded to the
nearest half-degree and the value is displayed at the
position previously occupied by the rotation centre icon.
Landmark graphic rotations can be performed about a
centre of rotation that can be interactively re-positioned
by the user. By default, the rotation centre is coincident
with the treatment isocentre for every landmark graphic
drawn. A non-zero degree rotation applied to a landmark
will automatically inhibit any further movements of the
rotation centre. Only when the landmark graphic has a
zero degree rotation with respect to the corresponding
reference graphic in the opposite pantograph window, can
the rotation centre be re-positioned. When rotation mode
operations are being performed, the landmark graphic can
also be translated. Whilst in this mode of operation, all
translation distances are communicated to the user in the
format standard previously described.

3.1 Recording Field Placement Errors
When a landmark graphic has been suitably positioned
so that it agrees closely with the corresponding feature in
the patient image, the user can then establish a transform
in addition to recording the field placement error,
illustration 3.
Fixing a transform establishes a
mathematical link between the image features in both
pantograph windows. When fixed, the mathematical
transform is applied to all subsequent landmarks during
the autonomous transfer of coordinates between patient
images. The fixed intra-image transform establishes an

instant link between both patient images so that
corresponding features can be related. Transforms, like
the landmark graphics drawn, can only be registered for
those images having the same patient identity code and a
consistent view perspective.
Establishing a mathematical transform link between a
combination of images, which constitute a patient set-up,
will invoke an administrative request for patient specific
treatment details, illustration 4. The details requested,
cover all aspects which are both universal and specific to
the patient’s treatment. First presented/requested are
treatment details which catalogue/record the prescribing
clinician’s initials, the energy, dose and number of
fractions together with any appropriate comments.

data. When pre-treatment set-up data has been recorded,
the patient images and landmark graphics used are ‘writelocked’ so that future amendments will be inhibited. If the
landmark graphics used have not been previously stored,
the software will automatically first store them and then
‘write-lock’ the data. When a patient’s treatment has
finished, the user can ‘write-protect’ the field placement
data to prevent its accidental erasure, by password entry.
This ensures data preservation and does not prohibit the
user from future access for post-treatment analysis.

	
 

" 
 	  %  
	 

 	   

 

    
 

	
 

"	 
   
	      	
   #$ 	

Treatment details are followed by a request for fraction
specific details which are specific to the pre-treatment setup. The user is presented with a brief summary of the
field placement error for the view orientation and an entry
request is made for the ‘source-to-skin distances’ for all
field angles. Finally an administrative request is made for
the initials of the radiographer performing the set-up and
the treatment machine id. The fraction number, treatment
date and patient/image details are automatically recorded.
No treatment details can be recorded unless a password
is entered by the user. This restricts access and prevents
the user from accidentally over-writing previously stored

3.2 Field Placement Analysis
For any patient image inter-comparisons, the user can
interactively perform on-screen ruler measurements using
the ‘power icon’ utility, where necessary. Measurements
of landmark features and anatomical distances from those
reference points can be simply performed by a ‘Click-nGrab’ mouse operation. By positioning the mouse cursor
near the image feature and without moving any landmark
graphics in the vicinity, a ‘Click-n-Grab’ mouse operation
will invoke the ruler utility. It appears as a flexible line
graphic whose ‘start point’ is coincident with the location
at which the initial ‘Click’ operation occurred and has a
magnitude/direction which is directly controlled by the
mouse.
As the ruler is flexibly adjusted to register the distance
being measured, the length of the graphic is evaluated in
millimetres using the pixel-scale, and displayed vertically

above the center. For those instances when the accidental
movement of a landmark graphic or isocentre re-location
could occur, the user can invoke the ‘FRZ’ power icon.
This icon ‘halts’ the functionality of the inter-comparison
software and all possible actions which are likely to occur
during this type of measurement.

Target Volumes Across Physicians and Institutions”, Int. J.
Radiation Oncology Biol. Phys., Vol. 37, No. 2, pp445-453,
1997.

4. Discussion

[4] Verhey L, Goitein M, McNulty P, Munzenrider J and Suit H,
“Precise Positioning of Patients for Radiation Therapy”, Int. J.
Radiation Oncology Biol. Phys., Vol. 8, pp289-294, 1982.

Many of the extensive design features incorporated in
this verification software utility have been developed
under close consultation with treatment radiographers.
This package is at present being used within a national
MRC clinical trial (RT01 - organised by the Royal
Marsden Hospital, London) in order to record the field
placement errors that are observed daily at pre-treatment.
All imaging modalities currently available to the hospital
are used in order to define those collective landmark
features that will be outlined on a representative reference
image in order to verify radiation field placement using
anterior and lateral pre-treatment portal images. Multileaf collimator graphics are superimposed in order to
permit the verification of radiation field edge patterns and
correctly locate the treatment isocentre. Speed and
operator ‘ease-of-use’ are priority features that have
influenced the design, with many of the common functions
being initiated without the use of menus or complex
mouse actions. When pre-treatment information has been
recorded for a patient over a course of treatment, the user
has the facility to reflectively examine the data and movie
through the Mega-voltage images captured at each
fraction. The data recorded by this utility can also be
accessed in order to assess the robustness of a treatment
plan given the field placement error recorded for a
particular fraction. Using biological modelling, the
consequences of a simulated treatment plan that
incorporated the field placement error recorded can be
invoked in order to compute the effects on the quality of
treatment if the patient pre-treatment set-up remained
unaltered.

5. References
[1] Hanks G E, “External Beam Radiation Treatment for
Prostate Cancer: Still the Gold Standard”, Oncology, Vol. 6,
pp79-89, 1992.
[2] Ketting C H, Austin-Seymour M, Kalet I, Unger J, Hummel
S and Jacky J, “Consistency of Three-dimensional Planning

[3] Withers H, Taylor J and Maciejewski B, “Treatment Volume
and Tissue Tolerance”, Int. J. Radiation Oncology Biol. Phys.,
Vol. 14, pp751-759, 1988.

[5] Grusell E, Montelius A, Russell K, Blomquist E, Pellettieri
A, Mostrom U and Jakobsson P, “Patient Positioning for
Fractionated Precision Radiation Treatment of Targets in the
Head using Fiducial Markers”, Radiotherapy and Oncology,
Vol. 33, pp68-72, 1994.
[6] Gilhuijs K, Drukker K, Touw A, Van De Ven P and Van
Herk M, “Interactive Three Dimensional Inspection of Patient
Setup in Radiation Therapy using Digital Portal Images and
Computed Tomography Data”, Int. J. Radiation Oncology Biol.
Phys., Vol. 34, No. 4, pp873-885, 1996.
[7] Killoran J, Kooy H, Gladstone D, Welte F and Beard C, “A
Numerical Simulation of Organ Motion and Daily Setup
Uncertainties: Implications for Radiation Therapy”, Int. J.
Radiation Oncology Biol. Phys., Vol. 37, No. 1, pp213-221,
1997.
[8] Van Herk M, Bruce A, Guus Kroes A, Shouman T, Touw A
and Lebesque I, “Quantification of Organ Motion During
Conformal Radiotherapy of the Prostate by Three Dimensional
Image Registration”, Int. J. Radiation Oncology Biol. Phys.,
Vol. 33, No. 5, pp1311-1320, 1995.
[9] Mageras G, Kutcher G, Leibel S, Zelefsky M, Melian E,
Mohan R and Fuks Z, “A method of Incorporating Organ
Motion Uncertainties into Three-Dimensional Conformal
Treatment Plans”, Int. J. Radiation Oncology Biol. Phys., Vol.
35, No. 2, pp333-342, 1996.
[10] Bieri S, Miralbell R, Nouet P, Delorme H and Rouzaud M,
“Reproducibility of Conformal Radiation Therapy in Localised
Carcinoma of the Prostate without Rigid Immobilisation”,
Radiotherapy and Oncology, Vol. 38, pp223-230, 1996.

6. Acknowledgements
This work has been funded by the EC Framework IV
BIOMED 2 programme, project INFOCUS, contract
number BMH4-CT95-0567. Special recognition is given
to resident radiographers: Beverly Thompson and Julia
Stratford at Christie Hospital for their assistance in the
design of this software utility.

