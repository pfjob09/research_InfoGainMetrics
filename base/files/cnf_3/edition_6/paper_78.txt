Some Real Experiences
in Developing Virtual Environments
Roberto Andreoli1 , Rosario De Chiara1 , Ugo Erra1
Antonio Iannaccone2 , Fernando La Greca3 , Vittorio Scarano1
1

ISISLab - Dipartimento di Informatica ed Applicazioni “R.M. Capocelli”
2

Dipartimento di Scienze dell’Educazione
3

Dipartimento di Scienze dell’Antichit`a

Universit`a degli Studi di Salerno, Fisciano (Salerno), Italy

Abstract – The paper presents some experiences in
developing a virtual environment using a videogame engine. It provides the details and the caveats met during
development, with particular attentions to the architectural reconstruction problem, the textures resolution and
the programmability. Some considerations are also reported from an historical point of view, emphasizing the
importance of virtual reconstructions, and from a psychological point of view stressing how a narrative context enhances the learning process.

virtual environment1 based on a reconstruction of the
Poseidonia-Paestum archaeological site. The experience
was particularly significant, since the consistent amount
of modeling, “visit” design (rather than game design) and
user interaction that were employed. Moreover, the heterogeneity of our team (composed by computer scientists,
artists, psychologists and historians) underlined the value
of our experience, by showing the importance and the
effectiveness of a well assorted and strongly motivated
team.

1 Introduction

2 PaestumGate project

Only until few years ago, using 3D videogame engines to
create immersive environments was a sparely used technique in spite of the commercial success and the high
level of photorealism that is achieved by current software/hardware technology. More recently, interest has
grown on the efficiency and photorealism that can be provided on inexpensive hardware by using engines. Several
(so called) “Serious Games” have been studied, and the
interest is witnessed by the crowded tracks in the Computer Games Conferences (in the last few years) and by
the growing number of non-ludic applications that are
based on 3D videogame engines (see, e.g., [1, 5, 8]).
In [3] it was investigated how using videogames technology was particularly suitable for the development of
interactive 3D environments. There are various arguments
supporting this decision: (a) the presence of development tools (e.g. map modeler, exporter from/to modeling
software); (b) support for modern graphics hardware; (c)
scripting language providing great expansibility. These
arguments were helpful in suggesting that the research direction was worth exploring and that more experiences
had to be collected on using a videogame engine for developing a complete virtual environment.
This paper follows the path indicated by [3], by presenting our real experience in developing an educational

The goal we had to pursue was to build an Educational
Virtual Environment that would allow to provide a different experience to the young tourist who approaches
the Poseidonia-Paestum site. The intended experience for
users is different from the passive one provided by traditional DVD/VHS media, more immersive, cooperative
and able to convey the “appeal” of a videogame. On the
other hand we did not want to oversimplify the value of
the architectural monuments yet visible in the site, in particular an important issue was to emphasize how different
civilizations occupied the site through the centuries.
PaestumGate 2 represents a virtual environment that
presents the reconstruction of the town of PoseidoniaPaestum with the following characteristics:
• fidelity of reconstruction: we paid attention in recovering architectural details that cannot be found in the
Poseidonia-Paestum archaeological site. For instance we
have compared the rests from Poseidonia-Paestum with
coeval rests that can be found in other sites, this enabled
us to reconstruct edifices, streets, houses and crockery
1 We call “virtual environment” a 3D world rendered through a computer which provides highly interactive experience to users who navigate
it and prefer it to the often abused “virtual world” or “virtual reality”.
2 For further information see http://isis.dia.unisa.it/
projects/paestumgate.

1
Proceedings of the Information Visualization (IV’06)
0-7695-2602-0/06 $20.00 © 2006

IEEE

with a reasonable precision;
• cooperation: the virtual environment can be visited by
several users simultaneously: each user is aware of the
position of other users and can “see” the actions the other
users are performing;
• scalability: by leveraging on the development framework, we paid attention in assembling a virtual environment that is able to run on high end workstations with a
full fledged set of visual effects, but it can smoothly run
on low end PC with an appreciable frame rate and good
visual results.
• engaging for the learner. Narrative methods are used
by presenting the learner with challenges whose goal is
to stimulate the exploration of the town and foster comprehension of a complex setting like Poseidonia-Paestum.
As an example, the first challenge is to help the citizens to
celebrate the Emperor’s visit to the town, by bringing perfumed essences to a temple. The subtasks of locating the
perfumer store and the temple bring the learner to cope
both with the commercial and the monumental nature of
the town.
In a preliminary phase we assorted a team that would
be able to address the development of the product on three
levels, the technological one, the psychological one and
the historical one.

Figure 1: A comparison among the three kinds of geometry
managed by UnrealEngine2 (a) Heightmaps for terrains (b) Static mesh used for high polygon-count meshes (c) A room modeled using Constructive Solid Geometry

complex lighting effects can be obtained using projected
textures (e.g. the shadow produced by a tree foliage).
Effects. Various “special effects” are available to increase the visual appeal of a the final results, in particular,
is possible to use particle system to simulate things like
2.1 The technological level
flames, fluid surfaces dynamically deformed can reproThe videogame engine we have chosen to use for the duce the water surface of a lake or a pool.
development is UnrealEngine 2 (UE2) Runtime from Terrain. The Height Map terrain system allows complex
Epic Games [10]. The first version of UnrealEngine has terrain rendering described trough an gray scale image.
been made available in 1998, since more than 2000 re- In Figure 1.(a) is shown a textured terrain, the wire frame
leases have succeeded divided in two main versions. Un- geometry and the gray scale image used to generate it inrealEngine is currently under development toward version side the UE2 editor.
3. UE2 is the current one and provide a lot of interesting Textures. In a virtual reconstruction, further than the
details provided by the geometry, also the texturing has
features we shortly describe here:
Graphics. UE2 manages various typology of geome- a great importance. In particular experimented how the
tries static meshes, CSG and Heightmaps. The ratio- texture details, whose UE2 was capable of, was suitable to
nale in choosing one of the methods is: CSG is useful represent particular artifacts like crockery and vases. The
for interiors like rooms, while static meshes are topically maximum resolution for textures in UE2 is 1024x1024
used for high polygon-count objects built and textured in pixels.
an external modeling program such as 3D Studio while Networking. A fundamental gain in using a UE2 as
heightmaps are useful to describe the terrain. In Figure 1 a framework to develop virtual environments is the supwe provide examples of the results that can be obtained port for network gaming. The low-level game networking
with the different techniques. An interesting feature pro- transport is UDP-based and combines reliable and unrelivided by UE2 is the capability of exploiting current graph- able transmission schemes. The servers supports upto 64
ics hardware, commonly dubbed with DirectX8, but in the players.
same time, also able to provide a fallback rendering sup- Versions. The version 2 of UnrealEngine has been made
port for previous generation graphics card, also known as public with an appeal licensing policy: there were two
DirectX6; this wide range compatibility ensures a great licenses, a free one, dubbed “Demo Version” targeting
scalability.
a student audience, particularly suitable for universities’
Lighting. UE2 supports dynamic lighting on all geom- game design courses and a “Registered Version”, which
etry types. The light within the scene can be provided costs 7999$. The Registered Version allows to distribute
as directional lights, point lights and spot lights. More an unlimited number of clients as long as the product is

2
Proceedings of the Information Visualization (IV’06)
0-7695-2602-0/06 $20.00 © 2006

IEEE

collaborative practices a powerful feature of cognitive development and learning. [9] explicitly writes “psychological functioning is intimately intertwined with social interaction”.
By leveraging on the embedded capabilities (in UE2)
of building cooperative virtual works, PaestumGate offers
small groups, either locally or remotely, the opportunity to
visit the town cooperatively, seeing each other avatar and
collaborating into the tasks that have to be taken. As an
example of such experience see Figure 5.

2.3 The historical level
Historical setting. The town of Poseidonia, established
by Greek settlers around the end of the seventh century
B.C. on the left side of the river Sele in the Salerno gulf,
flourished in the successive centuries because to its wide
territory and to its agriculture and was embellished with
magnificent temples. In the fourth century B.C. it was
occupied by an italic people, the Lucanians and, successively, since 273 B.C., it became a Roman town and its
name was changed in Pæstum. The Romans changed the
aspect of the city and removed some monuments that were
a symbol of the Greek autonomy, they also built some
new buildings like the Forum, the Comitium, some Templa, the Curia, the Amphitheatrum and the Thermæ. The
maximum prosperity was reached in the last century of
the Roman Republic until the firsts two centuries of the
Empire (100 B.C. - 200 A.D.).
The importance of a reconstruction. The virtual reconstruction of Poseidonia-Paestum has to face an important
historical problem: the structures, whose rests are present
in the archaeological site, belong to different epochs of
the history of the town. In the Poseidonia-Paestum site
have been found at least three different levels of exploration: the Greek-Lucanian, the Republican Roman and
the Imperial Roman. This is a problem quite common
among archaeological sites that had different dominations
along centuries, and the casual tourist rarely is aware of
this phenomenon. To tackle this problem we have fixed
some didactic goals: the ability of orientate oneself in the
ancient town and in its history, the ability of identify the
urban environment through the various epochs, the ability
of identify the most important monuments and archaeological find. In our opinion meeting these goals in a reconstructed town would enable the tourist to visit the archaeological site with an increased awareness.

Figure 2: A Poseidonia-Paestum map. In gray the surface area
that has not (yet) been reconstructed.

not a videogame (in the stricter sense).

2.2

The psychological level

PaestumGate, as an immersive virtual environment, provides an excellent bridge between knowledge contents
(historical and archaeological) and several essential psychological features of a successful learning process. The
following points resume the main psychological characteristics of the PaestumGate virtual environment:
• PaestumGate is a gratifying background for educational
activities. The quality of virtual reconstruction allows the
learners to have an impressive sensation of “real participation”. As contemporary educational psychology extensively highlights, the importance of the participation
(physical or virtual) is one of the necessary conditions of
learning. Situated Cognition and Activity Theory represent two of the significant paradigms that suggest an idea
of learning as “apprenticeship”. Apprenticeship is to consider a process that may reflect the “participation” to the
more efficient modes of learning involved in everyday situations [4, 6].
• The activities in the PaestumGate environment are
thought as “narrative” steps. In a large number of current contributions educational psychologists emphasize
the importance of a “narrative construction of knowledge”. Especially in a cultural perspective [7] educational narrative methods are widely considered successful
modalities of teaching/learning.
As a result, PaestumGate is proposed to the user as
a sequence of steps, historically motivated and situated,
whose goal is to engage and stimulate the learner to explore the town and participate to its daily life.
• PaestumGate is an environment that easily allows collaborative practices. As developmental psychologists perfectly know children (adult) usually play (work) in groups
sharing their experiences socially [2]. The consistent tradition of researches on “social interaction” considers the

3 The real experience
3.1 Design and modeling details
The final version of PaestumGate provides a reconstruction of 0.2 square kilometers, using more than 600, 000
polygons. In Figure 2 we show a map of the archaeological site and, in gray, the surface currently under de-

3
Proceedings of the Information Visualization (IV’06)
0-7695-2602-0/06 $20.00 © 2006

IEEE

velopment. The map contains about 25 completely reconstructed “important” edifices, like the Amphitheatrum
(7439 polygons) and the so-called Temple of Neptune
(18582 polygons); more than 300 houses, part of them are
low polygon count (98 polygons) and some of them have
a more complex structure with a pool and gardens (6368
polygons); more than 1/2 of the total polygons budget
has been expended for the modeling the vegetation, streets
and the squares.

3.2 Performances

As suggested in [3], the choice of a 3D videogame engine can show interesting side-effects. In fact, besides,
the quality and the photorealism, the support for high interaction and the amount of support for developers (SDK),
a videogame engine represents a carefully tailored software framework to get the maximum mileage out of any
reasonably configured PC. In several contexts, like the educational setting we are developing PaestumGate for, it is
The textures are about 160Mbytes heavy. The typical crucial make the best use of the (somewhat dated) termidimension of textures we used is 1024x1024, this because nals you are to deploy the product onto, since the schools
the intentions were not only to create a interesting product rarely have the opportunity to invest regularly money in
for the tourist, but also to provide a reconstruction that computer labs and very often educational software prodcan be appreciated by the archaeologist. High resolution ucts have to be designed keeping as requirement to be run
textures allowed to bring right inside the reconstructions on 2-4 years old software/hardware platforms.
details like the illustrations of a vase or the details of a
Part of our experience was valuable because we were
particular pavement. Choosing the resolution for textures able to measure up how much a virtual environment,
is a critical decision because it is bound to the size of the based on 3D videogame engines, can be effective and efmemory available on board on the graphics card and this ficient both on high-end graphic workstations equipped
is something that cannot be easily expanded.
with state-of-the-art graphic cards, but also on low-end, 3
Filling the entire memory of the graphics board with years old computers.
textures will request a swap of information to/from the
In figure 3, we report the benchmarking of an extencentral memory and this usually means that the FPS sive walk into PaestumGate, of approximately 3 minutes,
(Frame Per Second), that is the measure of the quality of visiting almost all the most important (and computational
the game experience, will decrease dramatically.
heavy load) landmarks. The efficiency was measured in
As an example of the decreasing of performances, we average frame per seconds and, for each hardware plathave experimented how in certain points of the town (for form, we included the value for 800x600, 1024x768 and
instance from the roof of the Temple of Neptune) the FPS 1280x1024 screen resolutions. It must be noticed that the
goes down on certain low level systems. The reason of smoothness in the rendering is obtained around 20 frame
this is that from such point is possible to see the entire per seconds and that almost all the configurations are way
town that is the complete set of textures and the complete above this threshold. The configurations of the platform
set of geometry. A solution for this performances degra- tested are reported in terms of the most important compodation is to use compressed textures that is textures with nent, i.e., the graphic card. The first two columns of the
a lower memory occupation, whose details are slightly chart report the result on a high-end graphic workstation,
decreased, and whose rendering will need an additional equipped with two nVIDIA Quadro 4500 graphic cards
computation effort (the decompression is performed di- with a SLI configuration whose cost is around 6,000rectly in hardware during the rendering phase). We had 7,000$. SLI stands for Scalable Graphics Interface and
experimented good results in using texture compression. is a high-performance technology that combines multiple
nVIDIA GPUs in a single system in order to scale graphA substantial benefit in using a videogame engine is the
ics performance. This workstation provides excellent feaavailability of a full fledged programming language useful
tures as for instances high resolutions, large amount of
to develop in-game logic. In UE2 this programming lanmemory for textures and full scene anti aliasing useful
guage is dubbed UnrealScript and provides a complete set
for entertainment systems with large groups of people like
of commands to modify and expand not only the behavvirtual theaters.
ior of the objects presents but also to increase the visual
The first column indicates the results with 4x antialias
appeal characteristics.
activated. The remaining configurations all pertain to orIn PaestumGate we used UnrealScript to create an ob- dinary PCs, equipped with the graphic cards indicated. It
ject that once taken would activate some other object in should be noticed that the 7800 is the most recent graphic
other places of the map. We used these kind of objects card from nVIDIA, the nVIDIA 6800 is one year old and
to create a chain of events that will push the player to the ATI 7500 is 2-3 years old. Finally, the last column
visit the entire map pursuing the next object that must be indicates that, anyway, by lowering the detail (in the Unfound. This kind of programmability actually is the back- real2 configuration panel) it is possible to achieve smooth
bone of the narration that will involve the player visiting and enjoyable visit with close to 20 fps, even on the lowest
the virtual environment.
4
Proceedings of the Information Visualization (IV’06)
0-7695-2602-0/06 $20.00 © 2006

IEEE

140
120

Frames per second

100
80

800x600
1024x768

60

1280x1024

40
20
0
Quadro 4500 SLI
4xAA

Quadro 4500 SLI

NVIDIA 7800

NVIDIA 6800

ATI 7500

ATI 7500 (low details)

Figure 3: The comparison of the performances obtained by PaestumGate on different graphic cards.
end machine that we tested.

that these surfaces use a lot of memory, can not be cached
and are difficult to model.
3.3 Caveats
Also for static meshes lighting is calculated for every
surfaces but only surfaces that are facing the light get lit
Developing a videogame is an activity which has to take
and no lightmaps is calculated nor applied.
into account two categories of requests the aesthetic ones
During the modeling phase it must takes into account
and the technological ones: an example of technological
these considerations because one has to choose what to
request is to have a detailed reconstruction of an architecmodel as static meshes, having less accurate shadows, and
tural details like a column or a statue, but on the technowhat to model using BSP having accurate shadows at the
logical details cost in terms of CPU and GPU speed and
cost of a more difficult modeling and some performances
memory occupation for both geometry and textures.
issues.
We report here some decisions we took and we try to
The problem of dimension A problem we had to face
show how we managed them.
off is choosing the scale of the reconstruction. To take a
The shadows An important element in a virtual environ- good decision we adopted an empirical approach, that is
ment is the use of shadow. Shadows add a touch of re- we took a series of photos comparing an average tall man
alism to how the virtual reconstruction is perceived, par- to some columns and walls yet available on the site. These
ticularly in a large external environments. The accuracy photos gave us a proportion between the in-game avatar
of shadows is a direct effect of the type of geometry used height and the dimension of the 3D models. This decito build up the architecture. UE2 supports two different sion enhanced the experience because allowing the tourist
type of geometry: static meshes and BSP (Binary Space to being able to appreciate the sense of distances and the
Partitioning). A static mesh is a set of polygons that never dimensions was a goal.
change its shape, that is the reason for the emphasis on
static. It is drawn in a very efficient way by graphics card 4 Conclusions and Future Works
and can be cached in its memory. Static meshes are used The use of UE2 allowed use to realize a virtual reconto model objects that must be placed several times into the struction of an entire town, this is an appreciable result,
environment (e.g. houses, columns, tabernæ, trees).
but the PaestumGate project is far more than a traditional
The BSP Geometry is the geometry used to model the “virtual reconstruction” of an archaeological site: it is an
basic “shell” for the entire environment and the larger ideal background to create stories to let the player/tourist
structures (e.g. the temples). Lights affect the two types to visit the reconstructed town with increased awareness,
of geometry in a different ways. On BSP surfaces, the and this is one of the goal we are aiming to. Another
editor creates lightmaps during an preprocessing phase of value added for free by using a suitable technology is the
lighting rebuild. During this phase very realistic projec- support for a cooperative visit, and this is a result that
tive shadows are created on surfaces considering that they has been greatly appreciated by the users during some
can receive shadows from other BSP surfaces and from early tests. Another approach that worths noting is how
static meshes. The main drawbacks of the use of BSP are easily we have been able to connect how the town varies

5
Proceedings of the Information Visualization (IV’06)
0-7695-2602-0/06 $20.00 © 2006

IEEE

Figure 4: A landscape view of the reconstructed Poseidonia-Paestum. The user is nearby the Temple of Neptune and is looking
southward.

the past” to look how the place he/she is walking through
appeared through centuries.
On the performances side as along as the virtual reconstruction become more and more complete and complex
the decrease of FPS performance is an issue. A techniques
we are investigating is to use some clipping planes in order to partition the landscape and let the engine to handle
a smaller part of the polygons.

References
[1] Tim Altom, Melynda Buher, Michael Downey, and Anthony
Faiola. Using 3D Landscapes to Navigate File Systems: The
Mountain View Interface. In Proc. of 8t h Int. Conference on Information Visualisation (IV 2004).
[2] A.N. Perret-Clermont and C. Pontecorvo and L.B. Resnick and
T. Zittoun and B. Burge. In Social Interaction and Learning in
Adolescence and Youth. 2004 Cambridge, Cambridge University
Press.
[3] Roberto Andreoli, Rosario De Chiara, Ugo Erra, and Vittorio
Scarano. Interactive 3d environments by using videogame engines.
In Proc. of 9t h International Conference on Information Visualisation (IV’05).
[4] C. Ratner. In Cultural Psychology: A Perspective on Psychological Functioning and Social Reform. 2006 Hillsdale, Erlbaum.
[5] Michael Christoffel and Bethina Schmitt. Accessing Libraries as
Easy as a Game. In Proc. of the 2nd Int. Workshop on Visual
Interfaces for Digital Libraries. July 2002, 2002.
[6] D. Kirshner and J.A. Whitson. In Situated cognition. Social semiotic and psychological perspectives. 1997 London: Lawrence Erlbaum Associates Publishers.
[7] Jerome Bruner. In Making Stories: Law, Literature, Life. 2003
New York : Farrar, Straus and Giroux.
[8] Jules Moloney and Lawrence Harvey. Visualization and ’Auralization’ of Architectural Design in a Game Engione based Collaborative Virtual Environment. In Proc. of 8t h Int. Conference on
Information Visualisation (IV 2004).
[9] R. S¨ali¨o. Concept, learning, and the constitutions of objects and
events in discursive practice. In Cahier de Psychologie - Universit´e
de Neuchatel, 2000 n. 46, 35-46.
[10] Unreal
Technology
Official
Site.
http://www.unrealtechnology.com/.

Figure 5: The cooperative visit of the reconstructed site.

through the centuries: starting from the town at the moment of maximum prosperity, under the Roman domination, just substituting a selected number of edifices we obtained the same town under the Lucanian domination, the
Greek domination. This different “version” of the same
town will be easily visitable by tourists across a sort of
“time travel machinery”, once again a narrative tool to use
an history as a support to the visit.
On the strict technological side we are investigating
how to make the visit location based, that is using the virtual reconstruction not just on a traditional PC at home or
at school but right inside the archaeological site through
a tablet PC that can be tracked with an high resolution, in
order to allow that the visit on the virtual reconstruction to
be synchronized with the the visit in the real archaeological site. This kind of service would allow to the the tourist
to visit not only the actual rests inside the archaeological
site, but also be able to use the tablet PC as a “window on

6
Proceedings of the Information Visualization (IV’06)
0-7695-2602-0/06 $20.00 © 2006

IEEE

