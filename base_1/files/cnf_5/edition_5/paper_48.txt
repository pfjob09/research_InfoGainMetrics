Computer Aided Indexing of Historical Manuscripts
S.A. Shahab, Wasﬁ G. Al-Khatib, Sabri A. Mahmoud
Information and Computer Science Department
King Fahd University of Petroleum & Minerals
Dhahran 31261, Saudi Arabia
{sadnans,wasﬁ,smasaad}@ccse.kfupm.edu.sa
Abstract
Arabic manuscripts represent a rich source of knowledge
that has been highly underutilized. Huge repositories of
historical artifacts are yet to be typeset and published in
book-form. Given vast content of these manuscripts, it is
important to develop indexing systems that support contentbased retrieval from historical manuscripts. In this paper,
we propose a computer aided retrieval and indexing system for Arabic historical manuscripts. The proposed system extracts meaningful information (features) that is used
in indexing. Some preprocessing steps are also implemented
in order to enhance the quality of document images. More
than one form of a similarity measure has been tested. The
developed prototype system has shown encouraging results
with respect to the word matching rates achieved.

1 Introduction
Content Based Image Retrieval (CBIR) systems have
been currently in mainstream of research. In contrast to
the text-based and/or metadata-based indexing approaches,
CBIR systems retrieve target queries from a collection of
stored images by comparing the automatically extracted
features to those of the target query image. The framework
of CBIR systems have, also, been utilized for archival and
retrieval of documents [2]. There are many compelling reasons for the decision of storing manuscripts in image data
form. The ﬁrst reason is that these documents may contain
marginal notes, signs, ink smears, etc., that are of a significant historical value. Converting the manuscript into text
means that all such information is lost. The second reason
is that character recognition of handwritten documents is
generally a difﬁcult task [21]. Tomai, et. al. [21] aligned
an English handwritten page with an exact transcription of
the document. Still, using advanced handwritten recognition techniques, the correct alignment rate did not exceed
83%. Arabic is no exception. The Arabic writing is cursive.
Since character shapes change pending their position in a

word, word segmentation into characters is a major problem.
In our work, we will address the issue of content based
retrieval of historical Arabic manuscripts. This paper is organized as follows: Section 2 presents other related work
to our work. Then, we describe our proposed framework of
the system in Section 3. Section 4 presents the experimental
results, followed by the conclusion.

2 Related Work
Different techniques for various aspects of document image analysis and retrieval have been developed. For example, digitization of documents that have not been generated
from a computer, such as those of manuals and documents
that have been typeset, has been mainly based on applying information retrieval techniques to text that has been
recognized through OCR methods [6, 16]. Work in this
area focuses on handling the erroneous character recognition process in order to enhance the accuracy of the system.
Indexing of documents using the direct processing of the
image text without the need to resort to OCR have also received great attention of the research community. At one
level, character and word properties have been employed to
derive and associate semantic context to certain words. For
example, DeSilva and Hull [8] used properties of words and
the syntactic category of the following word for proper noun
identiﬁcation. Word properties included capitalization, location in a sentence, length of word, lengths of the previous
and following words. Another approach that has been based
on informational retrieval techniques is that of keyword
spotting. The search for keywords is solely based on the
image properties of the keywords. DeCurtins and Chen [7]
have used features such as horizontal and vertical strokes,
blanks, ovals, and others as descriptors of word shape information and employed a voting technique to search for keywords. Chen et al. [4, 5] have used hidden Markov models to identify keywords. They use morphology to identify candidate lines of text, then normalize the lines. Shape

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 © 2006

information is extracted from normalized lines. Matching
techniques can be classiﬁed into two categories [14, 15]. In
the ﬁrst category, two images are compared pixel by pixel
after aligning them, in order to reduce the effect of variations on the robustness of the method. Comparisons in
this category have been carried out on pixel count difference, minimum cost based on the sum of squared differences, and the weighted pixel count difference where difference pixels in larger groups are penalized more heavily [14, 15]. In the second category, features are extracted
from words and comparisons are carried out in the feature
domain to determine similarity. Features used in similarity
include the afﬁne warping transform between sample points
taken from the edges of templates [12], shape-context histograms [3, 18], projection proﬁles, upper/lower word proﬁles [18], and correlation between points of interest in two
images [19]. Saykol et al. have used spatial domain features
and adaptive wavelet transform-based features to carry out
the matching process [20].

Proposed System
Digitization

Preprocessing
Segmentation of Document Pages
into Subwords

Lossless
Storage
System

WordBookGeneration

Retrieval and
Indexing Mechanism

3 Proposed Framework
To cater for the need of retrieval and indexing of historical manuscripts, a modularized CBIR system is proposed.
The emphases are on speed and accuracy. A User can select query words by utilizing an easy to use graphical user
interface (GUI). The proposed system will retrieve all occurrences of the query word and present them to the user
one at a time. Based upon user’s feedback, the system will
index the relevant words under the user speciﬁed “Query
Concept”, in its Arabic textual form. Figure 1 represents
modules within the proposed system.

3.1

Human Operator

Figure 1. Framework of the proposed system

Scanned Image Preprocessing

A gray-scale copy of an old Arabic handwritten
manuscript consisting of 60 pages has been digitized. A
ﬂat bed scanner with 400 dpi resolution was used for this
purpose. The document has been written by a single scribe.
A sample page of manuscript is shown in Figure 2. The
average size of document images is around 2600 × 2300
pixels. After generating the document images, the following processes were carried out: binarization of document
images, removal of curvature effects, correction of tilt/skew
and ﬁltering out the noises.
As evident from Figure 2, there is no color information
present so document images are transformed into gray level
by considering only the value of the brightness component
while removing the hue and the saturation parts of color image. It is further transformed to binary format by utilizing
Otsu’s method [17]. The result of binarization is shown in
Figure 3(a). In order to remove noise and smooth the image, a smoothing algorithm proposed in [13] is applied. The

Figure 2. A sample page from the digitized
Arabic manuscript

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 © 2006

result of smoothing is shown in Figure 3(b).

(a) Noisy binary image

For example if there is a symbol such as ’alif’ ( ), it is
stored in the code book under a unique id and all its occurrences are replaced by its unique id. In addition, the spatial location of each occurrence is stored in a separate table
known as the content book. Thus every object in the image
is decomposed into its code and all occurrences are stored
in the content book.
We modiﬁed this concept for the purpose of performing efﬁcient searching. A “word book” is generated based
on the feature values and similarity measures. Whenever a
user poses a query, the query is searched in the word book
instead of searching the whole database. Although the process of word book generation takes considerable amount of
time, it is usually done ofﬂine and only once so that it does
not effect the speed and the response time of the system.

3.4

(b) Binary image after smoothing

Figure 3. An example showing a generated binary image before and after noise ﬁltering

3.2

Page Segmentation into “Subwords”

After each document image is pre-processed “subwords”
are extracted from the main body of the text by utilizing the
connected component algorithm [10]. Arabic text is written
in a connected fashion and OCR systems typically go one
step further to segment subwords as well, which is error
prone and might not work on manuscript. This is avoided
in our proposed system and thus document images are segmented into subwords only. Each subword is tagged with
speciﬁc information such as page number, line number etc.,
for storage, retrieval and indexing purposes.

3.3

Word Book Generation

In order to enforce efﬁcient searching, the concept of a
code book is used, which has been proposed in [1]. The
code book technique has been originally used for image
compression in which images are broken into several components and these components are put together in a separate
table. Thus, objects in images are coded with the symbols
present in the code book along with their spatial location.

Feature Extraction

Feature extraction is a process in which low level information is extracted from an object, a subword image in our
case, in order to represent it in a compact form with few
numeric values. This facilitates efﬁcient searching and similarity matching with user speciﬁed query subwords. The
following features have been extracted from each subword:
3.4.1 Angular Lines Features
These are 8 feature values calculated by drawing 4 lines,
considering the centroid of the subword as the origin, and
counting the number of pixels that fall in any one region
formed by the 4 lines. These features are normalized by dividing each region counter by the subword total pixel count.
Figure 4 depicts this process.
Region 3

Region 2

Region 1

Region 4

Region 5

Region 6

Region 7

Region 8

Figure 4. Computation of the angular line features of an example subword

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 © 2006

3.4.2 Concentric Circle Features

• Height of subword.

Four concentric circles having center at the centroid of a
subword are drawn. Feature values are the number of pixels contained between two concentric circles. To calculate
these features, the number of pixels is counted within each
circle as shown in Figure 5. In order to ﬁnd pixels between
two circles, the number of pixels in the inner circle is subtracted from that included in the outer circle. These features
are normalized by dividing each region counter by the subword total pixel count.

• Width of subword.
• Aspect ratio deﬁned as the height divided by the width
of a subword.

3.5

Similarity Matching

Due to the variation in writing, the process of similarity measure should be ﬂexible enough in order to recognize
slight variations. In order to calculate similarity values, various distance measures and similarity metrics have been utilized. If the distance between two feature vectors of two
subwords is less than a ﬁxed threshold, they are considered
as similar otherwise they are considered dissimilar. On the
other hand if the similarity metric value between two feature vectors of two subwords is greater than a ﬁxed threshold, which is usually close to 1, they are regarded as similar otherwise dissimilar. The following similarity/distance
measures have been used:
• Euclidean Distance
n

di =

(mik − vk )

2

(1)

k=1

• Product of Manhattan Distance of features
n

Figure 5. Example showing the 4 concentric
circle features of a subword

3.4.3 DFT of Subword Proﬁles

di =

|mik − vk |

• Angular separation
n

These are frequency domain features and are calculated
from the vertical and horizontal proﬁles of a subword. 15point DFT of both vertical and horizontal proﬁles of a subword are utilized as a feature vector.
3.4.4 Hu’s Moments
Hu proposed seven invariant moment descriptors in [11],
which have been widely used in ofﬂine character recognition systems [9]. These seven moments were calculated for
each subword and used as features of the subword.
3.4.5 Geometric Features
These consist of a set of features describing the shape
perimeters of subwords and thus are utilized as a set of features. The set includes:

(2)

k=1

si =

n

k=1

k=1

mik vk

m2ik

n
k=1

(3)
vk2

Where
di is a distance measure,
si is a similarity measure,
n is the number of features,
mik is the k th feature of word book subword i, and
vk is the current subword k th feature.

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 © 2006

3.6

Retrieval and Indexing Mechanism

One of the core objectives of the proposed system is to
provide retrieval and indexing facilities. A computer aided
indexing mechanism is proposed, in which the user can
specify query words by utilizing a user interface of the system, drawing a bounding box across query words in document images. The proposed system will search and retrieve occurrences of query words found in the document.
All retrieved occurrences will be presented to the user for
a relevance feedback. The proposed system indexes relevant occurrences under user-speciﬁed textual annotation.
This functionality is important in digital libraries. It allows
expert librarians to carry out the lengthy task of searching
for similarities based on image features and image processing techniques, whereas interested users can perform their
searches on the textual database that has been generated by
the librarians.

4 Experimental Results

Table 1. % Match Rate of different combination of feature sets and similarity measures
Similarity/Distance
Measure
Angular Separation
Angular Separation
Prod. Manhattan Distance
Angular Separation
Prod. Manhattan Distance
Prod. Manhattan Distance
Prod. Manhattan Distance
Prod. Manhattan Distance
Angular Separation
Angular Separation
Angular Separation
Prod. Manhattan Distance
Prod. Manhattan Distance
Prod. Manhattan Distance
Euclidean Distance

Feature
Set
{CCF,WF}
{DFTP,ALF,HF}
{DFTP,ALF,CCF}
{DFTP,ALF,ASF,HF}
{CCF,HMF,ASF,WF}
{DFTP,CCF,HMF,ASF}
{DFTP,CCF,HMF,ASF,WF}
{DFTP,ALF,CCF,HMF}
{CCF,ASF,WF}
{ALF,WF}
{DFTP,CCF,WF}
{ALF,CCF,HMF}
{DFTP,HMF,ASF}
{DFTP,CCF,HMF,ASF,HF}
{DFTP, ALF, CCF}

Match
Rate
72.5%
72.5%
72.5%
71.25%
71.25%
71.25%
71.25%
71.25%
70.0%
70.0%
70.0%
70.0%
70.0%
70.0%
65.0%

Assume the following abbreviation for feature vectors:
• DFTP : 15-point DFT of proﬁles
• ALF : Angular Line Feature
• CCF : Concentric Circle Feature
• HMF: Hu’s Moment Feature
• ASF : Aspect Ratio Feature
• HF: Height Feature
• WF: Width Feature
The experiments have been carried out by considering the
Euclidean distance, the product of Manhattan distance and
the angular separation similarity measure. The matching
rate accuracy corresponding to various subsets of features
when calculated on 40 similar and 40 dissimilar pairs of
subwords, are shown in Table 1. The results show that the
concentric circle features, the width feature, the angular line
feature and the 15-point DFT have participated in at least
one set of features producing a high match rate. One can
also notice that the angular separation similarity measure
performed well with as low as two features, as opposed to
the product of the Manhattan distance measure that needed
at least three features to perform reasonably well. The Euclidean distance measure performed worst among the three.
It is worth mentioning that the match rates achieved are very
encouraging. Figure 6 shows the same subword appearing in two different forms being misclassiﬁed as different.
On the other hand, Figure 7 shows the same subword being
correctly classiﬁed, despite the apparent difference between

Figure 6. Example misclassiﬁcation of the
same subword

Figure 7. Example correct classiﬁcation of
the same subword

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 © 2006

the two. It seems that the different scales of the corresponding individual characters in Figure 6 have led to considering
the two subwords as distinct. This raises the need for more
“structural” recognition techniques to avoid this problem.

5 Conclusion
A computer aided retrieval and indexing system for Arabic historical manuscripts has been proposed and implemented. The concept of the “word book” has also been
utilized in the retrieval process, increasing its speed. The
relevance feedback from users is acquired to conceptually
index document images. The prototype system has also
been tested with different combinations of feature sets and
similarity measures. The system was able to retrieve query
words as posed by the user. The implemented system can be
coupled with a database management system that will facilitate and increase the efﬁciency of retrieval operation. The
proposed system can be modiﬁed to serve textual queries as
well. Further work is needed to support multi-author documents and to improve the matching rate.

6 Acknowledgment
We would like to thank King Fahd University of
Petroleum and Minerals (KFUPM) for supporting this research work and providing the computing facilities. We,
also, would like to thank the Islamic University in Medina,
Saudi Arabia and Dr. Khalid Al-Abri from the department
of Islamic and Arabic Studies at KFUPM for providing us a
copy of the manuscript.

References
[1] R. N. Ascher and G. Nagy. A means of achieving a high
degree of compaction on scan-digitized printed text. IEEE
Trans Comput., C-23(11):1174–1179, 1974.
[2] H. S. Baird. Difﬁcult and urgent open problems in document
image analysis for libraries. In Proceedings of the First International Workshop on Document Image Analysis for Libraries, pages 25–32, 2004.
[3] S. Belongie, J. Malik, and J. Puzicha. Shape matching and
object recognition using shape contexts. IEEE Trans. Pattern Anal. Mach. Intell., 24(4):509–522, 2002.
[4] F. Chen, D. Bloomberg, and L. Wilcox. Spotting phrases in
lines of imaged text. SPIE, 2422:256–269, February 1995.
[5] F. Chen, D. Bloomberg, and L. Wilcox. Detection and location of multicharacter sequences in lines oﬁmaged text. The
Journal of Electronic Imaging, 5(1):37–49, January 1996.
[6] W. B. Croft, S. Harding, K. A. Taghv, and J. Borsack. An
evaluation of information retrieval accuracy with simulated
OCR output. In Proceedings of the Third Annual Symposium
on Document Analysis and Information Retrieval SDAIR94,
pages 115–126, University of Nevada, Las Vegas, April
1994.

[7] J. L. DeCurtins and E. Chen. Keyword spotting via word
shape recognition. In Proceedings of the SPIE - Document
Recognition II, pages 270–277, 1995.
[8] G. DeSilva and J. J. Hull. Proper noun detection in document images. Pattern Recognition, 27(2):311–320, February
1994.
[9] M. Fakir and M. Hassani. Automatic arabic characters
recognition by moment invariants. In Colloque international de telecommunications, Fes, Morocco,, pages 100–
103, 1997.
[10] Gonzalez and Woods. Digital Image Processing. Prentice
Hall, 2003.
[11] M. Hu. Visual pattern recognition by moment invariant. IRE
Transaction on Information Theory, 8:179–187, February
1962.
[12] S. Kane, A. Lehman, and E. Partridge. Indexing george
washington’s handwritten manuscripts. Technical Report
MM-34, University of Massachusetts Amherst, 2001.
[13] S. A. Mahmoud. Arabic character recognition using fourier
descriptors and character contour encoding. Pattern Recognition, 27:815–824, 1994.
[14] R. Manmatha, C. Han, E. M. Riseman, and W. B. Croft. Indexing handwriting using word matching. In DL ’96: Proceedings of the ﬁrst ACM international conference on Digital libraries, pages 151–159. ACM Press, 1996.
[15] R. Manmatha and T. M. Rath. Indexing handwritten historical documents - recent progress. In Proceedings of the
Symposium on Document Image Understanding, pages 77–
85, 2003.
[16] M. Ohta, A. Takasu, and J. Adachi. Probabilistic automatonbased fuzzy english-text retrieval. IEICE Transactions on
Information and Systems, E86-D(9):1835–1844, September
2003.
[17] N. Otsu. A threshold selection method from grey-level histograms. SMC, 9(1):62–66, January 1979.
[18] T. M. Rath and R. Manmatha. Word image matching using
dynamic time warping. In Proceedings of the IEEE Computer Society Conference on Computer Vision and Pattern
Recognition, pages 521–527. IEEE Computer Society, 2003.
[19] J. L. Rothfeder, S. Feng, and T. M. Rath. Using corner
feature correspondences to rank word images by similarity.
In Proceedings of the IEEE Computer Society Workshop on
Document Image Analysis and Retrieval, 2003.
[20] E. Saykol, A. Sinop, U. Gdkbay, O. Ulusoy, and A. Cetin.
Content-based retrieval of historical Ottoman documents
stored as textual images. IEEE Trans Image Process,
13(3):314–325, March 2004.
[21] C. Tomai, B. Zhang, and V. Govindaraju. Transcript mapping for historic handwritten document images. In Proceedings of the eightth International Workshop on Frontiers in
Handwriting Recognition, pages 413–418, Niagara-on-theLake, ON, August 2002.

Proceedings of the International Conference on Computer Graphics, Imaging and Visualisation (CGIV'06)
0-7695-2606-3/06 $20.00 © 2006

