2009 Sixth International Conference on Computer Graphics, Imaging and Visualization

Ball Robot and the Graphics Generation and its Image Calculation
based on CAD Geometric Model
QI Bingchen, DONG Yanqiu, LUAN Jilin, QI Wei
College of Comp. and Info. Eng. Tianjin Normal University Tianjin, 300387,China
bbccqq@sina.com
OKAWA Yoshikuni
College of Engineering Nihon University Koriyama, 963-8642, Japan
okawa@m2.pbc.ne.jp
In the above two ball international robot
competitions, the first "MiroSot" robot soccer held in
Korea was earlier than the first "RoboCup" in Japan. In
practice, however, the latter's pre-event research and
preparatory activities have been significantly ahead of
the former. Minoru Asada and Hiroaki Kitano of Japan
and other scholars have spent a few years of time on
developing a number of the technical feasibility of
carrying out research, social impact assessment activities
for the holding of robot soccer; and made a large number
of necessary preparatory work such as drafting the rules
of the competition and the development of robot
prototype, and announced the convening of a soccer
robot decision in June 1993. Only the first of its official
"RoboCup" robot soccer was hold behind "MiroSot"
launched in South Korea. At present, these two kinds of
competitions are held alternately in each country in the
world including China, each year many of robot soccer
teams in China participate in the two international robot
competitions.
In order to win the competition, the vision system of
soccer robot plays a vital role. The robot's position, the
identification of the ball and the goal and so on test the
strength of the visual system functions of all of the
robots. Take "RoboCup" soccer robot for example, the
robot generally consists of three parts: the sensor part for
the observation of the surrounding environment, the
computer controlling part for thinking and the sports
mechanism part for the completion of the campaign
action. In addition, in accordance with the requirements
of different race, they have two different structural
forms. One is the integration of these three parts of the
robot in the independent robot, that is, the vision sensor
uses onboard form, the vision of its visual system is
limited to a small environment around the robot, it is
referred to as "Partial Visual System". The other is that
the above-mentioned three parts of the robot is not a
centralized form of installation, especially in that its
visual sensors were installed on the top of the stadium ,
the vision is extended to the entire sports venues, so it is
called "Global Vision System".

Abstract
In this paper, the basic image calculation of the
soccer robot of "more athletes and less balls" and the
billiard robot of "more balls and less athletes" were
discussed separately. And put forward our algorithm for
the fast image calculation of the ball obstructed by other
balls for the problem that must be resolved while the
billiard robot installed an onboard camera hitting
billiards, as this paper uses the graphic generation and
image calculation method based on CAD geometric
model, this make the calculating process only rely on the
area P of the exposed part of obstructed balls as well as
the gravity coordinates x P、 y P of this area, and the
volume of these three quantities can be obtained fast
through simple pixels, so the algorithm proposed in this
paper has a strong practicality.
Keywords--- ball robot, CAD Geometric model,
graphics generation, image calculation.

1. Introduction
1996 and 1997 are two especially memorable years
for scholars of Artificial Intelligence and Robotics. In the
two years a series of important events birth, including
two ball international competitions what have
far-reaching impact on the future of Artificial
Intelligence and Robot Research.
1 、 November 1996, the world's first "MiroSot"
robot soccer was hold in South Korea.
2 、December 1996, Honda announced that they
developed the world's first humanoid robot P2 of true
sense.
3、May 1997, the "Deep Blue" computer Of IBM in
USA overcome the human world champion Garry
Kasparov in world chess for the first time.
4、July 1997, the Mars lander of USA released the
first auto-made robot "Sojourner" on Mars.
5、 August 1997, the first "RoboCup" robot soccer
was held in Japan.
978-0-7695-3789-4/09 $25.00 © 2009 IEEE
DOI 10.1109/CGIV.2009.97

28

teaching behavior of educational human experts.
Although the use of computer virtual reality technology
can also carry out a number of experimental teaching
activities, but the effectiveness there is still a large
limitation. For example, the teaching effect is obviously
different between that the human participants hit the ball
with the mouse on the simulated platform drew on the
computer screen and that hit the ball with the real club.
And "Robot-Assisted Teaching" precisely makes up
for the above deficiency of "Computer-Aided
Instruction". Because the robot can not only use its
onboard computer to simulate the memory and judging
functions of human experts in education, it can also
make use of its rich sensors to simulate visual, tactile
functions of educational human experts, use its
manipulator to simulate the operation function of
educational human experts, as well as use its
mobile-agency to simulate the walking function of
educational human experts and so on, which can
simulate each educating action of educational human
experts more comprehensively, especially experiment
teaching behavior.
To "Robot-Assisted Instruction" of billiard
campaign, the first requirement is that the billiard robot
can make action demonstration of aiming and hitting
balls on the standard billiard ball platform for human
athletes. Among these, the completion of observing and
aiming of the robot to billiard rely on the onboard visual
sensors.

To the "Global Vision System", the goal position is
fixed, and relatively easy to identify; the location of the
ball constantly changes with the executing of the race,
but it can be identified by the extraction of it’s unique
color - "orange"; the more important thing is the
identification of each robot of the two sides in the
competition. Because the robot not only need to identify
the location and attitude angle (the angle represents the
direction of movement of the robot), but also to identify
if the robot is own or other's, as well as the respective
numbers of the robot in its team. Which rely on the
visual system to distinguish by the identification of the
color of the main robot tags and vice tags that attached to
the robot.

2. The Billiard Robot and its Image
Calculation
The above soccer robots do not play football pitch
on the standard ground used by human athletes, but
started on the ground what is similar to the size of the
table tennis table that prepared for the robot soccer. Of
course, the size of the robot and the ball has accordingly
narrowed greatly, and at the same time the suitable
simple competition rules are devoted to the competition.
And the billiard robot we developed is the different
from the above-mentioned soccer robot, it hits the ball
using the criteria billiard table as human. For this reason,
one of the purposes of the robot is that the robot as a
teaching aid involved in the training and teaching
activities to billiard human athletes, which can be made
use of to develop "Robot-Assisted Teaching" of billiard
movement.
"Robot-Assisted Teaching" is a kind of instruction
activities
corresponding
to
"Computer-Aided
Instruction". Since IBM in United States successfully
developed the first computer teaching system in 1958,
"Computer-Aided Instruction" has been the development
of half a century, which has become one of the main
technical means of modern educational technology,
resulting in huge economic and social benefit. The
reason why the application of computer in teaching field
is so successful mainly because the use of computer can
be used to mimic many teaching behaviors of
educational human experts. For example, the use of
computer memory can simulate the of memory function
of experts; the use of computer operator can simulate the
judging function of the human experts in education and
so on. Especially ，"Computer-Aided Instruction" is not
confined by the limited knowledge and experience of the
teacher, it can focus the experience and wisdom of many
experts effectively, it is a very viable means of teaching
aids.
However, "Computer-Aided Instruction" is more
suitable for teaching of theory course, it is difficult to the
experimental teaching who need to hand on the
experience ability of students, Because relying solely on
computer also can not effectively simulate the
observation, operation and a variety of experimental

Figure 1

29

The computer image of obstructed
balls

3. The graphics generation and image
calculation based on CAD Geometric
model
One of the important distinction between billiard
ball and other ball sports is that the vast majority of ball
sports have" more athletes and less balls"; but in billiard
ball" more balls and less athletes". The two sides of
billiard ball sport have a total of two players, but there
will always be an athlete resting in the off-course
rotation, only an athlete hit the ball on the stage any
time; However, the number of billiard balls can reach a
maximum of 22 on the table. As it is very easy to form a
multi-stage ball gathering, the ability of image
calculation of close leaning against billiards is
indispensable.
In the use of onboard vision sensor of billiard robot
to aim and measure the location of coordinates, it is not
difficult to identify and measure the balls that not
obstructed by other balls, exposed completely in front of
the camera. As for the balls obstructed by others, when
the obstructed part is not so much, it is still not difficult
to identify the outline using methods such as Hough
Transform (although Hough Transform is relatively
time-consuming).However, to the one who was severely
obstructed, we have to explore some more effective
image calculation algorithms.
Take the figures of the white ball A and the red ball
B (shown in Fig.1) which is up took by onboard camera
of Billiard Robot, as an example, the ball B located at the
rear is seriously obstructed by the ball A in front of it,
the red exposed part of the ball B observed on the image
was meniscus shape. Set that the location
coordinates ( x a , y a ) of core a on the camera image

Figure 2

The computer graphics of obstructed
balls

If take the straight line UV connected by the two
intersections U and V of two circles as the chord of the
circle, and set half the central angle corresponding to the
chord as the angle Φ, the area P-the red exposed part of
ball appear meniscus shape B can be computed by this
formula:

P = R 2 (π − 2φ + sin 2φ )
That is,

plane and the radius of R have been obtained, our task
now
is
to
try
to
obtain
the
location
coordinates ( xb , y b ) of core b of serious obstructed ball

2φ − sin 2φ = π −

P
R2

In order to calculate the value of Φ, firstly set

B rapidly on the camera image plane through red images
of meniscus ball B.
It is assumed that the cores distance between ball A
and ball B is much smaller than the distance from them
to the camera, and the location coordinates ( x a , y a ) of

π−

P
=W
R2

Then take a number of variables of variable Φ,
calculate separately

core a of ball A locates at the core of the origin image
coordinate system, so the oval-shaped outline of two
balls can be approximately denoted by the CAD
Geometric model shown in Figure 2, the model is two
circles with radius R whose each other’s part overlaps
(for simplicity, and the general is not lost,
set x a = y a = 0 in the image. When x a、 y a are not

W = 2φ − sin 2φ
Take each variable Φ and its corresponding
function value W into a look-up table stored in the
computer. Once compute actually, the corresponding
value Φ of value W can be obtained by the look-up table
through difference method according to W result

zeros, it can be achieved by translating the axis).

from π

−

P
.
R2

Thus the distance L between the two cores in the
image coordinate system is as follows:

30

L = 2R cos φ

xb , y b is correct, this can be used for the robot to aim.

Set the position coordinates of each pixel as

Otherwise, the robot needs to further transform new
observations to restart the process of the above
calculation.

( xi , yi ) ， (i = 0,1" , n − 1) in red area P, the gravity
coordinates of area P are:

Conclusions

1 n −1
xP = ∑ xi
n i =0
1 n −1
yP = ∑ yi
n i =0

Because "more balls and less athletes" is an
important distinction between billiard ball and other ball
sports. Therefore, in order to use robot installing onboard
camera to hit billiards, we must solve the problem of the
effective image calculation of serious obstructed balls of
billiard robot. Because the proposed algorithm in this
article use the graphics generation and image calculation
based on CAD Geometric model method, which make
the calculation process only relies on the area P of the
exposed part of obstructed balls as well as the gravity
coordinates x P、 y P of this area, and the volume of
these three quantities can be obtained fast through simple
pixels, so the algorithm proposed in this paper has a
strong practicality.
In the process of developing the billiard robot, we
get the subsidize of “National Science Foundation of
China Item”(NSFC Grant #60075021) and “Key Project
of Chinese Ministry of Education”(#00137). Here we
mean a gratitude sincerely.

As the focus of area P is on the extension line ab
of the connecting lines of the two circles in the image
coordinate system, so the angle Q between a straight line

ab and X axis is as follows:
Q = arctg

yP
xP

That is, the center coordinates ( xb , yb ) of the ball
B in the image coordinates as follows:

xb = xa + L cos Q
⎛
y ⎞
≈ x a + 2 R cos φ • cos⎜⎜ arctg P ⎟⎟
xP ⎠
⎝

References
[1]

yb = y a + L sin Q
⎛
y ⎞
≈ y a + 2 R cos φ • sin⎜⎜ arctg P ⎟⎟
xP ⎠
⎝
From the above we can see that x a , y a , R are

[2]

known quantities, so as long as the area P of red
meniscus exposed part of ball B (that is, the total pixel in
this area) as well as the gravity coordinates
xP、 y P are
already
obtained,
the
core

[3]
[4]

coordinates ( xb , y b ) of the obstructed ball B for the use
of observing and targeting by the billiard robot.
As
a
result,
use
the
above
parameters x a , y a , x b , y b , R , the computer graphics

[5]
[6]

shown in Figure 2 can be generated in accordance with
the actual CAD Geometric model. Among them, the
center coordinates of circle A is x a , y a ，the center
coordinates of circle B is

xb , y b ，and some part of

circle B is obstructed by circle A. Then, we can make
comparison and verification between pixels of the
computer-generated geometric graphics part of circle B
as shown in Figure 2 and the computer image of part B
take by the robot vision system shown in Figure 1. If the
corresponding pixel error of the two parts is in the
allowable range, we can believe that the above calculated
31

QI Bingchen and OKAWA Yoshikuni, “Building An
Intelligent Mobile Robot For Billiards”, 30th
International Symposium on Robotics, Tokyo, 1999,
pp.605-612.
QI Bingchen and OKAWA Yoshikuni, “Measurement of
Ball Positions in Building a Billiard Robot”, Journal of
Image and Graphics,Vol.5 supp. 2000,pp.281-284.
QI Bingchen and OKAWA Yoshikuni, “New Domain in
Modern Education Technology”, Robot Technique and
Application, 2000,pp.5-7.
QI Bingchen and OKAWA Yoshikuni, “Computer
Assistant Instruction and Robot Assistant Instruction”,
Journal of Tianjin Normal University (Natural Science
Edition), Vol.23,No.1,2003, pp.63-65.
ASADA Minoru and NODA Shoichi, “Action-based
state space construction for robot learning”, Journal of
the Robotics Society of Japan, 1997, pp.886-892.
YAMATO Nobuo,“Education with Robot”, Journal of
the Robotics Society of Japan, 2006, pp.7-9.

