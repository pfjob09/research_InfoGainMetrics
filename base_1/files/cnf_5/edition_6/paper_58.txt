Ray-Space Data Compression Based on Prediction Technique
Feng SHAO1,2, Gangyi JIANG2,3, Ken CHEN2, Mei YU2,3, Tae-Young CHOI4
1. Depart. of Information and Electronics Eng., Zhejiang University, Hangzhou, 310027, China
2. Institute of Circuits and Systems, Ningbo University, Ningbo, 315211, China
3. National Key Laboratory of Machine Perception, Peking University, Beijing, 100871, China
4. Division of Electronics Engineering, Ajou University, Suwon, 442-749, KOREA
shaofeng@126.com jianggangyi@126.com

Abstract
Free Viewpoint Television (FTV) is expected to be a
next generation visual application. Ray-Space
representation is the main approach to realizing FTV
with complex scene. Data compression in ray-space is
one of key technologies in ray-space based FTV
systems. Previous methods of ray-space data coding
only utilize intra-slice redundancies which is similar to
still image coding techniques, resulting in low coding
efficiency. In this paper, data compression in ray-space
is investigated, features of ray-space slice are analyzed,
and ray-space compression method is proposed based
on intra-slice correlation, inter-slice correlation and
prediction technique. Experimental results show that
ray-space compression efficiency is further improved.

1. Introduction
FTV is expected to be a next generation visual
application. It provides the user with realistic
impression due to the high interactivity and
photorealistic image quality. It allows the users to
change his/her viewing point and viewing direction
freely and enjoy more photorealistic 3D images. With
these functions, FTV will be used for various services,
among them are broadcasting, visual communication
and education. The main techniques in FTV are modelbased rendering (MBR)[1] and image-based rendering
(IBR)[2,3]. MBR representation is obtained by
converting the original multi-view images to a 3D
model, with texture information. The model matching
and texture analysis are time-consuming, so it is not
suitable for full real-time application. IBR, on the other
hand, requires only sampled images to generate highquality novel views.
Ray-Space representation is a newly developed
method of IBR used to describe 3D information by

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

converting the original multi-view images to “ray”
parameters[4]. Unlike other methods of IBR, the rayspace can generate an arbitrary viewpoint view without
complex analysis and rendering process. FTV scheme
based on ray-space was adapted in the 3DAV draft
presented by MPEG[5]. Data compression in ray-space
is one of key technologies in ray-space based FTV
systems[6,7]. Previous ray-space data coding methods
only utilize 2D intra-slice redundancies, similar to still
image coding technique, leading to low coding
efficiency. In fact, the redundancy in ray-space is 3D in
the case of parallel camera configuration without
considering temporal axis.
In this paper, ray-space representation of FTV is
introduced and features of ray-space data are analyzed,
data compression in ray-space is investigated with
intra- and inter-slice correlations. Experimental results
show that the proposed compression method can make
better use of redundancy compared to the previous
methods, and consequently achieve higher compression
effectiveness.

2. Ray-Space Representation and Its Data
Feature Analysis
As a common data format of 3D images, ray-space
describes 3D spatial information by taking advantage
of the rays existing in the space of interest. When
factors of wavelength and time are ignored, ray-space
can be defined as a 5D function, f(X,Y,Z,T,I), which is
capable of describing all rays of 3D space. In the
notation, (X,Y,Z) denotes three dimensional coordinate
and (T,I ) is the parameters of ray’s direction. The
function f(X,Y,Z,T,I ) provides the intensity value of a
specified ray passing through the point (X,Y,Z) in the
direction of (T,I). To reduce the number of dimensions
of ray-space data and processing complexity, ray-space
can be simplified to 3D representation where the

cameras are mounted in parallel. Let ray R interact with
the plane Q(Z=0) at (x,y), and the camera configuration
is set in such a manner that I of all rays equals zero,
then the ray R can be uniquely designated with the
parameters (x,y,T). Let X, Z be space coordinates, and x
and u be the ray-space coordinate where u=tanT. The
ray passing through a point P(X, Z) forms a line in the
ray-space, satisfying X=x+uZ.

mentioned above, the data A in ray-space is the union
of sets of data recorded by still image Iv. Since Iv
serves like a still image, it has the same statistical
properties as those found in the still image. As a result,
the data A inherits the properties, that is, high spatial
correlation between adjacent pixels. The other is also
the redundancy, but its occurrence lies in the fact that
the intensity of rays from the same point on an object
does not drastically change in different viewing
direction. In this case, it is assumed that the intensity of
all rays coming from the same point is almost identical
regardless of the viewing direction.

(a) S(yk)={f (x,yk,u)}
(a) Multi-view imaging
(b) 3D ray-space
Fig.1 3D ray-space
(b) S(yk+1)={f (x,yk+1,u)}

(c) d(yk+1)
Fig.2 An example of ray-space slice{f (x,yk,u)}
One of the important features in ray-space
representation is that the image information from a
certain viewpoint is given as one of a subspace of all
the ray-space. The data collected using the
configuration shown in Fig.1(a) can also be obtained
based on the ray-space illustrated in Fig.1(b). The 1th to
5th vertical sections in Fig.1(b) correspond to the five
views in Fig.1(a), which means that arbitrary viewpoint
image can be generated by simply reading and
transforming the corresponding data in ray-space. In
Fig.2, a ray-space intersection {f(x,yk,u)} is formed by
horizontal segmentation in plane coordinate system. In
this research, one such horizontal section is defined as
one “slice”, and then the ray-space is composed of
many such slices. With size of 640×480, the multiviewpoint image “Xmas” in the left side of Fig.2 is
provided by Nagoya University. The cameras are
mounted in parallel, a ray-space data field formed by
480 slices is acquired using EPI (Epipolar Plane Image)
technology. Even though ray-space approach provides
a perfect solution to generating an arbitrary viewpoint
image, usually it is still loaded with large quantity of
data because of its dependence on the multi-view
images. Therefore, data compression in ray-space is
necessary and becomes the main challenge of the rayspace based FTV scheme. Redundancy in ray-space
can be classified into two categories. One is the same
redundancy as that existing in 2D still images. As

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

(d) DCT coefficient of S(yk)

(e) DCT coefficient of d(yk+1)
Fig.3 Adjacent ray-space slices and their difference,
and the corresponding DCT coefficient distributions
Let S(yk) and S(yk+1) denote adjacent slices with
respect to y=yk and y=yk+1, respectively. To better
study the ray-space characteristic, the difference
between S(yk) and S(yk+1) is analyzed. Fig.3(a) and

Fig.3(b) show S(yk) and S(yk+1), while Fig.3(c) reveals
the difference d(yk+1)= S(yk+1)-S(yk). It can be noted that
the energy of d(yk+1) is quit small, so the inter-slice
correlations are very large so that the prediction
technique can be utilized effectively. Then DCT is
adopted to analyze the frequency characteristic of one
slice and the difference image. The DCT coefficient
can basically reflect the energy distribution of spatial
signal. Fig.3(d) and Fig.3(e) demonstrate the DCT
coefficient distribution of one slice, and the difference
with the block size of 96×96. As shown in the figure,
the energy concentrates primarily in the position of low
frequency coefficients, and coefficient distribution with
the direction in Fig.3(d) and Fig.3(e) indicates the
characteristics of ray-space slice, which is quite
valuable to finding fast matching algorithm in interslice prediction. By conducting the statistical analysis
on DCT coefficient, it may come to the conclusion that
the straight line direction be the ray-space approximate
texture direction, then this conclusion provides a
powerful
support
to
intra-slice
prediction,
transformation coding and inter-slice prediction. It also
brings out the idea of the fast matching algorithm for
inter-slice prediction.
In this investigation, the correlations between
adjacent slices of ray-space are also compared with the
correlations between frames of “foreman” video
sequence. The result is given in Fig.4, in which the
correlation coefficient R is calculated by
1 n ª vi  v º ª ki  k º
R
(1)
»
¦«
»«
n  1 i 1 ¬ Sv ¼ ¬ S k ¼
where Sv and Sk are standard deviation of adjacent
slices (or frames), v and k are the mean of adjacent
slices (or frames). The mean correlation coefficient of
the slices in ray-space is 0.985, while it is 0.976 for
“foreman” video sequence, a little bit lower than that of
slices in ray-space. This explains why there exists large
redundancy between slices of ray-space alike video
sequence. For foreground area, its inter-slice
correlations are relatively smaller than for the
background area, but the difference is not significant.
This finding provides the basis for intra-slice and interslice data compression with prediction technique.

3. Ray-Space Data Predictive Coding with
Intra- and Inter-Slice Correlations
Since there are obvious intra-slice correlations and
inter-slice correlations in ray-space data, ray-space
slices can be grouped into slice sequence and
compressed with predictive coding technique as video
sequence coding. Thus, some video coding methods,

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

such as H.264 and H.263 with prediction techqiue, can
be used to ray-space data compression.
In motion estimation of H.264, there are seven
block mode of 16×16, 16×8, 8×16, 8×8, 8×4, 4×8 and
4×4. This kind of flexible and meticulous multiple
mode segmentation can improve precision of block
matching with exercising the shape of the object more
suitable. Seven modes for ray-space coding are
adopted, and the results are shown in Fig.5. Based on
the analysis afore, it may be observed that 16×16
makes the largest contribution to the coding while
8×16 gives much better result than 16×8 because 8×16
includes more even information.

Fig.4 Comparison of the correlation coefficients of
ray-space slices and “foreman” video sequence

Fig.5 Comparison of block matching with 7 modes
Next, ray-space slice sequence is coded using
multi-reference slices, and the statistic results are
tabulated in Table 1. As indicated in the table, utilizing
the multi- reference slices contributes almost none to
the improvement of the ray-space coding efficiency,
while reference slice selection consumes more time.

This may lead to the conclusion that in ray-space
coding multi-reference slices offers no advantage or
whatsoever.
To compare three different methods of ray-space
data compression, including H.264-based, H.263-based
and JPEG-based methods, Fig.6(a) gives average peak
signal-to-noise-ratio (PSNR) of decoded slices with
three compression methods corresponding to different
rates. Fig.6(b) shows the average PSNRs of the
corresponding reconstructed viewpoint images from
the decoded ray-space slices.
Table 1 Results of multiple reference slices
Reference slices
PSNR(dB)
Total bits(bit)
1
34.24
1238312
2
34.27
1234264
3
34.29
1225984
4
34.30
1220608
5
34.31
1217456

4. Conclusions
MPEG expert organization adopts FTV based on
ray-space, and ray-space data compression is one of
key technologies in FTV. In this paper, the author
presents a research approach to achieving higher data
compression ratio. The method is based on the study of
the inter-and-intra slice correlation, combining with the
inherent characteristics of the ray-space, and
compressing data using video sequence coding
technique. By making use of the characteristics of slice
sequence in the ray-space, which is different from
those in the video image sequence, the compression
ratio can thus be further improved.

Acknowledge
This work was supported by the Natural Science
Foundation of China (grant 60472100), the Natural
Science Foundation of Zhejiang Province (grant
RC01057), and the Ningbo Science and Technology
Project of China (grant 2003A61001, 2004A610001),
and the Zhejiang Science and Technology Project of
China (Grant 2004C31105).

References
[1] T.Fujii, T.Kimoto, M.Tanimoto, “Ray Space Coding for
3D Visual Communication”, Proceedings Picture
Coding Symposium, IEEE Press, 1996, 2: 447-451.
[2] P. Nabangchang, T. Fujii and M. Tanimoto,
“Experimental System of Free Viewpoint Television”,
SPIE 2003 Stereoscopic Displays and Virtual Reality
Systems, SPIE, 2003, 5006:554-563.
[3] S.J.Gortler, R.Grzeszczuk, R.Szelisk, “The lumigraph”,
Proceedings of SIGGRAPH’96. 1996, 2:43-54.
[4] M.Levoy, P.Hanrahan, “Light field rendering”,
Proceeding of SIGGRAPH’96, ACM Press, 1996, 31-42.
[5] M.Tanimoto, T.Fujii, FTV ISO/IEC JTC1/SC29/WG11,
M8595, Jul.2002.
[6] T.Fujii, T.Kimoto, M.Tanimoto, “Free-Viewpoint TV
System Based on Ray-Space Representation”, SPIE
2002 Three-Dimensional TV, Video, and Display, SPIE
2002, 4864-22: 175-189.
[7] SHAO Feng, JIANG Gangyi, YU Mei, et al, “Analysis
of Inter-slice Correlation in Ray Space and Its
Application to Data Compression”, 7th International
Conference on Signal Processing Proceeding, IEEE
Press,2004, vol.2: 1219-1222.

(a) Results of slice sequence compression
(b) Results of image reconstruction from compressed slices
Fig.6 Performance of H.264, H.263 and JPEG coding methods for ray-space slices compression

Proceedings of the Computer Graphics, Imaging and Vision: New Trends (CGIV’05)
0-7695-2392-7/05 $20.00 © 2005 IEEE

