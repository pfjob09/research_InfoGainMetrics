Fifth International Conference on Computer Graphics, Imaging and Visualization
Visualisation

A Surgical Simulation System Supporting COLLADA-Based File Format
Katsunori Miyahara, Yoshihiro Okada
Graduate School of Information Science and Electrical Engineering, Kyushu University
744, Motooka, Nishi-ku, Fukuoka, 819-0395 JAPAN
{katsunori.miyahara, okada}@i.kyushu-u.ac.jp
technologies and peripherals, we can develop virtual
reality applications those provide an immersive virtual
environment where the user operates 3D objects
intuitively as if he/she existed in the real world. As one
of such applications, we have been developing a cloth
design system with which the user operates a cloth in a
virtual 3D space as if he/she operated in the real world
and we have already proposed its prototype system. Our
prototype system provides the user with intuitive
operations like cutting, sewing a cloth and fitting it on
the body of a 3D character using a Phantom device [1].
This cloth design system also provides a collaborative
environment that allows two users to perform the
operations collaboratively though the Internet using a
Phantom device [2]. To evaluate the usefulness of the
proposed system, we asked some subjects to try to
practically perform several operations using a Phantom
device and a mouse device respectively [3]. The surgical
simulation system we propose in this paper has been
developed as another application extended from our cloth
design system. Figure 1 shows overview of the proposed
surgical simulation system. The major difference
between the two systems is haptic parameters of a forcefeedback device, i.e., the cloth design system needs
haptic parameters for cloth models and the surgical
simulation system needs different haptic parameters for
skin and internal organ models. In this paper, we call
such haptic parameters ‘haptic materials’. Haptic
materials should be written in the same file of a 3D
model to treat them uniformly among different types of
virtual reality applications supporting a force-feedback
device so that we also propose a COLLADA-based file
format in this paper.
COLLADA is a data format based on XML database
schema to transport 3D asset data between several
applications, and developed as a standard file format for
3D graphics contents. This file format was proposed by
engineers of Sony Computer Entertainment America in
2004. We extend it by adding several new XML-tags for
haptic materials and annotation information.
The
annotation information is used as warning information or
supporting information for helping surgical operators
during his/her surgical simulation or training.

Abstract

This paper proposes a surgical simulation system
that supports a COLLADA file format, which is a XML
based 3D model data format and also proposes its
extended file format to represent various information
useful for the surgical simulation, i.e., several
parameters for a spring model of the skin or the internal
organs used as a haptic device parameters and several
text-based data used as annotations for helping a
surgical operator.
The system provides the user with intuitive
operations such as cutting and sewing operations in a
virtual 3D space using a force-feedback device, Phantom.
A lot of surgical simulation systems supporting a forcefeedback device like Phantom have been proposed so far.
In this paper, the authors propose not only a surgical
simulation system supporting a haptic device, Phantom,
but also an extended COLLADA file format. The
proposed file format can include various additional data
besides 3D model data. This paper introduces the
proposed COLLADA-based file format and clarifies it is
useful for surgical simulators by showing actual
examples using the proposed surgical simulation system.
Keywords--- Surgical simulator, Virtual reality,
Haptic device, XML scheme, COLLADA, Haptic
material, Annotation information, HCI.

1. Introduction
In this paper, we propose not only a surgical
simulator that provides the user with intuitive operations
for cutting and sewing operations using a force feed-back
device like Phantom but also a new COLLADA-based
file format that includes several haptic parameters and
annotation information besides 3D model data.
Recent advances of computer hardware technologies
make it possible to create 3D CG images and 3D CG
animations in real time. On the other hand, as results of
virtual reality researches, various types of virtual reality
peripherals were proposed and most of them exist as
commercial products. In this situation, using these

978-0-7695-3359-9/08 $25.00 © 2008 IEEE
DOI 10.1109/CGIV.2008.55

126

is modeled by Mass-Spring model, and the user can
perform the operation of tearing the tissue. There is
another system that provides functionality to visualize
patient specific organs using 3D image datasets scanned
by Computed Tomography (CT) or Magnetic Resonance
Imaging system (MRI) and that simulates standard
endoscopy procedure [11]. Recent advances of computer
hardware technologies make more intuitive environment
and more realistic simulation available. Practically 3D
model data used in these simulators can be generated
from digital images scanned using CT or MRI so that
those 3D models are very realistic and the user can
perform very realistic surgical operations. There is a
surgical simulation system that introduces real dataset
into a geometric model in its native format for deploying
realistic surgery scenarios [12]. This system navigates a
surgery scenario in the 3D virtual environment and also
conducts the procedure for user training and study.
Although virtual reality technologies occupy the
important part of surgical simulators, augmented reality
technologies are also important because surgical
operations needs a lot of information and augmented
reality technologies augment human ability by providing
additional information such as the annotation. There is a
surgical simulation system [13] that provides a 3D
virtual
environment
using
augmented
reality
technologies. This system aids the surgeon during
his/her surgery by playing a role of an orientation guide
for planning the surgery or altering existing plans
directly. In this way, surgical simulation systems have to
treat a lot of information about a surgery and a XMLbased data format is useful because it is easy to add new
data by employing new XML-tags. Then, in this paper,
we proposed a COLLADA-based file format for surgical
simulation systems.

Figure 1: Overview of the proposed surgical simulation
system. In this system, COLLADA has haptic parameters
and annotation information besides 3D model data.
The remainder of this paper is organized as follows:
First of all, Section 2 describes related work. Section 3
introduces SensAble Technologies Phantom-Omni
device used as a 3D input device of the system. Section
4 explains available operations such as cutting and
sewing necessary for the surgical simulation. These
operations are performed using Phantom in real time. We
introduce a typical COLLADA data format for 3D
graphics contents and propose its extension for haptic
materials and annotation information in Section 5 and 6,
respectively. Finally we conclude the paper in Section 7.

2. Related work
Many researches on the deformable surface
simulation have been done. A cloth simulation is well
known as a representative example of the deformable
surface simulation. We have already developed a cloth
design system that simulates a cloth using Mass-Spring
model [1, 2, 3]. There are many techniques to simulate
such realistic cloth [5]. Those cloth simulations are
effectively to simulate other deformable surface in real
time like skin and so on. As one of the techniques for
the cloth simulation, there is a geometric technique [6].
Recently, physically based cloth simulation is used for
realistic graphics and animations [7]. However, these
techniques are not suitable for real-time applications due
to their heavy calculation. For the real-time cloth
simulation, a B-spline surface based haptic sculpting
system is proposed [8]. By controlling a small number
of control points on a surface of a cloth, the system
simulates the cloth in real time. As similar approach to
this, a particle-based cloth simulation is also proposed
[9]. By controlling a small number of particles, cloth
behavior is simulated at a high speed.
There are various kinds of algorithm and systems of
surgical simulation [9, 10]. Surgical simulators are
effective to train novices of medical doctors for reduce
the risk of surgical operations. There is one of such
surgical simulators for training of the capsulorhexis
procedure during cataract surgery [10]. The tissue of eye

3. 3D input device: Phantom
As a 3D input device which allows the user to
perform some operations of a surgery intuitively, we use
a SensAble Technologies Phantom-Omni device shown
in Figure 2.

Figure 2: A Phantom device produced by SensAble
Technologies.

127

The device mainly consists of a crane-shaped arm with a
pen. Two buttons attached to a grip part of the pen play
roles like two buttons of a mouse device. The Phantom
device is connected to a computer via IEEE1394
interface and sends 3D position and orientation data, i.e.,
6DOF, of the pen tip to the computer as the input.
According to this data, a pointer of a Phantom device
called Phantom pointer moves in a virtual 3D space. The
sampling rate of the device is 1 KHz. The Phantom
device is not only one of the 3D input devices but also a
Haptic device because it generates feedback force to the
user.

implemented in the same way. In this way, only a local
area of a skin or an internal organ can be pulled up by the
pulling operation. If the user wants to move the whole
part, he/she can perform another operation that allows
the user to move the whole part as shown in Figure 5.
All vertices are moved with the Phantom pointer
simultaneously.

4. Operations for surgical simulation
Based on Mass-Springs model, four operations are
available using a Phantom device, i.e., pulling/moving,
cutting, sewing and painting/drawing operation in a
virtual 3D space. The user can perform surgical
simulation through these operations intuitively and
interactively. The basic functionalities about these
operations are derived from our cloth design system [1, 2,
3].

Figure4: Phantom pointer and its effective region.

4.1. Pulling and moving operation
In the pulling operation, if the user pushes a button
of the Phantom device, the Phantom pointer comes to
connect to its nearest neighboring vertex of the surface as
shown in Figure 3, then, a spring force is exerted on each
vertex and increased according to the distance from the
Phantom pointer. Simultaneously the user feels a
feedback force exerted on the Phantom pointer by that
nearest vertex. By this operation, the user can pull any
vertex of a skin or an internal organ.
Figure 5: Moving of a whole part according to Phantom
pointer.

4.2. Cutting and Sewing operation
Figure 6 shows an example of the cutting and
sewing operations. In the cutting operation, the Phantom
device is used to indicate two adjacent vertices, one of
them (a red vertex of the left part) will be divided into
two new vertices (red vertices of the right part) and the
edge between them will be divided into two new edges.
In the sewing operation, if the user pulls a vertex and
move it to another destination vertex, these two vertices
(red vertices of the right part) will be merged into one
vertex (a red vertex of the left part). When this operation
is performed, if an adjacent vertex of the pulled vertex
and an adjacent vertex of the destination vertex are
coincident (a yellow vertex of the right part), the
corresponding two edges are also merged into one edge.
In these ways, the cutting and sewing operations are
performed. Figure 7 shows a screen snapshot of actual
cutting operation.

Figure3: Screen snapshot of pulling operation
There is a problem that the computational cost of
this operation is very heavy and the operation cannot be
performed in real time. To deal with this problem, we
decided to calculate spring-model equation about a small
number of vertices those are located in a small area
around the Phantom pointer as shown in Figure 4 to
reduce the computational cost. Other operations are also

128

scene data, and so on. So, a 3D assets data file of a
certain 3D CG application can not be accepted by other
3D CG applications. If you want to export 3D assets
data of a certain 3D CG application to others, you have
to make exporter functionality as shown in Figure 8.
Even if you could make such exporter functionality,
some information included in the original 3D assets data
file would be lost because 3D assets data are different
among 3D CG applications. To solve this problem,
COLLADA was developed to propose a standard file
format of 3D graphics contents. As shown in Figure 9,
COLLADA makes it possible to transport 3D assets
between 3D CG applications appropriately using XMLtags for each data such as geometry, material and
animation data. For example, there are extra file formats,
COLLADA FX and COLLADA PYSICS for extra data
sets besides geometry, material and animation data.
COLLADA FX enables shaders to be authored and
packaged
using
OpenGL
Shading
Language.
COLLADA PYSICS supports physics simulations.
The structure of COLLADA document is below.
Mainly COLLADA is constructed by three main parts
such as header, library and scene based on XML scheme.

Figure 6: Cutting and Sewing operations.

Figure 7: Snapshot of cutting operation.

<!-- Definition of header -->
<?xml version=”1.0” encoding=”UTF-8”?>
<COLLADA>
<assert>
<created>…</created>
<modified>…</modified>
…
</assert>
<!-- Definition of library -->
<library_geometries>
<geometry id=”geometry_id” name=”geometry” >
…
</library>
<!-- Definition of scene -->
<scene id=”scene_id”, name=”scene”>
<node id=”node_id” name=”node”>
<instance_visual_scene url=”#sample_scene”>
<translate sid=”trans”>
1.0, 1.0, 1.0
</translate>
<rotate side=”rot”>
1.0, 0.0, 0.0
</rotate>
…
</node>
</scene>
</COLLADA>

4.3. Painting/Drawing operation
The system also provides a painting/drawing
operation that allows the user to paint/draw marks or
texts on the surface freely using the Phantom device
based on the texture mapping technology. In this
operation, the Phantom pointer is used to indicate the
location of a virtual pen or a virtual brush. If the use
uses a Phantom device, during the operation, whenever
the Phantom pointer touches a surface, the user feels the
touching feeling by a feedback force of the Phantom
device in the same direction as the normal vector of its
corresponding vertex. The user can draw marks as any
surgery information.

5. COLLADA data format based on XML
scheme
COLLADA was developed by Sony Computer
Entertainment America in 2004 for enhancing the
portability of 3D model data files among several 3D CG
applications. The manual of COLLADA is available by
getting from Internet [14]. A lot of 3D content creation
software will support COLLADA file format because
major 3D content creation software, e.g., 3ds MAX,
Maya, SoftImage XSI have already supported it. Since
COLLADA defines 3D assets by XML-based schema,
using COLLADA it becomes possible to transport 3D
assets between 3D CG applications without any loss of
described information as follows: Usually, each 3D CG
application only supports its original data file format for
its 3D assets including 3D model data, their material data,

129

OpenHaptics API offered by SensAble Technologies.
Although OpenHaptics accepts many kinds of haptic
material, we decided to employ the following parameters
in our system.
<haptic_material>
1. Stiffness: This parameter controls how hard a
surface is. If the user touches the surface of a
3D object, he/she can feel a force feedback from
it.
Tag: <stiffness>…..</stiffness>
2. Damping: This parameter reduces the
springiness of the surface of a 3D object.
Tag: <dumping>…..</dumping>
3. Static friction: This parameter controls how
hard to slide a proxy along on the surface of a
3D object when the proxy starts from its stop
state.
Tag: <static_friction>…..</static_friction>
4. Dynamic friction: This parameter is opposite to
static friction, controls how hard to slide a
proxy along on the surface of a 3D object while
the proxy is moving.
Tag: <dynamic_friction>…</dynamic_friction>
5. Spring and Damping force of a surface: A 3D
object is modeled by Mass-Spring model, so it
has coefficient of spring and damping equations.
Tag: <sd_force>…..</sd_force>
</haptic_material>

Figure 8: 3D assets data exchange between different 3D
CG applications by exporters.

Figure 9: COLLADA enables to transport 3D assets data
seamlessly between different 3D CG applications.

For getting parameters of haptic material, we
developed a simple editing tool for haptic material as
shown in Figure 10. This tool allows the user to edit
haptic material in real time by tracing a surface of a 3D
object using Phantom.

6. COLLADA-based file format extended for
surgical simulation
COLLADA enables to transport 3D assets data
seamlessly between different 3D CG applications
because COLLADA is based on XML scheme, so
various data can be included easily without any
modification of other parts. In this section, we propose
COLLADA-based file format extended for our surgical
simulation.
This section describes proposed
COLLADA-based file format in which it is easy to add
some other data for extending the system. Especially we
propose two XML-tags for Haptic materials data and
Annotation information data.

Figure 10: Screen snapshot of the editing tool of haptic
material.

6.1. Haptic materials
6.2. Annotation information

Our proposed surgical simulation system supports a
Phantom device having force feedback functionality as
its 3D input device. Haptic devices like Phantom need
some parameters to generate feedback force. We call
such parameters ‘Haptic materials’ in this paper. For
example, there is a reflection force when the user touches
a surface of a 3D object and then, the user can feel a
touching force. Each 3D object has specific haptic
material and this information is described using certain
XML-tags in a COLLADA-based data file. We have
been developing our surgical simulation system using

In the surgical simulation system, displaying
annotation information about a surgery target on a screen
like warning text and detail explanation is very helpful
for surgery trainee during his/her surgery training. This
annotation information is unique depending on types of
internal organs or skins, and should be described in the
same data file as 3D geometry data and haptic materials.
Using specific XML-tags in COLLADA, this is possible.
In our surgical simulation system, we implemented

130

functionality to manage annotation information described
in a COLLADA-based data file. Using such annotation
information, when the user performs cutting operation,
the system can warm him/her when his/her operation
target is very dangerous or when his/her operation is
wrong as shown in Figure 11. This functionality is very
useful.

References
[1]

[2]

[3]

[4]
[5]
[6]

Figure 11: Warning functionality of the system using
annotation information described in COLLADA-based
data file.

[7]

7. Conclusions

[8]

We have already proposed a cloth design system that
provides intuitive operations, pulling, cutting, sewing
and painting/drawing, performed using a haptic device
like Phantom. Based on this development experience,
currently we have been developing a surgical simulation
system that provides intuitive operations using a
Phantom device. In this paper, we proposed its prototype
system. Our prototype system not only provides intuitive
operations but also supports COLLADA-based file
format. In this paper, we also proposed an extended
COLLADA-based file format to treat ‘haptic materials’
and annotation information besides standard 3D
geometry data, their materials and animation data. Our
proposed surgical simulation system supports ‘haptic
materials’ and annotation information described in a
COLLADA-based data file and its warning functionality
using annotation information makes the system very
useful for surgery trainees. This paper introduced the
proposed COLLADA-based file format and clarified that
it is useful for surgical simulators by showing actual
examples using the proposed surgical simulation system.
We employed a Mass-Spring model for the
deformation simulation of the system. It needs much
computational cost so that it is impossible for real-time
operations to increase the number of vertices of
deformable target mesh. We have to employ more
efficient deformation model to reduce the computational
cost for real-time operations. We have to prepare
efficient menus and dialogs for our surgical simulation
system to make it practically useful for various users.
These are our future works.

[9]

[10]

[11]

[12]

[13]

[14]
[15]
[16]

131

Miyahara, K., Okada, Y., and Niijima, K. : A Cloth
Design System by Intuitive Operations, Proc. of
International Conference on Computer Graphics,
Imaging and Visualization (CGIV06), IEEE CS Press,
pp. 458-463,July, 2006.
Miyahara, K., Okada, Y., and Niijima, K. : A Cloth
Design System Using Haptic Device and Its
Collaborative Environment, CD-ROM Proc. of the
HAVE'2006-IEEE International Workshop on Haptic
Audio Visual Environments and their Applications, IEEE
ISBN: 1-4244-0761-3, pp. 48-53, 2006.
Miyahara, K., and Okada, Y.: A Cloth Design System by
Intuitive Operations Supporting Mouse Device besides
Phantom Device and Its User Evaluation, to appear in
International Conference on Computer Graphics,
Imaging and Visualization (CGIV07), August (2007).
T. Igarashi and J. F. Hughes, “Clothing Manipulation”,
15th Annual Symposium on User Interface Software and
Technology, ACM UIST’02, pp.91-100, 2002.
P. Volino and N. Magnenat-Thalmann, “Virtual Clothing
Theory and Practice”, Springer-Verlag, 2000.
J. Well, “The Synthesis of Cloth Objects”, Computer
Graphics (Proc. of SIGGRAPH), Vol 20, No. 4, pp.49-53,
1986.
D. Braff and A. Witkin, “Large steps in cloth simulation”,
SIGGRAPH 98 Conference Proceedings, pp.43-4, 1998.
F. Dachille IX, J. El-Sana, H.Qin and A. Kaufman,
“Haptic Sculpting of Dynamic Surface”, Proc. of
Interactive 3D Graphics 1999, pp.103-110, 1999.
Merril JR, Preminger GM, Babayan RK, RoyRT and
Merril GL, “Surgical simulation using virtual reality
technology”, design, implementation and implications,
Surgical Technology International, pp. 53-60, 1994.
R. Friedl, M. B. Preisack, W. Klas, T. Rose, S. Stracke,
K. J. Quast, A. Hannekun and O. Godje, “Virtual reality
and 3D visualizations in Heart Surgery Education”, The
Heart surgery forum #2001-03054, 5(3), pp. E17-E21,
2002.
M. Oshita and A. Makinouchi, “Real-time Cloth
Simulation with Sparse Particles and Curved Faces”,
Proceeding of Computer Animation 2001, pp. 220-227,
2001.
R. Webster, J. Sassani, R. Shenk and G.
Zoppetti,”Simulating
the
continuous
curvilinear
capsulorhexis procedure during cataract surgery”,
Proceedings of the 15th IASTED International
Conference, Modeling and Simulation, pp. 262-265,
2004.
R. A. Robb, “Vurtual endoscopy: development and
evaluation using the Visible Human Datasets”,
Computerized Medical Imaging and Graphics, vol 24, pp.
133-151, 2000.
B. G. Chacko, H. Sawant and S. R. Shankapal, “Virtual
Surgery on Geometric Model of Real Human Organ
Data”, A supplement to IEI News, 2008.
R. Splechtna, A. L. Fuhrmann and R. Wegenkittl,
“ARAS – augmented reality aided surgery system
description”, Technical Report TR VRVis 2002.
KHRONOS group, http://www.khronos.org/collada/

