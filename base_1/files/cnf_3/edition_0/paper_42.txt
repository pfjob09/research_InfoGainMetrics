2012 16th International Conference on Information Visualisation

Heat Map Scope Technique for Stacked Time-Series Data Visualization
Yasuhiro Hashimoto
Graduate School of Frontier Sciences
The University of Tokyo
Kashiwa, Chiba, Japan
hashimoto@vis.k.u-tokyo.ac.jp

Ryo Matsushita
Graduate School of Frontier Sciences
The University of Tokyo
Kashiwa, Chiba, Japan
ryo@vis.k.u-tokyo.ac.jp

Abstract—Multidimensional time-series data is common in
many ﬁelds of study, and to visualize it in a compact space
while retaining dimensional context as much as possible is one
of the conventional and still challenging issues for information
visualization. In this paper, we propose a small technique
for visualizing the detailed pattern of multidimensional timeseries data without losing the sight of the whole trend. In
our system, two well-known techniques of Streamgraph and
Heat Map visual representations are integrated along the lines
of the “focus plus context” philosophy. We demonstrate that
interactive and spatial switchover between both representations
enables us to traverse the data from microscopic to macroscopic
view smoothly.
Keywords-Multidimensional Time-Series Data;
graph; ThemeRiver; Heat Map; Focus+Context;

Stream-

I. I NTRODUCTION
Figure 1. The Streamgraph view (top) and the Heat Map view (bottom).
Left to right is time. The layer in the Streamgraph view and the row in
the Heat Map view correspond to an identical item, where the colors are
grouping of items, and thickness of the Streamgraph layer and opacity of
the Heat Map cell are proportional to the quantity that the item has at a
given time point. These ﬁgures show the historical pattern of quantitative
variation in different manners.

Multidimensional time-series data can be naturally found
in various ﬁelds of human activities such as daily consumption of electricity, a stream of credit card transactions,
a historical frequency of incident occurrences in massive
artiﬁcial systems like power plants, and so on. In the instance
thinking about the power consumption data, the datum at
a given time point means the amount of consumption at
that time, and it could be associated with a lot of other
dimensions such as the followings: which electric appliance
consumed such amount of electricity, what is the utilization
purpose of the appliance, where is it physically located,
who used it, to which organization does he/she belong,
etc. If we would aim at saving energy strategically, and
that is actually one of the contemporary urban issues, it
would be the ﬁrst step to uncover the temporal patterns
of power usage extracting relationships between appliances,
individuals, places, and purposes, for ﬁnding out the waste
to be cut. Visualizing such multidimensional time-series data
in a compact space without losing the dimensional context
is one of the important issues for information visualization.

amount of gross usage. That questions what shape does a
historical trend of our activities have, and the answer brings
a global perspective to our policy making process. The other
is to offer more detailed breakdowns, say how much each
appliance - an air conditioner, a TV, or ceiling lights in a
living room, a bed room, or an ofﬁce - consumes at a given
hour in a given day. Such kind of details gives us a pragmatic
comprehension that will be a help for us in taking concrete
energy saving actions. Both kinds of visual information are
complementary and indispensable. The traditional stacked
graph representation is suitable to be used in the former
case, and the Heat Map representation has been used often
in the latter case[1], [2], [3].
Figure 1 shows above two typical visualizations; the top
one is called Streamgraph[4] that is a sort of the stacked
graph having a well-tuned baseline to reduce the wiggle of
the whole graph shape. The bottom one is the discretized
Heat Map representation that is the well-known technique
to visualize spatially distributed quantities in general. In both

A. Streamgraph and Heat Map
Generally there are two aspects we have in time-series
data visualization: one is to draw a rise and fall of a
summed amount of the quantity what we are interested in.
For instance in the data on household energy consumption,
it is to show the transition of our daily/weekly/monthly
1550-6037/12 $26.00 © 2012 IEEE
DOI 10.1109/IV.2012.53

270

ﬁgures, left to right is a time direction, and four colors
correspond to four groups of items respectively. Here we
number each group 1(blue), 2(green), 3(yellow) and 4(red)
beginning at the top. Each layer shown in the Streamgraph
view or each row of the cells shown in the Heat Map view
corresponds to an identical item associated with a certain
group. In this case, group 1 and 3 contain 5 items, and group
2 and 4 contain 10 items, that there exist 30 layers/rows
in each ﬁgure. For example, the items could be individual
electric appliances, and they could be grouped according to
other associated dimensions such as the owner, the installed
place, the purpose of usage, mentioned in the previous
paragraph. While Streamgraph visualizes the transition of
the target quantity with varying the thickness of the layers,
on the other hand, Heat Map does with varying the opacity
of the cells.
Using the Streamgraph view has an advantage in showing
the historical gross trend clearly, however, it is hard to ﬁgure
out the relationship between items at a given time point or
between time points for a given item. By contrast, using the
Heat Map view enables us to see such detailed pattern of
individual items precisely. Whereas, it is hard to capture the
gross variation for items, for groups, and for the whole. So,
our motivation is to integrate those two styles into one in a
natural way, picking the best parts of both styles. In short,
an interactive and spatially smooth switchover between two
appearances is a key of our “Heat Map Scope” system.

Figure 2. Three newly introduced multidimensional time-series views: the
partial ThemeRiver view (top), the partial Heat Map view (middle), and
the Heat Map Scope view (bottom). In these cases, group 2 is focused.
Slot 1
Group 1
Slot 2

II. H EAT M AP S COPE S YSTEM

Group 2
Group 4

Group 3

Slot 3

Slot 3

The basic idea of our approach is to apply the Heat Map
view partially to the Streamgraph view while retaining visual
continuity such as the Table Lens system[5] does. First,
we transform the Streamgraph view into the ThemeRiver[6]
view by focusing on a certain group (Figure 2: top). Second,
each layer in the focused group is unfolded into multiple
cells making up the Heat Map area (Figure 2: middle). We
name such group-focused views as the partial ThemeRiver
view and the partial Heat Map view respectively. Third, in
addition to focusing on the group, the partial Heat Map
view is extended to narrow down the time scope. This
categorically and temporally focused window is what we
call the Heat Map Scope (Figure 2: bottom).
In the partial ThemeRiver view and the partial Heat Map
view, each group has its own geometric slot (Figure 3),
which is a rectangular area spanning horizontally from the
left end to the right end, in which each visual representation
is positioned. The height of the slot is proportional to the
number of items the group has, and the vertical position is in
the order of a given group index. In the Streamgraph view,
we don’t assume such geometric slot; the whole graph is
arranged in the middle of the whole area.

Figure 3. Geometric slots for locating groups in the partial ThemeRiver
view and the partial Heat Map view. The position of the slot is in the order
of an associated group index, and the height is proportional to the number
of items involved in the group. In this ﬁgure, group 2 is focused, taking a
ThemeRiver layout.

A. The Partial ThemeRiver View
The partial ThemeRiver view is an intermediate state
between the Streamgraph view and the partial Heat Map
view, and it has an advantage in visualizing a temporal
pattern of increase and decrease of the speciﬁcally focused
group. Switching over from the Streamgraph view to the
partial ThemeRiver view is straightforward. If we select a
group, the group gets forming the ThemeRiver layout inside
its own slot, and other groups are simply stacked upon or
beneath the boundary of the ThemeRiver outline.
Each item has the unique identiﬁer i, the index j identifying which group it belongs to, and an array of pairs of time
t and value v(i, t). In the appearances of Streamgraph and
ThemeRiver, visual elements are embodied as path segments

271

Continuous Layers

Discretized Layers

Figure 4. Temporal discretization of the stacked layers in the focused
group. Each rectangle has the same height with the thickness of the layer,
and the same width with the Heat Map cell. The width of the cell equals
to the length of the unit time.
Partial ThemeRiver View
descrete time t
fake cell

Partial Heat Map View
Slot for j

group j

width ~ const.
height ∝ v(i, t)
opacity ~ const. item i

Heat Map cell
Slot for i

width ~ const.
height ~ const.
opacity ∝ v(i, t)

y-position, height, and opacity are
translated. x-position doesn’t change.
t

Figure 6.
Left: Smooth morphing from the partial ThemeRiver view
(top) toward the partial Heat Map view (bottom). The group 2 unfolds
its subordinate layers into Heat Map cells continuously. Other groups just
shift their baseline adjusting to the boundaries of the Heat Map area. Right:
Reverse morphing accompanied by switching of the focused group from 2
to 4.

Figure 5.
The conceptual diagram of the interpolation between the
ThemeRiver layer and the Heat Map cell.

that form the shape of the layer. All segments are calculated
using i, j, t, v: t determines x-position, i and j determine
y-position, and v(i, t) determines the thickness of the layer
i at time t. Transforming from Streamgraph to ThemeRiver
requires all path segments to shift merely their y-positions.
So all we have to do is to calculate the coordinates of all
path segments in each layout in advance, and translate ypositions from those in the original layout to those in the
target layout on demand by choosing the focusing group.
Here it is worthwhile to note that we have to prepare the
layouts of the number of groups in the partial ThemeRiver
view, that is, focusing on the different group needs a different
layout. The Streamgraph view requires only one layout.
Modern visualization environments, such as D3 (Data
Driven Documents)[7] based on standard Web technologies
like CSS3, support animated transition of visual elements in
position, size, color, or many other visual properties, that it
is easy to implement such path transformation in a smooth
way semi-automatically.

have the same width with the Heat Map cell and the same
height with the thickness of the stacked layer at that point.
These fake cells interpolate between two appearances of the
ThemeRiver layers and the Heat Map cells continuously.
Figure 5 shows the conceptual diagram of the interpolation.
There is a correspondence between the time slice of the
stacked layer and the Heat Map cell via the fake cell. Every
fake cell has common width and opacity and individual
height and x-,y-positions adjusting to the shape and the
position of the layer. On the other hand, every Heat Map
cell has common width and height and individual opacity
and x-,y-positions. These two kinds of cells are compatible
each other by translating y-position, height, and opacity.
Figure 6 shows the morphing process from the partial
ThemeRiver view to the partial Heat Map view (left) and
vice versa (right). By selecting the focusing group, the
stacked layers in that group unravel into a number of cells,
shrinking or extending their heights, shifting their vertical
positions, changing their opacities, and ending up to make a
Heat Map tiling with smooth animation. On the other hand
from the partial Heat Map view to the partial ThemeRiver
view, the cells transform in an opposite manner to build up
the layers.
In the Heat Map area, cell opacities are normalized, being
scaled in accord with the maximum value among all visible
cells. Therefore, even though the absolute value of each cell
in the focused group is small, the difference between time

B. The Partial Heat Map View
The visual element that composes the Heat Map area is a
rectangular cell. That is pretty different from a lateral path
sequence used in the stacked layer above. Both kinds of
the visual elements are difﬁcult to be transformed mutually
that we introduce an intermediate state in order to achieve
a continuous transformation between two appearances; the
discretized layer (Figure 4). The discretized layer consists
of a number of rectangles, we call them a fake cell, that

272

R EFERENCES
[1] I. Boyandin, E. Bertini, P. Bak, and D. Lalanne, “Flowstrates:
An approach for visual exploration of temporal origindestination data,” Computer Graphics Forum, vol. 30, no. 3,
p. 971–980, 2011. [Online]. Available: http://dx.doi.org/10.
1111/j.1467-8659.2011.01946.x
[2] C. Yu, Y. Zhong, T. Smith, I. Park, and W. Huang, “Visual data
mining of multimedia data for social and behavioral studies,”
Information Visualization, vol. 8, no. 1, pp. 56–70, Jan. 2009.
[Online]. Available: http://dx.doi.org/10.1057/ivs.2008.32
[3] R. Chang, M. Ghoniem, R. Kosara, W. Ribarsky, J. Yang,
E. Suma, C. Ziemkiewicz, D. Kern, and A. Sudjianto,
“Wirevis: Visualization of categorical, time-varying data from
ﬁnancial transactions,” in Proceedings of the 2007 IEEE
Symposium on Visual Analytics Science and Technology,
ser. VAST ’07. Washington, DC, USA: IEEE Computer
Society, 2007, pp. 155–162. [Online]. Available: http:
//dx.doi.org/10.1109/VAST.2007.4389009

Figure 7.
Another partial Heat Map view (top) and the Heat Map
scope view (bottom), the logical multiplication of group and time period
focusings.

[4] L. Byron and M. Wattenberg, “Stacked graphs &#8211;
geometry & aesthetics,” IEEE Transactions on Visualization
and Computer Graphics, vol. 14, no. 6, pp. 1245–1252, Nov.
2008. [Online]. Available: http://dx.doi.org/10.1109/TVCG.
2008.166

points or between items is relatively emphasized.
C. The Heat Map Scope View

[5] R. Rao and S. K. Card, “The table lens: merging graphical
and symbolic representations in an interactive focus + context
visualization for tabular information,” in Proceedings of the
SIGCHI conference on Human factors in computing systems:
celebrating interdependence, ser. CHI ’94. New York,
NY, USA: ACM, 1994, pp. 318–322. [Online]. Available:
http://doi.acm.org/10.1145/191666.191776

Generally our interest is often in the speciﬁed time period.
For such a purpose, bounding the Heat Map area within a
certain time window is also meaningful. Figure 7 shows the
other two partial Heat Map view styles. In particular, we call
the logical multiplication of both categorical and temporal
focusings as the Heat Map scope (Figure 7: bottom). In
each case, unscoped area is still remaining as in the partial
ThemeRiver layout that the global trend has been kept visible. Furthermore, narrowing down the Heat Map area makes
the normalization of cell opacity work more effectively in
discrimination of cells. We can dynamically open and close
the Heat Map scope where our attention is drawn, which
allows us to look at the same data with different scale of
view within a single-screen view.

[6] S. Havre, P. Whitney, and L. Nowell, “Themeriver: Visualizing
thematic changes in large document collections,” IEEE Transactions on Visualization and Computer Graphics, vol. 8, pp.
9–20, 2002.
[7] M. Bostock, “Data-driven documents,” http://mbostock.github.
com/d3/.

III. C ONCLUSIONS
In this study, we integrated Streamgraph and Heat Map
representations into one system to see the data in a wide
range of point of view in a compact space. To switch
smoothly between different style of view that we newly introduced, visual interpolation was introduced. The Heat Map
scope can show the partial dataset prosaically in contrast
to the whole trend shown by the streaming stacked graph
layout. It is an advantage of this system that we can traverse
the data from the microscopic to macroscopic level in time
scale and the categorical hierarchy within a single screen.
As future work, dynamic categorization, which can bundle
the items into the groups according to arbitrary dimensions
we choose, is one of the prospective functions of the system.

273

