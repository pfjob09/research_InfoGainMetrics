A VRML Interface
for a Knowledge-Based Structural Design System
Jenrrm Wang
Associate Professor
Department of Civil Engineering
Tamkang University
Tamsui, Taipei Hsien, Taiwan, ROC
E-mail: wang@!mail.ce.tku.edu.tw

Yang Wang
Graduate Research Assistance
Department of Computer Science
Tamkang University
Tamsui, Taipei Hsien, Taiwan, ROC
E-mail: wy@mail.ce.tku.edu.tw
This paper discusses how to utility virtual reality
technology to convert the design results of a
knowledge-based structural design system to virtual
scenes. Designers can see the structure in virtual reality,
navigate freely and search for the information they need.
This allows designers to literally see the outcome of
design specifications that are usually difficult to read and
visualize.
The virtual reality technique used in this project is the
Web standard VRML (Virtual Reality Modeling
Language) [lo]. VRML is a 3D graphics file format that
followed a similar model to HTML. That is, a
platform-independent, text-based scene description
language. The final release of the descriptive language is
VRML97 [ l l ] released in 1997. Going through several
revisions, VRML now includes the ability to build, your
own custom behaviors using standard programming
languages.
Plug-in is required for viewing VRML files in
browsers. CosmoPIayer 2.1 [12] released by the Silicon
Graphics is used in this project.
The following sections present the overall system
architecture, introduce the knowledge-based structural
design system and describe the design and
implementation of its virtual reality interface.

Abstract
A variety of computer techrrologies have been applied
to the field of civil engineering t o d q . Visualization of
structural design results focuses on the geometry,
modeling and simulation, ranging from static 2 0 images
to &namic 3 0 graphics. In recent years, advancement in
multimedia, virtual reality and the Internet has given
visual aids of structural design new prospects. This paper
presents the initial results of modeling steel structures in a
virtual reality environment for interactive design
examination and evaluation.
Structural building designs are generated by a
knowledge-based design system and converted to VRML
models automatically, which allows three-dimensional
steel frames to be observed in web browsers. Geometry
and connective relations can Be examined in arbitrary
directions while the user walk through a scene, and
detailed structural analysis and design results can be
queried by touching the structural elements.

1 :Introduction
Virtual Reality is a technique using computer to
simulate the real world and providing interaction. This
technique has two main directions: image reality and
virtual reality. Image reality simulates the real world
based on photo making surrounded effects. As to virtual
reality, rendered images produced by OpenGL [I] like
language can be viewed by self-made browsers, or 3D
scene constructed by descriptive language can be viewed
by Internet browsers.
In the field of civil engineering, virtual reality has
been explored for its usefulness in recent years. Examples
includes: construction visualization [2], architectural
anatomy [3], design check [4], fire escape simulation [5],
triaxial soil testing [6], flow modeling [ 7 ] ,plant layout [SI,
steel structures, construction equipments and material
presentation [SI,etc.

0-7695-1195-3/01
$10.0002001 IEESE

2: System overview
A knowledge-based preliminary structural design aid
[ 131 was developed for earthquake resistance design of

buildings. The knowledge base includes basic structural
design theorem and experiential knowledge of structural
steel design. The system takes several inputs, including
the overall dimensions of the building, earthquake zone,
importance factor, bay size, floor loading conditions and
shear wall location (if any), from the user through
interactive user interfaces. Then the system performs
preliminary structural design for the building according to
the type of lateral load resisting system (either rigid steel

60 1

frame or shear wall) selected by the user. To speed up the
design process, simplified analysis methods and heuristic
rules are used. The outputs of the system are preliminary
design results including the layout of the structural system,
the internal forces of structural elements and the initial
sizing of the elements.
After the system was built, a VRML interface was
developed to enhance the original 2D graphic user
interface. In order to generate the virtual structure
designed by the knowledge-based system, a VRML
constructor was developed. The VRML constructor is
responsible for generating VRML code for a particular
design. After the VRML code is produced, a web browser
can be started to view the virtual scene. Through the
VRML browser, the complete building structure is visible.
Structural elements and their relations can be viewed in
concrete images. The major character of the system is that
the virtual environment is interactive. Detailed design
results can be queried by clicking on the structural
elements.
The major components of the system are shown in
Figure 1. It consists of a knowledge-based designer, a
case-based designer, a design memory, a VRML
constructor and a steel shape database.

provides additional functionality for design searching,
browsing, retrieving, adaptation and saving. Furthermore,
the design memory can be managed through a design
memory manager. By using the case-based design aid,
designers can recall and evaluate past designs in the
design memory to select a better design configuration or
to use a retrieved design result directly at the early stage
of a design. Therefore, preliminary structural design of
buildings can be accomplished efficiently and more
design alternatives can be investigated.
The knowledge-based system is developed in
Intellicorp's Kappa-PC [ 141, an AI software development
environment. Object-oriented programming is the main
methodology used in implementing the system. The
knowledge-based system has generic objects and behavior
procedures (i.e., classes and methods) defmed to
encapsulate structural elements, design analysis, cost
calculation and structural integrity information. On the
other hand, rule-based reasoning is used to process
experiential knowledge. For example, initial parameter
and structural element selections, and design evaluations
are carried out using rule-based reasoning.

3: The knowledge-based design system

In the course of developing the VRML interface, we
considered the following issues:
VR elements: In addition to the essential
structural elements, such as beams (W shape),
columns (Box shape) and shear walls, other
auxiliary
elements,
such
as
ground,
background and light, are required to make the
scene look real. Popup design information
boards are used to display element stress
analysis and sizing results.
Color and efficiency: In virtual reality,
factuality is in conflict with runtime efficiency.
For this reason, we decided to use the
fundamental colors on object surfaces instead
of textural images to ensure smooth operation
of the VRML interface.
View point, color and visual effect:
Perspective representation is usually used in
traditional 3D graphics. However, the users
can move quickly in the virtual space o f a
large building scene. A trick of the senses, loss
a sense of direction and discomfort may
happen. Therefore, we must consider these
effects at the design stage; arrange colors,
display
details
and
moving
functions
accordingly.
Functionality: The missions of the VRML
interface are to evaluate the spatial
functionality of the designs and to examine the
design details. Therefore, it must be easy t o

4: Visualization analysis and design

The
knowledge-based
designer
incorporates
case-independent knowledge to provide design analysis
and evaluation functions. The case-based designer

Design System

Design Memory

Constructor

.

Basic Steel

Property

3D

Geometry

Information

Figure 1. System architecture

602

use and convenient for interactive design data
reviews.
According to the above analysis, the VRML model
has the following components:
Background: Gradual1.y changing color from
blue to white was used as sky, and grass image
texture was used to construct a ground plate.
Viewpoint: Consideririg the convenience o f
operation, viewpoints are predefined for every
floor. Each floor has a viewpoint set in the
center and another set at far. The users can go
to any floor they want quickly by using the
viewpoint list in VRML, browsers.
Beam and Column: Beams and columns are
defined as indexed face sets. Their contour ( I
or box shape) is fixed. Coordinates can be
calculated from element properties. Different
sizes o f structural elements can be generated
using the scale field o f transform nodes.
Rotation and translation fields can be used to
place these elements.
Wall and design information board: The walls
are defined as indexed face sets too. Scale,
rotation and translation are used to place them.
For better overall viewing, we display the wall
semi-transparent. On the other hand, the design
information board must always face the user,
so we use the billboard prototype in VRML.

I

Global

,Beam-Constructor

\

Column-Constructor

,,

Scene-Constructor

‘t

VR-Object

’ Output-Controller

.,

VR-Beam-x

,&VR-Beam-y

<\

VR-Wa’Lx
\ VR-Wall-y

‘

VR-Column

Figure 2. Class hierarchy of the system
background, viewpoints and other interactive
part of the code.
VR-Object is the superclass o f all dynamically
created temporary storage objects.
Output-Controller has methods that control the
whole VRML file generation process. The
phases o f the whole output process include
data initiation, header, sky and ground output,
floor viewpoints setup, elements (i.e., beams,
columns and walls) output, billboard output
and linking, time sensor and JavaScript output
and route statement output.
The original steel shape database used by the
knowledge-based design system was implemented in MS
Excel. Dynamic data exchange (DDE) was used to
exchange information with Kappa-PC under Windows.
The database was extended to include more detailed
geometry data that is required to generate accurate virtual
structures. Two VBA programs were developed to
interface with Kappa-PC to search the database and
calculate additional data required.

5: The VRML constructor
The main tasks of employing VRML to improve
design visualization include: adding more geometric data
into the original steel shape database, setting up a VRML
object database and coding a VRML constructor in the
original system. The VRML coristructor is responsible for
combining the design informati” in the knowledge base
with the geometry data in the shape database to produce
the VRML code for a design.
The VRML constructor is coded in Kappa-PC
integrated with the knowledge-based design system.
Using
an
object-oriented
approach,
the
VRML-Constructor is further divided into subclasses
representing the submodules of the constructor as shown
in Figure 2. Each submodule is responsible for generating
a section of VRML code in the final VRML file. There
are three structural object prototypes used in the system
namely beam, column and wall.
Beam-Constructor is used to output the W
shape section of the beaim in the design.
Column-Constructor is used to output the box
section o f the columns i n the design.
Wall-Constructor is for generating the shear
walls in the structure.
Scene-Constructor is responsible for the

6: The V M L interface
The VRML interface is the post processor of the
knowledge-based design system. It can be invoke when
the interface shown in Figure 3 appears. Press the “VR
Viewer” button, the VRML constructor starts and all the
structural design objects in the knowledge base with their
associated geometry data in the database are transformed
into VRML code using the procedure in Section 5 . A
VRML browser will then be opened to view the design
outcome (see Figure 4). A User can move around in the
virtual structure model and examine the spatial
relationship of the various structural elements from any

603

angle as his desire (see Figure 5). Detailed sizing errors
are much easier to see in the VRML interface (see Figure
6). Shear walls in the system are semitransparent (see
Figure 7) to acquire a better visual effect. Detailed design
information such as forces and dimensions can be
inquired by touching an element (see Figure 8 and 9). A
user can jump quickly to a particular floor using the
viewpoint list (see Figure 10).

Figure 6. A miss sized connection

Figure 7. A structure with shear walls

Figure 3. The original 2D interface

Figure 4. The initial view
Figure 8. Beam design information board

Figure 5. Viewing connections
Figure 9. Column design information b'oard

604

VRML 97 and JavaScript. Only the interface of the
knowledge-based design system needs to be rewritten. To
improve the efficient of the system using dynamic design
information queries, upgrading the database to a
networked database that supports JDBC is necessary.
Moreover, the structural element prototypes can be further
improvement following the examples given in [9].

References
[I]

Laura Lemay, Kelly Murdock, Justin Couch, "3D Graphics

& VRML 2," Laura Lemay's Web Workshop, 1996.

[2] School of Civil Engineering, Georgia Tech, Interactive
Virtual Project, URL: http://www.ce.gatech.edu/Projects/
IViiv.html.

Figure 10. Viewpoint list

7: Conclusions and future work

[3] Steven Feiner, Tony Webster, Ted Krueger, Blair Maclntyre
and Ed Keller, '-Augmented Reality: Viewing Hidden Structural
Systems," URL: http://www.cs.columbia.edu/graphics/projects/
archAnatomy/architecturalAnatomy.html.

In the system, a preliminary design can be suggested
by the knqwledge-based designer or the case-based
designer. No matter how a design is generated, the VRML
constructor can generate the VRML file of the design
dynamically. The VRML interface is very easy to use. It
handles the visualization of the physical building
structures as well as their properties. Also, previous
designs saved in the design meimory can be retrieved by
the case-based designer and presented visually. Designers
can walk-through the virtual buiilding structure and touch
whatever you see for more information. In summary, the
advantages of the VRML interface are:
Realistic spatiality: In the original system,
designs can be numerically rated against
four
major design criteria using a weighted-average
method. The four major indices are symmetric
index, material index, constructability index
and spatial index. With the VRML interface,
spatial index does not have to be a quantitative
value using predefined evaluation rules.
Spatiality can be directly visualized in the
VRML interface.
Discovering
constructability
problems:
Geometric related fabrication and erection
problems can be identified in the virtual scene
very easily.
Modularized
program
elements:
Object-oriented knowledge representation in
the original system makes the addition o f the
VRML constructor easy. The information
needed to form the VRML objects for the
building scene is conveniently located in the
corresponding objects of the structural
elements in the k n o w k d g e base. Additional
geometric information (can be calculated and
retrieved from the steel shape database.
Next phase of the project is to port the whole system
to the web. The VRML interfixe was constructed by

[4] B. Moller and K. Menzel, '-Virtual-Reality-Supported
Engineering Design Check," Proceedings of Sixth lnternational
Conference on Computing in Civil and Building Engineering.
Berlin, Germany, 1995. pp. 88 1-886.
[5] Naai-Jung Shih and Chih-hsiang Yang. "A Application
Study of VR in the Dynamic Simulation of Fire Egreess Routc."
Proceedings of the Conference on Computer Applications in
Civil & Hydraulic Engineering, 1997, pp. 235-246.
[6] Pedro Arduino, Augusto Op den Bosch, Emir Jos Macaru,
'Geotechnical Triaxial Soil Testing within Virtual
Environment," American Society of Civil Engineers. 1997.

I

[7] H. C. Lien, F. P. Lin. L. C. Lee, C. H. Chang. C. C. Liu, W.
F. Tsai and C. Y Shen. "Application on River 3D Modeling and
Virtual Reality," Proceedings of the 1 l t hf-lydraulic Engineering
Conference, Taipei, Taiwan. 2000, pp. €37-B 12.
[8] Jurgen Gausemeier, Holger Krumm, Thorsten Molt. Peter
Ebbesmeyer and Peter Gehrmann , "A Database Driven Server
For An Internet Based Plant Layout Presentation System."
Proceedings of VRML 2000, Monterey, CA USA, 2000, pp.
17-22.
[9] Robert Lipman and Kent Reed. "Using VRML In
Construction lndustry Applications," Proceedings of VRML
2000, Monterey, CA USA, 2000, pp. 119-125.
[IO] Andrea L. Ames, David R. Nadeau, John L. Moreland, The
VRML 2.0 Sourcebook, John Wiley & Sons, New York, 1997.

[I I] "Web3D
Specifications:
VRML
http://www.vrml.org/fs_specifications.
htm

97,''

URL:

[I21 Cosmo Player, URL: http://www.cai.comi cosmo/
[ 131 Wang, Jenmu, "A Knowledge-Based Consultant for
Preliminary Structural Design of Buildings,'' Proceedings of the
Seventh International Conference on Computing in Civil and
Building Engineering. Seoul. Korea. 1997. UP.
. . 1377-1382.
[I41 Kappa-PC User k Glide, IntelliCorp, Inc., 1992
L

605

V

