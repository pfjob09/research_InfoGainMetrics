Fifth International Conference on Computer Graphics, Imaging and Visualization
Visualisation

Position Error Inspection for Mounting Wafer in Cleaning Device
Jung Woo Lee*, Liliana*, Byung-Gook Lee*, Joon-Jae Lee**
*Division of Computer Information Engineering, Dongseo Univ.
**Dept. of Game & Mobile Contents, Keimyung Univ.
{leejw1478@dit.dongseo.ac.kr, lilian@petra.ac.id, lbg@dongseo.ac.kr, joonlee@kmu.ac.kr}

2. Structure of cleaning system

Abstract

The wafer cleaning system uses an arm robot to put
a wafer on a distinct place inside a chamber. Inside the
chamber also placed a camera to capture the wafer. If
the camera is placed above the wafer’s place, the arm
robot will struck it when puts the wafer. So, the camera
must be positioned at upper corner of the chamber.
Beside the camera, the next important component is
lamp. Without lamp, the captured image will be not
bright enough. Moreover, if the captured image is too
bright, the image processing will be fail to identify the
wafer because it looks white. Also the wafer is a
reflectance object, so it easy to reflect the lamp. So, the
lamp can not be positioned near enough to the wafer.
To avoid the undesired conditions, the lamp should be
positioned below and not parallel to the camera. Then
the light still has a problem to solve, making wafer’s
shadow. Shadow will make the image processing
detects the wrong shape of the wafer. To chase out this
matter, we place two lamps in two side of the chamber.
One lamp is below the camera and the other is in the
opposite side. These two lamps will change the each
umbra shadow to penumbra. The penumbra shadow’s
color is easy to separate with the wafer because of the
contrast color. The entirely chamber’s arrangement can
be seen in figure 1.

Recently, many inspection systems are using
computer vision technology. We also use computer
vision to recognize the position error for mounting a
wafer in a cleaning process of the semiconductor
production processes. The robot moves wafer to the
cleaning chamber. But sometime, the robot puts the
wafer into an incorrect location. In this case, incorrect
position becomes cause of the cleaning system trouble
or the wafer’s broken.
In this paper, we propose a position error
recognition system using multiple cameras based on
Giga Ethernet in multi-cleaning system. This is
carried out by capturing image by high frame rate,
followed by doing calibration and image processing to
check the wafer’s position before the cleaning process
starts. If the robot puts the wafer in the incorrect
location, the machine stops the cleaning process. So,
we can prevent the wafer from being broken or the
machine from being disturbing the cleaning process.

1. Introduction
One of the cleaning wafer processes is washing the
wafer. There will a robot’s arm moves the wafer into
the cleaning chamber and puts it in a distinct place.
Sometimes, the robot’s arm will put the wafer into the
wrong position. It doesn’t mean it puts into another
place, but does not really match to the proper place. If
the wafer isn’t put to the proper place, the wafer will
be broken or the machine will stop. The machine’s
stopping will make the production quality bad. So, we
don’t need this case happens. It’s important to check
weather the position of the wafer is correct or not
before start the washing process.
To see the position of the wafer, it uses camera to
capture the wafer image. The captured image will be
used in calibration and image processing. After this
calibration, it gets the wafer’s position exactly.

978-0-7695-3359-9/08 $25.00 © 2008 IEEE
DOI 10.1109/CGIV.2008.23

Figure 1 Structure of cleaning system

280

3. Calibration
Because the camera is positioned in the upper
corner, it captured a shared image of the wafer. This
needs calibration process to map the shared image into
the original image. We use chessboard pattern captured
image for the calibration’s input. In this system, used
7x7 cells chessboard with size 3x3 cm each cells.
Actually, the chessboard has the same size as the wafer.
Given the chessboard image, first step is finding every
inside corners of all the cells. The captured image of
the chessboard will be like in figure 2.

Consider a point P (u , v ) in the world coordinate.
And point Q ( x, y ) in the image pixel coordinate. Our
goal in this section is to recover the mapping
from Q ( x, y ) become P (u , v ) . Calibration’s formula
will be as equation 1. [1][2]

(u , v)

(

D1 x  D 2 y  D 3 D 4 x  D 5 y  D 6
,
)
D 7 x  D8 y  D9 D 7 x  D8 y  D 9

(1)

Use equation 1 to look for every D values. Since the
coordinates have already known, the get the values,
equation 1 can be turn into equation 2.

§ uw ·
¨ ¸
¨ vw ¸
¨w¸
© ¹

§ D1 D 2 D 3 ·§ x ·
¨
¸¨ ¸
¨ D 4 D 5 D 6 ¸¨ y ¸
¨ D D D ¸¨ z ¸
8
9 ¹© ¹
© 7

(2)

Actually, in the same way equation 2 can be change
into equation 3.
Figure 2 Chess Board Wafer
When the machine starts the washing process, the
robot will move the wafer and out in the same place
with the chessboard. To get all the acquire corner of
the chessboard, we use OpenCv library. In our
designed system, we get 36 acquire corners after the
calibration, which looks like in figure 3.

D1 x  D 2 y  D 3  uD 7 x  uD 8 y  uD 9 0
D 4 x  D 5 y  D 6  uD 7 x  uD 8 y  uD 9 0

Equation 3 can be written in matrix form in equation 4.

ª x1 y1
«0 0
«
«. .
«
«. .
«. .
«
«. .
«x y
« n n
¬« 0 0

1 0
0 x1
. .
. .
. .
. .
1 0
0 xn

0 0 u1x1 u1 y1
y1 1 v1x1 v1 y1
. .
.
.
. .
.
.
. .
.
.
. .
.
.
0 0 un xn un yn
yn 1 vn xn vn yn
A

Figure 3 Acquire Corner

(3)

ªD º
u1 º « 1 »
D
v1 »» « 2 »
«D »
. »« 3»
» D
. »« 4»
«D » 0
. »« 5»
» «D »
. »« 6»
D
un » « 7 »
» «D »
vn ¼» « 8 »
¬D9 ¼

D

In equation 4, simply can write A D =0. This is a
satisfy condition to get D . In equation 1, exactly,
coordinate (u, v) can be get from the calibration
process. But, actually, it’s difficult to get D from
A D =0. So, just find the D values which make the

281

A D nearest to zero. After that we use the
calibration parameter.

D value as

Figure 5 Chess Board Wafer
When the chessboard is not put well like shown in
figure 5, because the robot puts the chessboard with
random direction and makes some rotation and share, it
cause the inside corner coordinates searching will be
very difficult. It also causes a great possible to be
wrong in indexing the coordinates.

We can calculate the eigen value and eigen vector
through transposition matrix multiply with covariant
matrix. After that, we will find A D which is nearest to
zero. Each the 9 of eigen values are corresponded with
each 9 of eigen vector set. The eigen vector is
corresponded the eigen value which has the smallest
eigen value using D in equation 1. so, we can get the
calibration parameters, and after that the calibration
parameters are saved until another calibration uses
them. As shown on figure 3, you can see the result of
the mapped points of an image.

Figure 6 Acquire Corner
If the index numbers of the coordinates don’t
correct, the calibration also cannot be done well. For
example, figure 7 shows the mismatch chessboard
coordinates. The small circles represent the original
coordinates and the dots represent the actual
coordinates. Logically, we cannot correlate each small
circle with which dot.

Figure 4 Calibration Image

4. Problem and solution of calibration
Using the common method, calibration can be
done. The matter happens when the robot moves the
chessboard wafer and puts it in the unknown direction
like shown in figure 5. It is because we cannot control
the robot to see the direction of the chessboard before
puts it in the wafer’s place.

Figure 7 Calibration Image
Because of the matter, we must find a method can
solve the matter properly. The method we develop in
this system is triangulation chessboard. Using the
corner coordinates, we can make edges of every two
coordinates and faces of every three edges. The result
of the triangulated process can be seen in figure 8.[3]

282

Figure 10 Calibration image

Figure 8 Triangulation
To find the correct index of the all coordinates,
first find the boundary edges. The boundary edges just
correlate with two faces. Start from the lower corner
vertex, which has just two degrees. The vertex’s index
should be zero. Continue in any direction, either
vertical or horizontal, find the next boundary vertexes
based on the boundary edges. After finish indexing a
row, delete the finished indexing row. Then, continue
with the same way for the next row. Using this
method we can find all the corner coordinates and
index them.

5. Registration
After finish the calibration process, chessboard wafer
is moved out. In this condition, inside the cleaning
system there is nothing. This is the good situation for
the camera to capture the background image. Later,
when we subscript the real wafer image, we will use
this image as reference. Figure 11 shows the captured
background image.

Figure 9 shows the correct coordinates’ index
found using the triangulated method.

Figure 11 Calibration Image
After finish capturing the background image, the real
wafer moves into the cleaning system. As the
compared object, the wafer must put in the correct
position. Then, using the camera, capture the wafer
image, shown in figure 12.

Figure 9 Calibration
Given the correct coordinates’ indexes, it possible
to calibrate the shared image of the chessboard and
map it into the desired form, seen in figure 10.

283

Figure 12 Wafer Image

Figure 14 Threshold Image

Using the background captured image and wafer
captured image, search the same background. Figure
13 shows the result of subscription figure 12 with
figure 11.

Given the binary image, compare the black area of the
wafer with the white area of the same wafer in binary
image. Using this method can get the boundary line of
the original wafer, see figure 15.

Figure 13 Difference Image

Figure 15 Edge Extraction
But, the result in figure 15 is not circle. That’s
an ellipse. Using the parameters found from the
previous calibration process, the ellipse mapped into a
circle, like seen in figure 16. By getting the circle
shape, the radius, center point and all the boundary
coordinates can be calculated well.

In figure 13 we can see some noise around the wafer.
The wafer boundary cannot be detected clearly. To get
the true shape, change the image in figure 13 into
binary image. The real black pixel will turn into
0(zero) value and the other will be set into 1. The
binary image from figure 13 can be seen in figure 14.

284

Figure 16 Transformation Image

Figure 17 Transformation Image

After finish the transformation, the center point
must be saved. Therefore, when the other wafer moved
into the cleaning system, it can be compared with the
saved coordinate.

the other wafer will be cleaned with the registered
coordinates. Finally, we can calculate how much the
error position of the wafer.

Acknowledgement

6. Recognition process

This research was financially supporting by the
Ministry of Education, Science Technology (MEST)
and Korea Industrial Technology Foundation
(KOTEF) through the Human Resource Training
Project for Regional Innovation, Cronic Vision
Corporation.

Calibration process produces the coefficient
parameters which used in registration process involves
capturing the background image and original wafer.
The final product of the registration is the center
point’s coordinate of the proper place where the wafer
must be put. Then, the robot will automatically put
wafer into the cleaning chamber. Actually, the robot
cannot put the wafer into the exactly same place. There
will be some distortion. For example, figure 17 shows
the distortion may happen.

8. References.
[1]

K. Taniguchi and S. Tatsumi, “A detection method for
irregular lightness variation of low contrast,” IEEE
Systems, Man and Cyber-netics, Vol.7, pp. 6401-6406,
2004..".
[2] F. H. Y. Chan, F. K. Lam and H. Zhu, ˈ Adaptive
thresholding by variational method, ˉ
IEEE
Transactions on Image Processing, Vol.2, No.3, pp.
168-174, March

Before the cleaning process run, system will compare
the wafer position with the proper position calculated
before. With tolerated distortion 15mm, the machine
will run the cleaning process, otherwise, the machine
will stop.

7. Conclusion

[3]

R.Sukthankar, R.Stockton and M. Mullin "Smarter
presentations: Exploiting homography in cameraprojector system." In Proceedings of the International
on Computer Vision, 2001
[4]
R.Sukthankar, R.Stockton and M. Mullin "SelfCalibration Camera-Assisted Presentation Interface.".
[5] G. Leach, “Improving Worst-Case Optimal Delaunay
Triangulation Algorithms”, proceedings of the 4th
Canadian Conference on Computational Geometry,
340-346, June 1992.

In the cleaning wafer system, wafer will put by the
robot, but the robot will put the wafer into a not
exactly same place. To avoid the broken wafer because
of the distortion place, we propose the calibration
method. First, we capture the chessboard image on the
wafer place. Because the robot puts the chessboard
randomly, must use calibration to find all corner
coordinates of the chessboard. Then, the coordinates
will be use to register the center point, radius and the
boundary coordinates of the original wafer. So, we can
compare

285

