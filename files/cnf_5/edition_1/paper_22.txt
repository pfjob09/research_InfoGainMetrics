2011 Eighth International Conference Computer Graphics, Imaging and Visualization

A Projection Profile-based Algorithm for Content-aware Image Resizing
1

Cheng-Hung Chuang, 2Zhi-Ping Li, 3Guo-Shiang Lin, 4Wei-Chih Shen
Dept. of Computer Science and Information Engineering, Asia University, Taiwan
3
Dept. of Computer Science and Information Engineering, Da-Yeh University, Taiwan
{1,2chchuang@asia.edu.tw, 3khlin@mail.dyu.edu.tw, 4wcshen@gmail.com}
1,2,4

However, the main problem of this method is the
structure misalignment or shape destruction in the
resultant images, e.g. discontinuous stems, twisted tires,
or distorted faces.
After that, a number of methods have been proposed
to improve the seam carving scheme. The wavelet
analysis is employed in the computation of energy maps
to acquire HVS perception [3]. A multi-resolution
representation for image resizing is performed by using
the wavelet transform to preserve important image
content [4][5]. Some methods try to maintain the shape
or structure of the image objects when images are
rescaled [6][7][8]. For example, a registration technique
is adopted to align object structure [8]. The stream
carving, which uses wider seams, combined with the bidirectional search and the adaptive importance map leads
to visually better results [9]. The improved seam carving
algorithm which incorporates anti-aliasing and
thresholding techniques is proposed and gains superior
performance [10].
Unlike seam carving, warping-based methods
[11][12] place a grid mesh onto the image and then
compute a new geometry for this mesh. The mesh
elements covering important image content remain
unchanged while those covering insignificant image
content become deformed. Since the change of mesh
elements is not in accordance with the geometry of the
image objects, the geometric distortion caused by the
deformed mesh elements occurs frequently, e.g. a person
with a big head and a small body. The key issue of
warping-based image resizing is how to preserve the
object structure geometry.
In this paper, we propose a projection profile-based
algorithm for content-aware image resizing to overcome
the problems of image misalignment and geometric
distortion. Assume that the energy map is sufficient to
describe the image importance. The energy values are
summed up along the vertical or horizontal direction to
get a projection profile of energy map. Then nonuniform
scaling is performed based on the projection profile. That
is the image is stretched or shrank nonuniformly
according to the projection profile in the vertical or
horizontal direction. Since the vertical and horizontal
lines are consistent, the problems of image misalignment

Abstract
In this paper, a projection profile-based algorithm is
proposed for content-aware image resizing. First, an
energy map which describes the image important parts is
calculated by an image energy function. Then the
algorithm uses horizontal and vertical projection profiles
of the energy map to gather importance statistics. Thus,
different scaling of the image content is extracted. By
this way, the discontinuity that usually occurs in the
results of seam carving is overcome. Experiments show
that the proposed method is capable of yielding some
good results.

1. Introduction
Due to the advancement of multimedia technology
and the popularity of image capture and display devices,
the number of image and video data increases
explosively. Furthermore, since these image and video
data are portable and easy to transfer, they often need to
be displayed in different devices with different aspect
ratios. In general, the image aspect ratios can be adjusted
by the uniform scaling approach. However, this method
often results in the image content deformation such as
fatter or thinner objects. In order to avoid the object
deformation, the cropping method [1] is a simple way to
change image sizes. Nevertheless, this method discards
data around the image boundary, which is easy to lose
some important content of images. Therefore, contentaware image retargeting techniques have been the focus
of attention.
Recently, a new technique known as seam carving
[2] is proposed to resize images to meet different aspect
ratios. This method computes an energy map by
extracting image gradient features and finds out a
connected seam with minimal energy. By removing the
seam one by one or inserting seams, the image can be
adjusted to fit the target aspect ratio and size. Because
the image content of removed or newly added seams is
insignificant, the important content can be preserved.

978-0-7695-4484-7/11 $26.00 © 2011 IEEE
DOI 10.1109/CGIV.2011.43

125

and geometric distortion will be reduced. In the next
section, the proposed method is described. Section 3
shows some experimental results to demonstrate the
performance of the proposed method. Finally, Section 4
provides some conclusions and future work.

2. The proposed method
There are two main steps to resize images. First is
the extraction of an importance or saliency map. The aim
of this step is to evaluate important or unimportant parts
of the source image. The second step is the retargeting
strategy which resizes an image from the original size to
target one, e.g. seam carving or warping-based methods.
In our preliminary research, we focus on the retargeting
strategy, i.e. the projection profile-based algorithm. The
procedure, which includes the extraction of energy map,
the computation of energy projection profiles, and the
non-uniform scaling, is described as follows.

(a)

2.1. Energy map
The energy map, which computed from the energy
function, is used to find a seam for carving [2]. The
energy map is similar to an importance or saliency map
which can be used to describe image content. It is usually
extracted from the image gradient or saliency map. The
image gradient denotes the appearance of structures,
while the saliency map extracted from color, intensity
and orientation features represents the importance of a
region. In this step of our method, image gradient is
adopted as the significant feature of image content.
Assume that the source image is denoted as I. The image
gradient G is computed as follows.

G



I 
I ,
x
y

(1)

(b)
Figure 1: (a) The source image “Toji Temple”; (b) its
energy map and energy projection profiles.

where x and y denote horizontal and vertical coordinates.
The Sobel operator is achieved for the calculation of
discrete image gradient. Assume that the horizontal and
vertical masks of Sobel operator are denoted as Mx and
My. The Equation (1) can be rewritten as below.
G  Mx*I  My*I ,

2.2. Energy projection profiles
The concept of our method is to extract a 1-D
feature from the energy map. This 1-D feature can be
used for image stretching or shrinking without
misalignment. To map the 2-D data of energy map to a
1-D feature, a projection profile-based algorithm is
employed. Let I be a source image of m columns (width)
and n rows (height), i.e. the image size is m × n (width ×
height). The energy projection profiles are composed of
horizontal and vertical projection profiles. The horizontal
projection profile is the sum of energy values
perpendicular to the horizontal coordinate, i.e. x axis,
while the vertical projection profile is the sum of energy
values perpendicular to the vertical coordinate, i.e. y axis.
The horizontal and vertical projection profiles are
defined, respectively, by Eh of size m and Ev of size n as
follows.

(2)

where * indicates the 2-D convolution operation. The
energy map E is obtained from the normalized image
gradient feature.
E

G
,
max(G )

(3)

where max(.) represents the maximum function. Figure 1
shows the source image “Toji Temple” (1600×1200) and
its energy map.

126

n

E h (i )   E (i, j ) , i  1,2,..., m

to scale with the same scaling factors; however, each
pixel on the row (column) is scaled with different scaling
factors.
Figure 3 shows an illustration of the restricted
nonuniform warping. The source image size is 4×4 pixels
and it is resized to 3×4 pixels for horizontal resizing. The
numbers on the source image are scaling factors for each
pixel. That is, the numbers represent the pixel widths in
the target image, i.e. 1 means to keep the same width and
0.8 and 0.2 denote image shrinking rates. Therefore, the
total width of the target image is 1+0.8+0.2+1=3 pixels.
To obtain the new grayscale values, the linear
interpolation algorithm is applied. Assume that the
grayscale values on the second and third columns in the
source image are p and q, respectively; then the
grayscale value on the middle column in the target image
is 0.8×p+0.2×q.

(4)

j 1

m

Ev ( j )   E (i, j ) , j  1,2,..., n

(5)

i 1

Figure 1 shows the energy horizontal and vertical
projection profiles. However, the high-frequency parts of
the energy projection profiles may cause a non-smooth
image warping. To reduce high frequencies, a lowpass
filter is applied to the energy projection profiles. In our
method, the mean filter is used to soften Eh and Ev.
E h  f m (k )  E h ,

(6)

E v  f m (k )  E v ,

(7)

where fm(k) is the 1-D mean filter and its kernel size is k
× 1, and  denotes the 1-D convolution operation. The
larger the size of the mean filter, the more pronounced its
effects. Figure 2 shows the smoothed energy horizontal
and vertical projection profiles of the source image “Toji
Temple”.

Figure 3: An illustration of the restricted nonuniform
warping.
Assume that the source image size is m × n and the
target image size is m' × n', where m'≠m and n'≠n , For
computing the scaling factors from the smoothed energy
horizontal and vertical projection profiles, first we set
horizontal and vertical range parameters to adjust the
warping scope, i.e. rx and ry in the following equations.
These parameters can be controlled by users. The larger
the range parameter is, the more global warping its
effects. Accordingly, the horizontal and vertical warping
ranges, wx and wy, are computed as follows.

Figure 2: The smoothed horizontal and vertical
projection profiles of the source image “Toji Temple”.
Next, we sort the smoothed horizontal and vertical
projection profiles in ascending order according to the
magnitude of energy.
~
(8)
E h  sort ( E h ) ,
~
Ev  sort ( Ev ) ,

(9)

wx  ( m  m ) rx ,

where sort(.) indicates the sorting function. The aim of
this step is to find out image rows or columns with
smaller energy values. The lower energy suggests a
larger deformation on the image rows or columns.

2.3. Nonuniform warping

(10)

where m  m  wx  m and 1  rx 

m
when the
m  m

image

is

0  wx  m

0  rx 

m
m  m

shrunk

horizontally;

when

the

image

is

and

expanded

horizontally.

The warping-based methods usually put a grid mesh
onto the image and dynamically rescale mesh elements.
The main problem of this kind of methods is the image
misalignment caused by the inconsistent deformation of
mesh elements. To reduce the image misalignment, the
proposed method maintains the consistency of each
orientation perpendicular to the scaling direction. That is,
when the image is resized in the horizontal (or vertical)
direction, each row (or column) of the image is restricted

w y  ( n  n )ry ,

(11)

where n  n   w y  n and 1  ry 

n
when the
n  n

image

0  wy  n

is

shrunk

vertically;

and

n
0  ry 
when the image is expanded vertically.
n  n
127

That is, the non-warping or stationary ranges are m – wx
and n – wy in the source image. Now, the horizontal and
vertical warping locations on the source image can be
obtained as follows.
~
(12)
Rx  {k Eh ( k )  Eh (i ), i  1,2,..., wx } ,
~
R y  {l Ev (l )  Ev ( j ), j  1,2,..., wy } ,

(13)

(a)

where Rx and Ry denote the sets of horizontal and vertical
warping locations, respectively.
Afterward, we compute horizontal and vertical
energy bias parameters to estimate the pixel widths, i.e.
 x and  y in the following equations.

 ( m  m )(rx  1)
, when m  m

w
~

E
(
i
)

h

i 1
x  
,
 ( m  m )(rx  1) , when m  m
w

~
Eh (i )


i 1

x

(b)
(14)

Figure 4: (a) The scaling factor profile and resized
image in horizontal direction (where rx is set to 3); (b)
The scaling factor profile and resized image in vertical
direction (where ry is set to 2.7).

x

 ( n  n )(ry  1)
, when n  n
 w
~

E
(
j
)
  v
 y   j 1
.
 ( n  n )(ry  1) , when n  n
 w ~
  Ev ( j )
 j 1

3. Results

y

To verify the performance of the proposed method, a
lot of images are examined. Some of them are sampled in
this section. Table 1 shows the image size information
for experiment. For comparison with other methods, the
"Seam-Carving-GUI" program [13] which is an
implementation of the seam carving algorithm [2] is
downloaded and executed. For fair comparison of our
results and those of seam carving, the edge detector in
the Seam-Carving-GUI program is set to the Sobel such
that the items of energy maps are the same. Figures 5 to
11 show the comparison of our results with those of the
seam carving algorithm. Both two methods all have good
results and unacceptable ones. Therefore, we cannot
categorically conclude which method is better than the
other. However, we provide another warping-based
method using the energy projection profiles for image
retargeting.

(15)

y

In the above equations, the numerator denotes the
variation of image width or height between the source
and target images; while the denominator indicates the
total energy of those row or column candidates for
warping. The energy bias parameter indicates the scaling
factor per unit energy value. That is, the product of the
energy bias parameter and the energy value means the
scaling factor of an image row or column. Finally, the
scaling factors for each row or column can be computed
as follows.

 E (i), where i  Rx
sx (i)   x h
, i  1,2,..., m
 1, where i  Rx

(16)

 E ( j ), where j  Ry
sy ( j)   y v
, j  1,2,..., n
 1, where j  Ry

(17)

Table 1: Image size information for image resizing.
Target Size
Original Size
Image No.
(width × height) (width × height)
600×600
800×600
1
400×300
400×500
2
375×375
500×375
3
×
580
540×580
378
4
730×738
486×738
5
1200×1200
1600×1200
6
350×466
700×466
7

where sx and sy represent the horizontal and vertical
scaling factors for each image column and row,
respectively. Figure 4 shows the horizontal and vertical
resizing with different scaling factors. The source image
“Toji Temple” (1600×1200) is resized to 1200×1200 and
1600×900.

128

Original image (No. 1)

Seam carving

Original image (No. 4)

Seam carving

Our results (left rx = 2; right rx = 4)
Our results (left rx = 1.5; right rx = 2.3)

Figure 5: Comparison of our results with the result of
seam carving. (Image No. 1)

Figure 8: Comparison of our results with the result of
seam carving. (Image No. 4).

Original image (No. 2) Seam carving

Original image (No. 5)

Seam carving

Our results (left ry = 1.5; right ry = 2.5)
Figure 6: Comparison of our results with the result of
seam carving. (Image No. 2).

Our results (left rx = 1; right rx = 1.9)
Original image (No. 3)

Figure 9: Comparison of our results with the result of
seam carving. (Image No. 5).

Seam carving

Our results (left rx = 2; right rx = 4)
Figure 7: Comparison of our results with the result of
seam carving. (Image No. 3).
129

improvement of energy map extraction and the
application to video resizing.

Acknowledgements

Original image (No. 6)

This research was supported by the National Science
Council, Taiwan, under the grants of NSC99-2221-E468-022.

Seam carving

References
[1]

[2]

Our results (left rx = 3; right rx = 4)

[3]

Figure 10: Comparison of our results with the result of
seam carving. (Image No. 6).

[4]

[5]

Original image (No. 7)

[6]

Seam carving

[7]
[8]

Our results (left rx = 1.5; right rx = 2)

[9]

Figure 11: Comparison of our results with the result of
seam carving. (Image No. 7).
[10]

4. Conclusions
This paper presents an energy projection profilebased algorithm for content-aware image resizing. The
proposed method utilizes the energy map, which
describes the significance and insignificance of image
content, and computes energy projection profiles. Based
on the nonuniform warping scheme, an image can be
dynamically resized while the problems of image
structure misalignment, shape destruction, and the
geometric distortion can be reduced. The future research
work of the proposed method will focus on the

[11]
[12]

[13]

130

G. Ciocca, C. Cusano, F. Gasparini, R. Schettini. SelfAdaptive Image Cropping for Small Displays. IEEE
Transactions on Consumer Electronics, Vol. 53, No. 4,
pp. 1622-1627, 2007.
S. Avidan and A. Shamir. Seam carving for contentaware image resizing. ACM Transactions on Graphics,
Vol. 26, No. 3, Article 10, 2007.
Jong-Woo Han, Kang-Sun Choi, Tae-Shick Wang, SungHyun Cheon, Sung-Jea Ko. Wavelet based seam carving
for content-aware image resizing. In Proceeding IEEE
International Conference on Image Processing, pp. 345348, 2009.
D. D. Conger, H. Radha, M. Kumar. Seamlets: Contentaware nonlinear wavelet transform. In Proceeding IEEE
International Conference on Acoustics Speech and
Signal Processing, pp. 1450-1453. 2010.
D. D. Conger, M. Kumar, H. Radha. Generalized
multiscale seam carving. In Proceeding IEEE
International Workshop on Multimedia Signal
Processing, pp. 367-372. 2010.
Shu-Fan Wang and Shang-Hong Lai. Fast structurepreserving image retargeting. In Proceeding IEEE
International Conference on Acoustics, Speech and
Signal Processing, pp. 1049-1052, April 2009.
G. X. Zhang, M. M. Cheng, S. M. Hu, and R. R. Martin.
A Shape-Preserving Approach to Image Resizing.
Pacific Graphics 2009, Vol. 28, No. 7, 2009.
Hyung Il Koo, Jung Gap Kuk, Nam Ik Cho. Eliminating
structure misalignments using robust matching and
image editing based on seam carving. In Proceeding
IEEE International Conference on Image Processing, pp.
209-212, 2009.
Daniel
Domingues,
Alexandre
Alahi,
Pierre
Vandergheynst. Stream carving: An adaptive seam
carving algorithm. In Proceeding IEEE International
Conference on Image Processing, pp. 901-904, 2010.
D. D. Conger, M. Kumar, R. L. Miller, J. Luo, H. Radha.
Improved seam carving for image resizing. In Proceeding
IEEE Workshop on Signal Processing Systems, pp. 345349. 2010.
Ran Gal, Olga Sorkine, Daniel Cohen-Or. Feature-aware
texturing. In Proceedings of Eurographics Symposium on
Rendering, pp. 297–303, 2006.
Yu-Shuen Wang, Chiew-Lan Tai, Olga Sorkine, and
Tong-Yee Lee. Optimized Scale-and-Stretch for Image
Resizing. ACM Transactions on Graphics, Vol. 27, No. 5,
Article 118, Dec. 2008.
seam-carving-gui, A GUI for Content Aware Image
Resizing
(Retargeting,
Seam
Carving).
url:
http://code.google.com/p/seam-carving-gui

