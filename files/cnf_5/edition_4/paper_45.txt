Using Image Processing Technique for the Studies on
Temporal Development of Air Quality
C.J. Wong, M. Z. MatJafri, K. Abdullah, H. S. Lim and K. L Low
School of Physics, Universiti Sains Malaysia, 11800 USM, Penang, Malaysia.
Tel: +604-6533888, Fax: +604-6579150
{E-mail: wongcj@usm.my, mjafri@usm.my, khirudd@usm.my, hslim@usm.my,
bennywt@gmail.com}
Abstract
Nowadays visual information becomes more and
more important in almost all areas of our life. This
information is represented and processed digitally.
Digital image processing is ubiquitous, with applications
ranging from television to tomography, from
photography to printing, from robotics to remote
sensing. In this study, we developed an algorithm to
convert multispectral image pixel values acquired by an
Internet Video Surveillance camera into quantitative
values of concentrations of particulate matter with
diameter less than 10 micrometers (PM10). This
algorithm was based on the regression analysis of
relationship between the measured reflectance
components from a surface material and the atmosphere.
The newly developed algorithm can be applied to
compute the PM10 values. These computed PM10 values
were compared to other standard values measured by a
DustTrakTM meter. The correlation results showed that
this newly develop algorithm produced a high degree of
accuracy as indicated by high correlation coefficient (R2)
of 0.7566 and low root-mean-square-error (RMS) values
of ±3.8306 μg/m3. A program was written by using
Microsoft Visual Basic 6.0 to download still images
automatically from the camera via the internet and
utilized the newly developed algorithm to determine
PM10 concentration automatically and continuously.
This study indicates that the technique of using Internet
Video Surveillance camera images can be a useful tool
for monitoring temporal development of air quality.
Keywords--- Air Pollution, PM10 concentration,
Digital Camera, Internet Video Surveillance,
Multispectral Image.

1. Introduction
The continuous and rapid evolution of digital
technologies in the last decade fostered an incredible

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

amount of research and development in image processing
technique. A number of image processing techniques are
key elements of applied visual information research. In
particular, image registration is a fundamental image
processing technique, which has numerous applications
to visual information research, in addition the more
traditional application domains such as remote sensing.
Other image processing techniques, such as image
compression, are also relevant to the handling of large
numbers of images for visual information research.
Image understanding refers to automated extraction of
information from images.
The objective of this study is to develop an unique
image processing technique for enhancing the capability
of an internet video surveillance (IVS) camera for real
time air quality monitoring. This technique is able to
detect particulate matter with diameter less than 10
micrometers (PM10). An empirical algorithm was
developed and tested based on the atmospheric
characteristic to determine PM10 concentrations using
multispectral data obtained from the IVS camera. A
program is developed by using this algorithm to
determine the real-time air quality information
automatically. This development showed that the modern
Information and Communications Technologies (ICT)
and digital image processing technology could monitor
air quality at multi location simultaneously from a
central monitoring station.

2. Brief Description of the Algorithm
In this study, a new algorithm for generating a
unique image processing mechanism was developed. We
developed this algorithm based on the fundamental
optical theory, such as light absorption, light scattering
and light reflection. This is a modified version of the
model developed by Ahmad and Hashim [1], which uses
the skylight to indicate the existence of haze. Skylight is
an indirect radiation, which occurs when the radiation
from the sun being scattered by elements within the air

pollutant column. Figure 1 shows electromagnetic
radiation path propagating from the sun towards the
digital camera penetrating through the atmospheric
pollutant column.

Rr =

τ r Pr (Θ)
4μ s μ v

(2)

where τr is the aerosol optical thickness (Molecule),
Pr( Θ ) is the Rayleigh scattering phase function, µv is
the cosine of viewing angle, and µs is the cosine of solar
zenith angle.
We assume that the atmospheric reflectance due to
particle, Ra, is also linear with the τa as shown by King,
et al. [3] and Fukushima, et al. [4]. This assumption is
valid because Liu, et al., [2] also found the linear
relationship between both aerosol and moleculur
scattering.

Ra =

τ a Pa (Θ)
4μ s μ v

(3)

where τa is aerosol optical thickness, Pa( Θ ) is aerosol
scattering phase function.
Atmospheric reflectance, Ratm is the sum of
reflectance from particles, Ra and reflectance from
molecules, Rr as shown by Vermote, et al. [5].
Ratm = Ra + Rr

(4)

where Ratm is atmospheric reflectance, Ra is particle
reflectance, Rr is molecule reflectance
By substituting equation (2) and equation (3) into
equation (4), we obtain

R atm =
Figure 1

The
skylight
parameter
model
(Source: Modified after Ahmad and
Hashim, 1997)

1
4μ s μ v

[τ a Pa (Θ) + τ r Pr (Θ)]

The optical depth, τ given by Camagni and Sandroni
[6] as expressed in equation (6) and equation (7).

τ = σρ s
The reflectance recorded by the sensor of an internet
video surveillance camera is
Rs = Rref + Ratm

(1)

where Rref is the reflectance from a known reference (in
this case, a distant green vegetation), and Ratm is the
reflectance from atmospheric scattering.

2.1. Algorithm Model
The atmospheric reflectance due to molecule, Rr, is
given by Liu, et al.[2],

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

(5)

(6)

where τ is optical depth, σ is absorption, ρ is density and
s is finite path.
and

τ =τa +τ

r

(7)

The optical depths for the atmosphere particles and
molecules can be written as equation (8)

τ a = σ a ρa s
τ r = σ r ρr s

(8a)
(8b)

Equations (8) are substituted into equation (5).

Ratm =

s
4 μ s μv

[σ a ρ a Pa (Θ) + σ r ρ r Pr (Θ)]

3. Methodology
(9)

Ratm, σa, σr, P a( Θ ) and Pr( Θ ) are dependent on
wavelength, λ, thus equation (9) can be expressed as

Ratm (λ ) =

s
4μ s μ v

[σ a (λ )ρ a Pa (Θ, λ ) + σ r (λ )ρ r Pr (Θ, λ )]
(10)

when ρa is particle concentration (PM10), P and ρr is
molecule concentration, G. Equation (10) can be written
as equation (11)

Ratm ( λ ) =

s
4μ s μv

[σ a (λ )PPa (Θ, λ ) + σ r (λ )GPr (Θ, λ )]

3.1. Experiment Set-Up
An Internet Video Surveillance (IVS) camera,
designed as state-of-the-art air quality remote monitoring
sensor, was used for monitoring the concentrations of
particles less than 10 micrometers in diameter. It is a 1.0
mega pixel Charge-Couple-Device CCD camera, allows
image data transfer over the standard computer networks
(Ethernet networks), internet. Figure 2 shows the IVS
camera used in this project.
The schematic set-up of the IVS camera is shown in
Figure 3. This set-up provides a continuous, on-line,
real-time monitoring for air pollution at multiple
locations. It is able to immediately detect the present of
particulate air pollution, in the air and helps to ensure the
safety of environmental air for living creatures.

(11)
The result was extended to a two bands algorithm as
shown in equation (12).
Ratm (λ1 ) =

s
4μ s μ v

[σ a (λ1 )PPa (Θ, λ1 ) + σ r (λ1 )GPr (Θ, λ1 )]
(12a)

Ratm (λ2 ) =

s
[σ a (λ2 )PPa (Θ, λ2 ) + σ r (λ2 )GPr (Θ, λ2 )]
4μs μv
(12b)

where Ratm(λi) is atmospheric reflectance, i = 1, 2 are the
band numbers and aj is algorithm coefficients, j = 0, 1
are then empirically determined.

Figure 2

Internet Video Surveillance
camera used in this study.

(IVS)

Figure 3

The schematic set-up of IVS camera
as remote sensor to monitor air
quality

Solving equation (12a) and (12b) simultaneously and we
obtain particle concentration of PM10, P as

P = a 0 R atm ( λ 1 ) + a 1 R atm ( λ 2 )
(13)
Equation (13) showed that PM10 was linearly
related to the reflectance for band 1 and band 2. This
algorithm was generated based on the linear relationship
between τ and reflectance. Retalis et al. [7] also found
that the PM10 was linearly related to τ and the
correlation coefficient for the linear model was better
than exponential. This means that reflectance was linear
with PM10. In order to simplify the data processing, the
air quality concentration was used in our analysis instead
of using density, ρ, values.

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

3.2. Study Area

The coefficients of calibrated digital camera are

The camera was installed within the premises of
Universiti Sains Malaysia’s campus at longitude of 1000
17.864’ and latitude of 50 21.528’ as shown in Figure 4.
We used green vegetation as our reference target (Figure
4 & Figure 5).
Cameras install at
the top floor of
School of Physics

y1 = 0.0005x1 + 0.0432
y2 = 0.0006x2 + 0.0528
y3 = 0.0003x3 + 0.0311
where
y1
y2
y3
x1
x2
x3

Reference Target

Figure 4

Atmospheric
pollutant
coloum

R=

Es(λ)

The digital image captured by internet
video surveillance camera in this
study

4. Data Analysis and Results
Figure 5 shows a sample from the digital images
captured by the internet video camera on 16 Oct 2006
from 8.00am to 5.30pm. The target of interest is the
green vegetation grown on a distant hill. Digital images
were separated into three bands (red, green and blue).
Digital numbers (DN) of the target were determined
from the digital images for each band. Equations 9, 10
and 11 were used to convert these DN values into
irradiance.

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

y(λ )
Es ( λ )

(12)

where
y (λ)

Figure 5

= irradiance for red band (Wm-2 nm-1)
= irradiance for green band
(Wm-2 nm-1)
= irradiance for blue band
(Wm-2 nm-1)
= digital number for red band
= digital number for green band
= digital number for blue band

A handheld spectroradiometer was used to measure
the sun radiation at the ground surface. The reflectance
values were calculate using equation (12) below.

Location of the installation of internet
video surveillance camera

Reference Target

(9)
(10)
(11)

= irradiance of each visible bands
(Wm-2 nm-1)
= sun radiation at the ground surface
using a hand held spectroradiometer
(Wm-2 nm-1)

The reflectance recorded by the IVS camera was
subtracted by the reflectance of the known surface
(equation 1) to obtain the reflectance caused by the
atmospheric components. The relationship between the
atmospheric reflectance and the corresponding air quality
data was established by using regression analysis. The
correlation coefficient (R2) between the predicted and the
measured PM10 values, and root-mean-square-error
(RMS) value were determined. Figure 6 shows the
correlation graph of the estimated measurement from the
IVS camera with the actual measurement from the
Dusttrak meter. The correlation coefficient (R2) produced
by the IVS camera data set was 0.7823. The RMS value
for IVS camera was ±3.8238 μg/m3.

Conclusions

Correlation Graph of Estimated Measurement
with Actual Measurement For IVS Camera

This study has showed that by using image
processing technique with new developed algorithm,
internet video surveillance cameras can be used as
temporal air quality remote monitoring sensors. It
produced real time air quality information with high
accuracy. This technique uses relatively inexpensive
equipment and it is easy to operate compared to other air
pollution monitoring instruments. This showed that the
IVS camera imagery gives an alternative way to
overcome the difficulty of obtaining satellite image in
the equatorial region and provides real time air quality
information.

55

IP Camera Estimated Measurement (μg/m3)

2
R

= 0.7823

RMS = 3.8238 μg/m3

50

45

40

35

30

25

Acknowledgements

20

15
20

25

30

35

40

45

50

3

Dusttrak Meter Measurement (μg/m )

Figure 6

Correlation coefficient and RMS error
of the measured and estimated PM10
(μg/m3) value for calibration analysis
on IVS camera

The temporal development of real time air pollution
in a day measured by IVS camera and a Dusttrak meter is
shown at Figure 7. The data were obtained on 16 Oct
2006 from 8.00am to 5.30pm.
PM10
concentration
(μg/m3)

This project was carried out using the Universiti
Sains Malaysia short term grant. We would like to thank
the technical staff who participated in this project.
Thanks are extended to USM for support and
encouragement.

References
[1]

[2]

[3]

[4]

[5]

[6]
[7]

Figure 7

Graph of PM10 concentration versus
Time (16 Oct 2006)

Computer Graphics, Imaging and Visualisation (CGIV 2007)
0-7695-2928-3/07 $25.00 © 2007

Ahmad, A and Hashim, M., “Determination of Haze
from Satellite Remotely Sensed Data: Some Preliminary
Results”, 1997. [Online] available:
http://www.gisdevelopment.net/aars/acrs/1997/ps3/ps301
1.asp.
Liu, C. H., Chen, A. J. and Liu, G. R., “An image-based
retrieval algorithm of aerosol characteristics and surface
reflectance for satellite images,” International Journal Of
Remote Sensing, 17 (17), 3477-3500, 1996
King, M. D., Kaufman, Y. J., Tanre, D. dan Nakajima,
T., “Remote sensing of tropospheric aerosold form
space: past, present and future, Bulletin of the American
Meteorological society, 2229-2259, 1999.
Fukushima, H., Toratani, M., Yamamiya, S. and Mitomi,
Y.,
“Atmospheric
correction
algorithm
for
ADEOS/OCTS acean color data: performance
comparison based on ship and buoy measurements.”
Adv. Space Res, Vol. 25, No. 5, 1015-1024, 2000.
Vermote, E., Tanre, D., Deuze, J. L., Herman, M. dan
Morcrette, J. J. “6S user guide Version 2, Second
Simulation of the satellite signal in the solar spectrum
(6S)”, 1997.
http://www.geog.tamu.edu/klein/geog661/handouts/6s/6s
manv2.0_P1.pdf.
Camagni, P. and Sandroni, S., “Optical Remote sensing
of air pollution”, Joint Research Centre, Ispra, Italy,
Elsevier Science Publishing Company Inc. 1983.
Retalis, A., Sifakis, N., Grosso, N., Paronis, D. and
Sarigiannis, D. “Aerosol optical thickness retrieval from
AVHRR images over the Athens urban area” 2003.
http://sat2.space.noa.gr/rsensing/documents/IGARSS200
3_AVHRR_Retalisetal_web.pdf

