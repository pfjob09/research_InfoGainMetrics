Interactive Visualization Method for Exploratory Data Analysis
Mitsunori Matsushita
NTT Corp.
Communication Science Labs.
2-4 Hikaridai, Seikacho, Sorakugun, Kyoto, Japan
mat @cslab.kecl.ntt.co.jp

Abstract

Raw
Data

Data
Table

Visual
Structure

W

We propose an interactive visualization niethod suitable
f o r exploratory datu analysis. In this type of data analysis,
statistical charts are employed to help the user understand
the target data, arid a displaycpd chart is redrawri interactivel) according to the user’s input inspired by looking at
the chart. Two factors niiist be considered if the chart is
to be suituhly redrawn: the type of chart displayed and the
parts of the chart that are chatfged by the user’s input. We
developed our proposed niethod based oti these factors. As
theJrst step of the nietliod, the part to change and the details to nieet the giveri user’s input f o r the displayed chart
are interpreted. Then, n seniantic franie used to generutr
a statisticul chart froni data is updated by the resiilts ofthe
ititerpretation, and several candidutes as appropriate charttypes are chosen based on tlieJ5-anieand chart-type deterniiriation rules. Fitid!\; the most preferable chart is chosen
froni among the candidutes arcording to the type of user itiput, arid the displaj.ed chart is trzinsfornied into a new chart
with ariinintiori. BJ.using this nietkod, data cuti be visualized inteructiveljs according to the change of the user’s
viewpoitit iiv’tliout in ferriipting the thitikirig process.

Data
Process

Transformation

t

W

v
t%
;l gmg

t

View

W
View
Transformation
Process

t

Human Interaction

Figure 1. Reference model for visualizing
data. Human interaction changes the parameters of each process.

chart is first generated by the selection and aggregation of
raw data in the data transformation process. The data table is then transformed into a visual structure that combines
spatial substrates, marks, and graphical properties in the visual mapping process. Finally, a view of the visual structure
is created by specifying graphical parameters such as the
position, scaling, and clipping in the view transformation
process.
The user interacts with each process to control its parameters by, for example, restricting the view to certain data
ranges or changing the nature of the transformation.
Many techniques have been proposed to reduce the load
of the user interaction in each process: For example, there
are techniques for facilitating data selection in the data
transformation process [ 1 , 31, techniques for selecting chart
type and visual components (e.g., line style, point face, axis
range) automatically in the visual mapping process [5, 41,
and techniques for changing visual effects to clarify the
user’s viewpoint and assertion easily [7] in the view transformation process.
With these techniques, it is largely assumed that there
is direct interaction with each process, as with conventional visualization techniques. In particular, GUIs are often adopted to assist these interactive operations. However, such direct interaction with each process via a CUI
is not as effective as it looks because the users must un-

1. Introduction
Improved computer performance levels and the enrichment of nctwork infrastructures mean that users can now
share a wide variety of enormous amounts of data and use
this data according to their needs. To enable them to analyze
these huge amounts of data, users often employ visualization techniques including the use of statistical charts such
as line, bar, and pie charts.
When users draw charts from raw data, they usually execute three processes, namcly, data transformation, visual
mapping, and view transformation. Figure 1 shows the basic reference model for visualizing data [2]. According to
the model, the data table that i:; needed when drawing a

0-7695-1195-3\01 $10.00 0 2001 IEICE

Tsuneaki Kat0
The University of Tokyo
Graduate School of Arts and Sciences
3-8- 1 Komaba, Meguroku, Tokyo, Japan
kato@boz.c.u-tokyo.ac.jp

671

Place

Measuring date

Precipitation

(prefecture)

(year-month-day)

(mm)

Figure 2. Example charts. Chart (b) is appropriate when user requirements (1) and (2)
are sequentially given, whereas chart (c) is
appropriate when user requirement (4) generated by (1) and (2) is given.

dertake various tasks such as selecting the necessary data
from raw data, verifying the completeness and coverage of
the selected data, and choosing a chart type suitable for the
features of the data and the user’s own intention. In other
words, the load of the user to convert from “what to draw”
(which the user is originally requesting) to the parameters
necessary to draw the chart still remains.
Therefore, as the quality of the obtained chart depends
on the user’s ability, the chart is likely to be inappropriate.
Such direct interaction also tends to be inefficient when
users analyze data in an exploratory manner. In such an
analysis, the user generally redraws the chart to reflect a
new viewpoint inspired by the current chart drawn by a certain viewpoint. With this approach to using the chart, the
user’s load increases since each process has to be repeated
for each redrawing.
To overcome these problems, we propose a visualization
method that extracts drawing parameters from a series of
user requirements written in a natural language, and redraws
the chart according to the change of the user’s viewpoint
interactively.

What was the precipitation of the Shikoku’ district in
1993 and 1994?
Change the granularity to prefectures.
Change the range until 1997.
The first sentence, i.e., user requirement ( I ) , is called
the initial user requirement and the remaining sentences are
called additional user requirements.
It is first assumed that user requirement ( I ) is given as
the initial user requirement. Since the chart that satisfies the
requirement is, for instance, chart (a) in Figure 2, that chart
is drawn first.
Then, suppose that the user adds requirement ( 2 ) to the
current drawn chart because of a change in hisher viewpoint. Since the additional user requirement indicates a request to change the granularity of place into prefecture, a
stacked bar chart where each bar in the displayed chart is
subdivided as shown by chart (b) in Figure 2 might be appropriate as the newly drawn chart.
By applying the method of understanding fragmentary
utterances [8], which is a conventional technique in natural
language processing, the series of these user requirements
is interpreted as the following user requirement (4) in the
aggregate.

2. Characteristics of interactive chart drawing
In this section, we first point out the difference between
the way fragmentary utterances in natural language processing and the sequential user requirements for interactive
drawing are understood. Then, we discuss the points that
should be considered when a chart is selected in accordance
with a series of user requirements.
In this paper, we use data on the daily precipitation in
individual prefectures in Japan as shown in Table 1 as an
example of raw data. The relationship of the data is “place
x measuring date + precipitation”, that is, “precipitation”
is a dependent attribute and its value is specified by two
independent attributes, i.e., “place” and “measuring date.”
We assume that the following series of user requirements
is sequentially given for this data.

(4) What is the precipitation of each prefecture in the
Shikoku district in 1993 and 1994?
‘Shikoku is a district in the southern Japan that consists of four prefectures: Kagawa, Tokushima, Kochi, and Ehime.

672

However, if this user requirement were to be individually
given as the initial user requirement, an appropriate chart
would be chart (c) rather than chart (b) in Figure 2.
Two reasons can be considered.
The first is the difference in the user’s interest: When
user requirements (1) and (2) are sequentially given, chart
(b) in Figure 2 is more appropriate since the user’s interest
regarding the annual precipitation of the entire Shikoku district is described in user requirement (1) and the interest can
be understood intuitively from the chart. By contrast, when
user requirement (4) is given, chart (c) in Figure 2 clearly
shows that the precipitation in each prefecture is preferable
since the above user’s interest is not described, only an interest about the precipitation in each prefecture is described
in the user requirement (4).
The second reason involves the shape similarities between the charts: In Figure 2, sinise charts (a) and (c) greatly
differ while charts (a) and (b) are similar, the correspondence of the visual components between charts (a) and (c)
cannot be easily judged immediately. In this respect, chart
(b) seems to be more suitable than chart (c) when drawn
after chart (a).
From the above discussion, it can be said that an appropriate chart cannot be determined solely by the method of
understanding fragmentary utterances.
Accordingly, we examine what should be considered to
select a chart along a series of user requirements.
Suppose that the user adds user requirement (5) shown
below after initial user requiremtmt (1).
( 5 ) Change the granularity to season.

In this case, since the granularity of the time axis becomes
finer as a result of the additional user requirement, a simple
bar chart with a finer z axis such as chart (d) in Figure 2
might be more appropriate than <a stacked bar chart such as
chart (b).
Although both additional user requirements (2) and (5)
acquire the same expression of “Change granularity to . .’’
and both of them are requests that make the granularity of
the drawing object in the respective chart finer, the appropriate chart is different. This is because the axis is made
finer (i.e., from year granularity to season granularity) for
the latter while the drawing object is made finer (i.e. from
district granularity to prefecture granularity) for the former.
Therefore, only interpreting that a requirement makes
something finer is insufficient for clarifying the relationship
between an additional user requirement and an appropriate
chart; it is necessary to specify 1.he part to change and the
details of the additional user requirement.
Moreover, an appropriate newly drawn chart might differ from the current chart type even if the same additional
user requirement is given. When such an additional user
requirement is given by which displayed data is added, a

clustered bar chart might be more appropriate if the current
chart is a simple bar chart, or a plural line chart might be
more appropriate if the current chart is a simple line chart.
Accordingly, in order to select a chart newly drawn as
the result of an additional user requirement, it is necessary
to consider the current chart type.
By considering the above, we propose a method of drawing appropriate charts successively in accordance with a series of user requirements.

3. Chart generation from a series of user requirements
We have already shown that information necessary to
draw a chart can be acquired in the form of a semantic
frame from a user requirement expressed in a natural language, and have proposed a method for extracting the semantic frame [6].
In this section, we propose a method that deals with a series of user requirements based on the frame. First, we describe the semantic frame briefly, then describe the change
in the frame according to the transition of the requirements
and a method for determining an appropriate chart as a result of the change.

3.1. Frame representation of user requirement
This semantic frame has several lines depending on the
user’s requirement. Information about one drawing object
is represented in one line. One drawing object relates to one
attribute in raw data. Therefore, the number of lines must
not exceed the number of attributes in the raw data.
The frame consists of five slots: VAR, ATTR, MEAS,
GRANU, and REST. The following briefly describes each
slot.
The slot value of VAR is a unique identifier of a drawing
object .
The A7TR slot takes the name of a drawing object as a
slot value. The name of each drawing object corresponds
to an attribute in raw data. All drawing objects are determined by the noun phrases in the user’s requirement. For
instance, in the initial user requirement ( I ) , nouns such as
“precipitation,” “Shikoku district,” “1993,” and “1994” appear in the requirement because these nouns correspond to
attributes such as “precipitation,” “place,” and “measuring
date.”
The GRANU slot takes the granularity of a drawing object. The raw data is aggregated into a suitable granularity
based on the slot value of GRANU in order to absorb the
difference between the user’s required granularity and the
raw data’s granularity. For instance, user requirement (1) requires information about the district granularity for “place.”

VAR
ATTR
X
measuring date
place
Y
Z

precipitation

MEAS
date
nominal
numerical

3.2. Chart-type determination from an additional
user requirement

GRANU
REST
X = (1993,1994)
year
district y, E Shikoku district
mm

Based on the considerations in Section 2, the following
processes are necessary to draw an appropriate chart from
an additional user requirement under the condition of obtaining a frame like that in Figure 3 from an initial user
requirement.

Figure 3. Frame representation of the initial
user requirement (1)

(9. The part to change and the details to meet the additional user requirement for the current displayed chart
are interpreted.

MEAS indicates the measure type of a drawing object.
It is used to determine which drawing object is related to
a non-key attribute in raw data. It is also used to choose
appropriate chart types. In this method, “nominal,” “date,”
“numerical,” “interval,” and “order” can be taken as slot values of MEAS.

REST indicates the restrictions of a drawing object mentioned in a user’s requirement and is used to choose the necessary data tuples from raw data. For instance, in user requirement ( I ) , as the user’s interest is limited to the Shikoku
district as the “place,” tuples concerning other districts such
as the Kanto district are unnecessary. In addition, the user’s
interest is also limited to the period from 1993 to 1994 for
the “measuring date.”

(ii). A semantic frame used to generate a statistical chart
from data is updated by the results of process (i),
and several candidates are chosen as appropriate chart
types based on the frame and chart-type determination
rules.
(iii). The most appropriate chart is chosen from among the
candidates obtained in process (ii) according to the
type of user requirement, and the displayed chart is
transformed into a new chart with animation.
The details of each process are as follows.
(i) First, the part to change and the details in the chart
caused by the additional user requirement are interpreted.
Since the additional user requirement is given based on
the current chart, it can be thought that the user mentions
only the point to change, and information not referred to in
this additional user requirement can be considered as unchangeable from the information currently being displayed.
For instance, it can be assumed that the user only inputs
“Change granularity to prefecture” by omitting information
“Shikoku region of 1993-1994” when chart (a) in Figure 2
is the currently displayed chart.
When such an additional user requirement is interpreted,
the following should be considered:
As mentioned in Section 2, an appropriate chart differs
depending on the part that needs changng and the details
caused by the given requirement even if the requirement belongs to the same pattern.
Moreover, even if the same requirement such as “Change
granularity to prefecture” is given, the requirement is interpreted as a request to change to a coarser granularity when
the current chart is drawn in the city granularity. By contrast, it is interpreted as a request to change to a finer granularity when the current chart is drawn in the district granularity. This example means that it is necessary to refer to
the current semantic frame in addition to the interpretation
of the additional user requirement.
Based on a consideration of these points, an additional
user requirement is interpreted in the following.

Based on the above definitions, initial user requirement
(1) is, for instance, converted into the form of the semantic
frame shown in Figure 3.
In Figure 3, since drawing objects X and Y correspond
to independent attributes in raw data, either X or Y is
adopted as the z axis of the chart depending on the following process. The drawing object adopted as the z axis is
called the “z axis object” and the other is called the “depicted object.”
Drawing object 2 corresponds to a dependent attribute in
raw data and is adopted as the y axis. This drawing object
is called the “dependent object.”
Based on the information in the frame, the data table
shown in Table 2 is obtained by applying the data aggregation algorithm [6] to the raw data based on the information described in this frame. Then, a suitable chart for the
initial user requirement is drawn by applying the chart-type
determination rules [9] to the obtained data table.

Table 2. Data table generated by the frame in
Figure 3

Shikoku district

1993

1994

8840

4323

674

Table 3. Correspondences of changing parts in frames to various changes

I

Requirement pattern

I

Show transition

Object to change

I

Details of the change

11

Part to be changed in frame

I

none

1

change to line chart

I1

none

I

I 13 I

(iii) Then, an appropriate chart style is determined from
the chart-type candidates obtained above by considering the
current chart type and the pattern of the additional user requirement.
We created a relation diagram of the change from a certain chart to other charts as shown in Figure 4, focusing on
the similarities between chart types and the ordinary way of
using the charts.2 The numbers in the figure are the same as
the numbers in Table 3
This figure shows that when the current chart is a single line chart, a single line chart is appropriate as the newly
drawn chart if the given additional user requirement is classified into pattern I , 3, 5 , or 7 in Table 3. A plural line chart
is appropriate if the requirement is classified into pattern 2
or 6, and a single bar chart is appropriate if the requirement
is classified into pattern 12.
For example, when chart (a) in Figure 2 is drawn by initial user requirement (I), a plural line chart, a clustered bar
chart, and a plural stacked bar chart are chosen as chart type
candidates on the basis of additional user requirement (2)
as mentioned above. Since additional user requirement (2)
is classified into pattern 6 in Table 3, a plural stacked bar
chart is chosen as the most appropriate chart by looking up
Figure 4. Therefore, chart (b) in Figure 2 is obtained.
The above processes enable us to select an appropriate
chart. We will integrate the method into the visualization
system named KEVIN [6].3
We have pointed out that the ease of correspondence of
the visual components drawn in the charts is a criterion for
choosing an appropriate chart in Section 2. To improve the
distinguishability of the correspondence of the visual com-

We focused on seven patterns of additional user requirements consisting of “add . . -,” “delete . . “change granularity . . .,” “change axis . .,” “show ratio . . .,” “show quantity . . .,” and “show transition . . .’’ as typical requirements
and these requirement patterns were classified .into 13 detailed patterns as shown in Table 3.
The user requirement is interpreted by looking up the table: “The requirement pattern” is determined from the user
requirement’s sentence, “the obdiectto change” determines
which drawing object is mentioned in the requirement, and
“the details of the change” are determined by comparing
the given requirement and the current semantic frame.
s,”

a

(ii) Next, the frame is change’d based on “the object to
change” and “the details of the change” acquired by the previous process. The rightmost column in Table 2 shows the
part that should be changed in the frame.
For instance, additional user requirement (2) is interpreted as pattern 6 in Table 2. According to pattern 6, “the
object to change” is the depicted object and “the details of
the change” indicate changing to a finer granularity. Accordingly, the slot value of GRAIW of drawing object Y is
changed.
Based on the semantic frame updated by this process,
possible chart candidates are detixmined by looking up the
chart determination rules. In this research, the charts that
can be chosen are a simple bar chart, a clustered bar chart,
a stacked bar chart, a 100% stacked bar chart, a line chart, a
pie chart, and a multiple pie char[:.
When the semantic frame is updated by additional user
requirement (2), three charts, a plural line chart, a clustered
bar chart, and a plural stacked bar chart, are chosen as chart
type candidates.

’According to the pie chart and multiple pie chart, we treat the radius
direction as the z axis direction.
‘The current system can handle Japanese sentences only.

675

line chart
(single)

12

single bar chart

9

stacked bar chart
(single)

2,61

10

100% stacked bar
chart (single)
equal

3,7

327

1-9

1-9

Jan

rcb

Mar

Jm kh I\.hr i\p

&x

line chart
(plural)

clustered bar
chart

Jon

k b Mar Apr

stacked bar chart
(plural)

pie chart

1, 5

1-9

Jm

I& h l u

\p

100% stacked bar
chart (plural)

multiple
pie chart

Figure 4. Relation diagram of statisticalcharts. Each number corresponds to the detailed requirement
pattern in Table 3

121 S. K. Card, J. D. Mackinlay, and B. Shneiderman, editors.
Readings in Iifonnation Visunli~ation - Using Vision To
Think -_Morgan Kaufmann Publishers, 1999.
131 M. Derthick, J. Harrison, A. Moore, and S. E Roth. Efficient
multi-object dynamic query histograms. In Proc. IEEE ltlforrnatiori Visualization Conference, pages 84-0 I , 1999.
[4] M. Fasciano and G. Lapalme. Postgraphe: A system for the
generation of statistical graphics and text. In Proc. 8th International Workshop on Naturd Lnrigitage Generrrtion, pages
51-60, 1996.
[5] J. Mackinlay. Automating the design of graphical presentations of relational information. ACM Trans. on Graphics,
5(2):110-141, 1986.
[6] M. Matsushita, H. Yonezawa, and T. Kato. A frame representation of user requirements for automated data visualization.
In Proc. 14th European Conference on Arrificid Intelligence,
pages 631-635, 2000.
[7] V. 0. Mittal. Visual prompts and graphical design: A framework for exploring the design space of 2-d charts and graphs.
In Proc. 14th National Coiference on ArtiJicial Intelligence,
pages 57-63, 1998.
[SI H . Tanaka, editor. Natural Language Processing and Its Applications, chapter 9. lClCE Press, 1999 (in Japanese).
[9] H. Yonezawa, M. Matsushita, and T. Kato. Criteria to choose
appropriate graph-types. In Proc. Pacij?c Rim Internarional
Conference on Artijcial Intelligence, page 823, 2000.

ponents between the current drawn chart and newly drawn
chart, we will implement a function that displays the changc
from a current drawn chart to a newly drawn chart with animation in the KEVIN system. With this function, thc user
can be expected to intuitively understand the relationship.

4. Conclusions
In this paper, we proposed a visualization method that
extracts parameters for drawing from a series of user requirements written in a natural language and redraws the
drawn chart interactively according to the change in the

user’s viewpoint.
We will undertake a quantitative evaluation of the effectiveness of our proposed method and also refine our knowledge regarding the relationship between charts and user requirements in the future.

References
[ I ] C. Ahlberg and B. Shneiderman. Visual information seeking: Tight coupling of dynamic query filters with starfield displays. In Proc. Conference on Human Factors in Cornputing
Syslems, pages 313-317, 1994.

676

